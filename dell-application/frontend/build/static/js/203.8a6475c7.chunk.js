"use strict";(self.webpackChunkTUSKER_AI=self.webpackChunkTUSKER_AI||[]).push([[203],{21407:function(e,s,a){a.d(s,{A:function(){return u}});var n=a(958),t=a(27565),i=a(73203),r=a(64517);function o(e){var s=function(){var e=t.useContext(r.ob);return(0,i.HM)(e),e}(),a=s.formatMessage,n=s.textComponent,o=void 0===n?t.Fragment:n,l=e.id,u=e.description,c=e.defaultMessage,m=e.values,d=e.children,p=e.tagName,f=void 0===p?o:p,h=a({id:l,description:u,defaultMessage:c},m,{ignoreTag:e.ignoreTag});return"function"===typeof d?d(Array.isArray(h)?h:[h]):f?t.createElement(f,null,h):t.createElement(t.Fragment,null,h)}o.displayName="FormattedMessage";var l=t.memo(o,function(e,s){var a=e.values,t=(0,n.__rest)(e,["values"]),r=s.values,o=(0,n.__rest)(s,["values"]);return(0,i.bN)(r,a)&&(0,i.bN)(t,o)});l.displayName="MemoizedFormattedMessage";var u=l},33203:function(e,s,a){a.r(s);var n=a(89379),t=a(91212),i=a(10467),r=a(5544),o=a(27565),l=a(55166),u=a(48394),c=a(74702),m=a(64517),d=a(21407),p=a(20968),f=a(19903),h=a(96161),g=a(63630),v=a(95177),x=a(11030),b=a(27929),A={email:"",password:""};s.default=(0,m.Ay)((0,c.Ng)(function(e){return{user:e.auth.user}},f.actions)(function(e){var s=(0,x.Zp)(),a=(0,c.wA)(),m=e.intl,f=(0,o.useState)(!1),v=(0,r.A)(f,2),N=v[0],y=v[1],j=u.Ik().shape({email:u.Yj().email("Wrong email format").min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required(m.formatMessage({id:"AUTH.VALIDATION.REQUIRED_FIELD"})),password:u.Yj().min(3,"Minimum 3 symbols").max(50,"Maximum 50 symbols").required(m.formatMessage({id:"AUTH.VALIDATION.REQUIRED_FIELD"}))}),I=function(){y(!1)},_=function(e){return M.touched[e]&&M.errors[e]?"is-invalid":M.touched[e]&&!M.errors[e]?"is-valid":""},S=function(){(0,h.HW)().then(function(n){var t,i,r=n.data,o=n.isSuccess,l=n.failureStatus;if(o&&r)if(r.user_status){a(e.setUser(r));var u=null===(t=r.roles)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.role;w(u)?s("/admin/dashboard",{replace:!0}):s("/violation")}else(0,g.Au)("This Account has been deactivated");else l&&(0,g.Au)("Something went wrong")}).catch(function(e){(0,g.Au)((null===e||void 0===e?void 0:e.detail)||"Something went Wrong")})},k=function(){var e=(0,i.A)((0,t.A)().m(function e(s,a){var n;return(0,t.A)().w(function(e){for(;;)switch(e.n){case 0:(n=new p.A).set("access_token",s,{httpOnly:!1,path:"/"}),n.set("token_type",a,{httpOnly:!1,path:"/"}),S();case 1:return e.a(2)}},e)}));return function(s,a){return e.apply(this,arguments)}}(),M=(0,l.Wx)({initialValues:A,validationSchema:j,onSubmit:function(e,s){var a=s.setStatus,n=s.setSubmitting;y(!0);var t=new FormData;t.append("username",e.email),t.append("password",e.password),(0,h.iD)(t).then(function(e){var s=e.data,a=s.access_token,n=s.token_type;k(a,n),I()}).catch(function(e){"Inactive user"===e.detail?((0,g.Zx)("ask admin to enable the user"),I(),n(!1),a()):(I(),n(!1),a(m.formatMessage({id:"AUTH.VALIDATION.INVALID_LOGIN"})),e.detail?(0,g.Au)(e.detail):(0,g.Au)("Something went Wrong"))})}});return(0,b.jsxs)("div",{className:"login-form login-signin",id:"kt_login_signin_form",children:[(0,b.jsxs)("div",{className:"text-center mb-10 mb-lg-20",children:[(0,b.jsx)("h3",{className:"font-size-h1",children:(0,b.jsx)(d.A,{id:"AUTH.LOGIN.TITLE"})}),(0,b.jsx)("p",{className:"text-muted font-weight-bold",children:"Enter your username and password"})]}),(0,b.jsxs)("form",{onSubmit:M.handleSubmit,className:"form fv-plugins-bootstrap fv-plugins-framework",children:[M.status?(0,b.jsx)("div",{className:"mb-10 alert alert-custom alert-light-danger alert-dismissible",children:(0,b.jsx)("div",{className:"alert-text font-weight-bold",children:M.status})}):null,(0,b.jsxs)("div",{className:"form-group fv-plugins-icon-container",children:[(0,b.jsx)("input",(0,n.A)({placeholder:"Email",type:"email",className:"form-control form-control-solid h-auto py-5 px-6 ".concat(_("email")),name:"email"},M.getFieldProps("email"))),M.touched.email&&M.errors.email?(0,b.jsx)("div",{className:"fv-plugins-message-container",children:(0,b.jsx)("div",{className:"fv-help-block",children:M.errors.email})}):null]}),(0,b.jsxs)("div",{className:"form-group fv-plugins-icon-container",children:[(0,b.jsx)("input",(0,n.A)({autoComplete:"on",placeholder:"Password",type:"password",className:"form-control form-control-solid h-auto py-5 px-6 ".concat(_("password")),name:"password"},M.getFieldProps("password"))),M.touched.password&&M.errors.password?(0,b.jsx)("div",{className:"fv-plugins-message-container",children:(0,b.jsx)("div",{className:"fv-help-block",children:M.errors.password})}):null]}),(0,b.jsx)("div",{className:"form-group d-flex flex-wrap justify-content-between align-items-center",children:(0,b.jsxs)("button",{id:"kt_login_signin_submit",type:"submit",disabled:M.isSubmitting,className:"btn btn-primary font-weight-bold px-9 py-4 my-3",children:[(0,b.jsx)("span",{children:"Sign In"}),N&&(0,b.jsx)("span",{className:"ml-3 spinner spinner-white"})]})})]})]})}));var w=function(e){return[v.lc,v.Gm,v.NY].includes(e)}}}]);
//# sourceMappingURL=203.8a6475c7.chunk.js.map