"use strict";(self.webpackChunkTUSKER_AI=self.webpackChunkTUSKER_AI||[]).push([[173],{29991:function(e,a,n){n.d(a,{U:function(){return t}});n(27565);var i=n(27929);function t(e){var a=e.onChangeHandler,n=e.reference,t=e.className,s=e.placeholder;return(0,i.jsx)("div",{className:t+"col-xl-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",name:"searchText",placeholder:s||"Search For Name",onChange:a,ref:n})})}},62526:function(e,a,n){n.r(a),n.d(a,{default:function(){return re}});var i=n(27565),t=n(62195),s=n(11030),o=n(5544),l=n(84702),r=n(53493),c=n(27929),d=(0,i.createContext)();function u(e){var a=e.usecaseUIEvents,n=e.children,t=(0,i.useState)(r.ZE),s=(0,o.A)(t,2),u=s[0],m=s[1],v=(0,i.useCallback)(function(e){m(function(a){return(0,l.isFunction)(e)&&(e=e(a)),(0,l.isEqual)(a,e)?a:e})},[]),g=(0,i.useMemo)(function(){return{queryParams:u,setQueryParams:v,openNewUsecaseDialog:a.newUsecaseBtnClick,openEditUsecaseDialog:a.editUsecaseBtnClick,openEditRoiDialog:a.editRoiBtnClick,openViewRoiDialog:a.viewRoiBtnClick,openChangeStatusUsecaseDialog:a.changeStatusUsecaseBtnClick}},[u,v,a]);return(0,c.jsx)(d.Provider,{value:g,children:n})}var m=n(89379),v=n(12682),g=n(90053),p=n(90179),h=n(60409),x=n(99734),f=n(85670),C=n(80045),b=n(43519),j=n(13025),A=n(95177),_=["row","changeUsecaseStatus"];function U(e){var a=e.row,n=e.changeUsecaseStatus,t=(0,C.A)(e,_),s=(0,i.useCallback)(function(){n(a)},[n,a]);return(0,c.jsx)(j.A,(0,m.A)((0,m.A)({},t),{},{onChange:s}))}function y(e,a,n,i){var t,s=i.openEditUsecaseDialog,o=i.changeUsecaseStatus,l=i.userRole;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("a",{title:"Edit usecase Mapping",className:"btn btn-icon btn-light btn-hover-primary btn-sm mx-3",onClick:function(){var e;return s(null===a||void 0===a||null===(e=a.CameraUseCaseMapping)||void 0===e?void 0:e.id)},children:(0,c.jsx)("span",{className:"svg-icon svg-icon-md svg-icon-primary",children:(0,c.jsx)(b.A,{title:"Edit usecase Mapping Details",src:(0,f.oK)("/media/svg/icons/Communication/Write.svg")})})}),(0,c.jsx)(U,{color:"primary",checked:null===a||void 0===a||null===(t=a.CameraUseCaseMapping)||void 0===t?void 0:t.status,name:"usecaseStatus",row:a,changeUsecaseStatus:o,disabled:l!==A.NY})]})}var w=n(47766);function S(e,a,n,i){var t=i.openViewRoiDialog;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("a",{title:"View Roi",className:"btn btn-icon btn-light btn-sm mx-3",onClick:function(e){var n;t(null===a||void 0===a||null===(n=a.CameraUseCaseMapping)||void 0===n?void 0:n.id)},children:(0,c.jsx)(w.A,{color:"action",style:{fontSize:"2rem",color:"#147b82"}})})})}var k=n(15037),N=n(63630),B=n(74702),M=n(40043),E=n(20737),D=n(29991),R=n(65971),H=n.n(R),F=(n(82017),n(87835)),I=n(60112),P=n.n(I),T=n(10782),L=n(10334);function z(){var e,a=(0,i.useContext)(d),n=(0,i.useState)(!1),t=(0,o.A)(n,2),s=t[0],l=t[1],r=(0,i.useMemo)(function(){return(0,m.A)((0,m.A)({},a),{},{newUsecaseButtonClick:a.openNewUsecaseDialog})},[a]),u=(0,B.d4)(function(e){var a,n,i,t=e.auth;return{userRole:(null===(a=t.user)||void 0===a||null===(n=a.roles)||void 0===n?void 0:n.length)&&(null===(i=t.user.roles[0])||void 0===i?void 0:i.role)}},B.bN).userRole,C=[{dataField:"idx",text:"Index",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ},{dataField:"Location",text:"Location Name",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.Location)||void 0===n?void 0:n.location_name}},{dataField:"CameraManager",text:"Camera Name",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.CameraManager)||void 0===n?void 0:n.camera_name}},{dataField:"UseCase",text:"Usecase Name",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.UseCase)||void 0===n?void 0:n.usecase}},{dataField:"CameraUseCaseMapping",text:"Time Before Event",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.CameraUseCaseMapping)||void 0===n?void 0:n.second_before_event}},{dataField:"CameraUseCaseMapping",text:"Time After Event",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.CameraUseCaseMapping)||void 0===n?void 0:n.second_after_event}},{dataField:"CameraUseCaseMapping",text:"Timeout",sort:!0,sortCaret:f.iA,headerSortingClasses:f.UJ,formatter:function(e,a){var n;return null===a||void 0===a||null===(n=a.CameraUseCaseMapping)||void 0===n?void 0:n.usecase_timeout}},{dataField:"action",text:"Actions",formatter:y,formatExtraData:{changeUsecaseStatus:function(e){$(!0),ie(e)},userRole:u,openEditUsecaseDialog:r.openEditUsecaseDialog}},{dataField:"action",text:"Roi",formatter:S,formatExtraData:{openViewRoiDialog:r.openViewRoiDialog,openEditRoiDialog:r.openEditRoiDialog}}],b=i.useState(!1),j=(0,o.A)(b,2),_=j[0],U=j[1];function w(e){var a,n,i={id:null===e||void 0===e||null===(a=e.CameraUseCaseMapping)||void 0===a?void 0:a.id,status:!(null!==e&&void 0!==e&&null!==(n=e.CameraUseCaseMapping)&&void 0!==n&&n.status)};(0,k.Mp)(i).then(function(e){var a;e&&e.isSuccess&&(U(!_),(0,N.Zx)(null===(a=e.data)||void 0===a?void 0:a.message),$(!1))}).catch(function(e){$(!1),U(!_),e.detail&&console.log(e.detail)})}var R=(0,B.d4)(function(e){var a;return{currentState:e.useCase,popupData:null===(a=e.location)||void 0===a?void 0:a.popupData}},B.bN),I=R.currentState,z=R.popupData,q=I.entities,J=void 0===q?[]:q,V=I.listLoading,W=void 0!==V&&V,K=(0,i.useState)(J),O=(0,o.A)(K,2),Z=O[0],Y=O[1],G=(0,i.useState)(!1),Q=(0,o.A)(G,2),X=Q[0],$=Q[1],ee=(0,i.useState)(),ae=(0,o.A)(ee,2),ne=ae[0],ie=ae[1],te=(0,B.wA)(),se=(0,i.useRef)(""),oe=(0,f.J$)(Z||J,r.queryParams),le=(0,i.useCallback)(function(e){if(J.length>0){var a,n=((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||se.current.value||"").trim();oe=(0,f.GI)(J,n,["Location.location_name","CameraManager.camera_name","UseCase.usecase"],r.queryParams,Y)}},[J,r.queryParams,Y]),re=(0,i.useCallback)(function(){w(ne)},[ne,w]),ce=function(){$(!1)},de=(0,i.useCallback)(function(){ce()},[ce]),ue=(0,i.useCallback)(function(){te(T.Uc()),l(!1)},[te,l]);return(0,i.useEffect)(function(){z.length>0?l(!0):l(!1)},[z]),(0,i.useEffect)(function(){te(M.pN(u))},[r.queryParams,te,_]),(0,i.useEffect)(function(){le()},[J]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v.Zp,{className:"example example-compact",style:{minHeight:"300px"},children:(0,c.jsxs)(v.bw,{style:{minHeight:"300px",padding:"10px 10px"},children:[(0,c.jsxs)(g.A,{className:"align-items-center",children:[(0,c.jsx)(p.A,{xs:12,sm:12,md:6,lg:6,xl:6,className:"mb-2 mb-md-0",children:(0,c.jsx)(x.A,{title:"UseCase Mapping Details"})}),(0,c.jsx)(p.A,{xs:12,sm:12,md:6,lg:6,xl:6,children:(0,c.jsxs)("div",{className:"d-flex justify-content-end align-items-center gap-2 flex-wrap",children:[(0,c.jsx)("div",{className:"mr-1 mb-2",children:(0,c.jsx)(D.U,{reference:se,onChangeHandler:le,placeholder:"Search For Usecase Name ,Location Name, Camera Name"})}),u===A.NY&&(0,c.jsx)(h.A,{className:"mr-3 mb-2",color:"primary",onClick:r.newUsecaseButtonClick,children:"Add UseCase Mapping"})]})})]}),(0,c.jsx)("hr",{}),(0,c.jsx)(g.A,{children:(0,c.jsx)(p.A,{xl:12,style:{padding:"10px 20px",minWidth:"300px"},children:(0,c.jsx)(c.Fragment,{children:(null===(e=oe)||void 0===e?void 0:e.length)>0?(0,c.jsx)(E.gx,{pagination:(0,E.Ay)((0,f.lh)(null===Z||void 0===Z?void 0:Z.length,r.queryParams)),children:function(e){var a=e.paginationProps,n=e.paginationTableProps;return(0,c.jsx)(v.dK,{isLoading:W,paginationProps:a,children:(0,c.jsxs)(H(),{tag:"div",blocking:W,color:"#147b82",children:[(0,c.jsx)("div",{style:{flex:1,height:"calc(100vh - 365px)",overflowX:"auto"},children:(0,c.jsx)(F.a,{columns:C,items:oe,tableChangeHandler:r.setQueryParams,paginationTableProps:n})}),(0,c.jsx)(P(),{showCancel:!0,showConfirm:!0,confirmBtnText:"Confirm",confirmBtnBsStyle:"primary",cancelBtnBsStyle:"light",cancelBtnStyle:{color:"black"},title:"Are you sure ?",onConfirm:re,onCancel:de,show:X,focusCancelBtn:!0})]})})}}):(0,c.jsx)("div",{style:{minHeight:"calc(100vh - 365px)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,c.jsx)("h3",{className:"text-center mb-0",children:"No Data Found"})})})})})]})}),s&&(0,c.jsx)(L.A,{showBarTableData:s,tableDatas:z,handleCloseModal:ue})]})}var q=n(68854);function J(e){var a=e.id,n=(0,B.d4)(function(e){var a;return{actionsLoading:(null===(a=e.useCase)||void 0===a?void 0:a.actionsLoading)||!1}},B.bN).actionsLoading,t=(0,i.useState)(""),s=(0,o.A)(t,2),l=s[0],r=s[1];return(0,i.useEffect)(function(){r(a?"Edit":"Add New")},[n]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(q.A.Header,{closeButton:!0,children:(0,c.jsxs)(q.A.Title,{id:"example-modal-sizes-title-lg",children:[l," Usecase"]})})})}var V=n(19131),W=n(37491).m.actions;function K(e){var a=e.show,n=e.onHide,t=(0,s.g)().id,o=(0,B.d4)(function(e){var a,n;return{actionsLoading:(null===(a=e.useCase)||void 0===a?void 0:a.actionsLoading)||!1,getAllCameraUsecaseMappingById:null===(n=e.useCase)||void 0===n?void 0:n.getAllCameraUsecaseMappingById}},B.bN),l=o.actionsLoading,r=o.getAllCameraUsecaseMappingById,d=(0,B.wA)();(0,i.useEffect)(function(){d(null!==t&&void 0!==t?M.eH(t):W.clearUsecaseById())},[t,d]);var u=(0,B.d4)(function(e){var a,n,i,t=e.auth;return{userRole:(null===(a=t.user)||void 0===a||null===(n=a.roles)||void 0===n?void 0:n.length)&&(null===(i=t.user.roles[0])||void 0===i?void 0:i.role)}},B.bN).userRole,m=(0,i.useCallback)(function(e){var a={usecase_id:null===e||void 0===e?void 0:e.usecase_id,camera_id:null===e||void 0===e?void 0:e.camera_id,usecase_timeout:null===e||void 0===e?void 0:e.usecase_timeout,second_before_event:null===e||void 0===e?void 0:e.second_before_event,second_after_event:null===e||void 0===e?void 0:e.second_after_event},i={id:null===e||void 0===e?void 0:e.id,usecase_id:null===e||void 0===e?void 0:e.usecase_id,camera_id:null===e||void 0===e?void 0:e.camera_id,usecase_timeout:null===e||void 0===e?void 0:e.usecase_timeout,second_before_event:null===e||void 0===e?void 0:e.second_before_event,second_after_event:null===e||void 0===e?void 0:e.second_after_event};null!==e&&void 0!==e&&e.id?d(M.sV(i)).then(function(){d(M.pN(u)),n()}):d(M.zJ(a)).then(function(){d(M.pN(u)),n()})},[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(q.A,{size:"md",centered:!1,show:a,onHide:n,"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,c.jsx)(J,{id:t}),(0,c.jsx)(H(),{tag:"div",blocking:l,color:"#147b82",children:(0,c.jsx)(V.A,{saveUsecase:m,actionsLoading:l,usecaseData:r,onHide:n})})]})})}for(var O=n(36380),Z=n(80870),Y=n(31725),G=n(1763),Q=[{media_id:"61c6323e-d23c-44c5-b655-ef72a01125c5",filename:"208_1680628711_frame.jpg",media_type:"IMAGE",src:"https://cdn.wallpapersafari.com/77/1/IeCovk.jpg",media_created_at:"2024-03-28T01:33:50.863571+00:00",result_id:"a902c61e-4cc9-44f4-9edf-5ac010e2c310",regions:[],is_hide:!1}],X={},$=0,ee=[{id:"select_tool",description:"Switch to the Select Tool",binding:"escape"},{id:"zoom_tool",description:"Select the Zoom Tool",binding:"z"},{id:"create_point",description:"Create a point"},{id:"create_bounding_box",description:"Create a bounding box",binding:"b"},{id:"pan_tool",description:"Select the Pan Tool",binding:"m"},{id:"create_polygon",description:"Create a Polygon",binding:"p"},{id:"create_pixel",description:"Create a Pixel Mask"},{id:"save_and_previous_sample",description:"Save and go to previous sample",binding:"ArrowLeft"},{id:"save_and_next_sample",description:"Save and go to next sample",binding:"ArrowRight"},{id:"save_and_exit_sample",description:"Save and exit current sample"},{id:"exit_sample",description:"Exit sample without saving"},{id:"delete_region",description:"Delete selected region",binding:"d"},{id:"undo",description:"Undo latest change",binding:"Ctrl+z"},{id:"new_icon",description:"Next To Previous",binding:"q"},{id:"smart_tool",description:"Smart Annotation",binding:"s"}];$<ee.length;$++){var ae=ee[$],ne=ae.id,ie=ae.binding;X[ne]=ie}var te=function(e){var a,n=e.show,i=e.onHide;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(q.A,{show:n,onHide:i,backdrop:"static",keyboard:!1,scrollable:!1,size:"xl",style:{maxHeight:"-webkit-fill-available"},"aria-labelledby":"contained-modal-title-vcenter",children:[(0,c.jsx)(q.A.Header,{closeButton:!0,children:(0,c.jsx)(q.A.Title,{id:"example-modal-sizes-title-lg",children:"ROI Selection"})}),(0,c.jsx)(q.A.Body,{children:(0,c.jsx)(Z.Ay,{container:!0,spacing:2,children:(0,c.jsx)(Z.Ay,{item:!0,xl:12,lg:12,md:12,xs:12,p:0,className:"d-flex",children:(0,c.jsxs)("div",{className:"modal-annotationsize-change",children:[(0,c.jsx)("div",{children:(0,c.jsx)(Y.HotKeys,{keyMap:X,children:(0,c.jsx)(G.bO,{labelImages:!0,regionClsList:["person"],images:[].concat(Q),selectedImage:null===(a=Q[0])||void 0===a?void 0:a.src,enabledTools:["select","create-box","create-polygon","create-expanding-line","create-pixel","show-mask","create-line","smart-tool"],selectedTool:"create-box"})})}),(0,c.jsx)("div",{children:(0,c.jsx)(G.jM,{imageSrc:"https://cdn.wallpapersafari.com/77/1/IeCovk.jpg",regions:[],clientWidthNew:240,clientHeightNew:190,dragWithPrimary:!0,showPointDistances:!1,zoomWithPrimary:!0,modifyingAllowedArea:!0,createWithPrimary:!0,zoomOnAllowedArea:!0,fullImageSegmentationMode:!1,zoomBox:null})})]})})})}),(0,c.jsxs)(q.A.Footer,{children:[(0,c.jsx)(O.A,{type:"button",onClick:i,className:"btn btn-light btn-elevate",children:"Cancel"}),(0,c.jsx)(c.Fragment,{children:" "}),(0,c.jsx)(O.A,{type:"submit",className:"btn btn-primary btn-elevate",children:"Save"})]})]})})},se=function(e){var a,n,t=e.show,o=e.onHide,l=(0,s.g)().id,r=(0,B.wA)(),d=(0,B.d4)(function(e){var a,n;return{actionsLoading:(null===(a=e.useCase)||void 0===a?void 0:a.actionsLoading)||!1,getAllCameraUsecaseMappingById:null===(n=e.useCase)||void 0===n?void 0:n.getAllCameraUsecaseMappingById}},B.bN),u=d.actionsLoading,m=d.getAllCameraUsecaseMappingById;return(0,i.useEffect)(function(){r(null!==l&&void 0!==l?M.eH(l):M.bU())},[l,r]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(q.A,{show:t,onHide:o,backdrop:"static",keyboard:!1,scrollable:!1,size:"lg",style:{maxHeight:"-webkit-fill-available"},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,c.jsx)(q.A.Header,{closeButton:!0,children:(0,c.jsx)(q.A.Title,{id:"example-modal-sizes-title-lg",children:"ROI Images"})}),(0,c.jsx)(q.A.Body,{children:(0,c.jsx)(H(),{blocking:u,tag:"div",color:"#147b82",children:null!==m&&void 0!==m&&null!==(a=m.CameraUseCaseMapping)&&void 0!==a&&a.roi_image_path?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("img",{src:null===m||void 0===m||null===(n=m.CameraUseCaseMapping)||void 0===n?void 0:n.roi_image_path,alt:"RTSP Stream",style:{width:"100%",height:"60vh"}})}):(0,c.jsx)("h3",{className:"mt-5 d-flex justify-content-center",children:"No ROI Image"})})}),(0,c.jsx)(q.A.Footer,{children:(0,c.jsx)(h.A,{color:"secondary",onClick:o,children:"Cancel"})})]})})};function oe(){var e=(0,B.wA)(),a=(0,s.Zp)(),n=(0,s.zy)(),t=A.kY+"/usecase",o={newUsecaseBtnClick:function(){a("".concat(t,"/new"))},editUsecaseBtnClick:function(e){a("".concat(t,"/").concat(e,"/edit"))},editRoiBtnClick:function(e){a("".concat(t,"/").concat(e,"/roi"))},viewRoiBtnClick:function(e){a("".concat(t,"/").concat(e,"/view"))},changeStatusUsecaseBtnClick:function(e,n,i){a("".concat(t,"/").concat(e,"/").concat(n,"/").concat(i,"/changeStatus"))}},l=n.pathname.endsWith("/new")||n.pathname.includes("/edit")||n.pathname.includes("/roi")||n.pathname.includes("/view"),r=i.useCallback(function(){e(M.bU()),a(t)},[]);return(0,c.jsx)(u,{usecaseUIEvents:o,children:(0,c.jsxs)("div",{children:[(0,c.jsx)(z,{}),l&&(0,c.jsxs)(s.BV,{children:[(0,c.jsx)(s.qh,{path:"new",element:(0,c.jsx)(K,{show:!0,onHide:r})}),(0,c.jsx)(s.qh,{path:":id/roi",element:(0,c.jsx)(te,{show:!0,onHide:r})}),(0,c.jsx)(s.qh,{path:":id/view",element:(0,c.jsx)(se,{show:!0,onHide:r})}),(0,c.jsx)(s.qh,{path:":id/edit",element:(0,c.jsx)(K,{show:!0,onHide:r})})]})]})})}function le(){return(0,c.jsx)(oe,{})}function re(){return(0,t.ro)().setTitle("Usecase"),(0,c.jsx)(le,{})}}}]);
//# sourceMappingURL=173.766ee481.chunk.js.map