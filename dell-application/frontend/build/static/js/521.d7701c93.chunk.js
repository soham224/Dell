"use strict";(self.webpackChunkTUSKER_AI=self.webpackChunkTUSKER_AI||[]).push([[521],{10334:function(e,t,a){a.d(t,{A:function(){return y}});var n=a(5544),l=a(27565),r=a(59635),o=a(60409),i=a(68854),s=a(36278),c=a(6585),u=a(3934),d=a(35540),m=a(35944),f=a(22945),v=a(65044),h=a(74702),x=a(7274),p=a(37165),b=a(30122),g=a(27929);var A=function(e){var t=e.currentFrameIndex,a=e.tableData,n=e.handleNext,l=e.handlePrev,r=e.videoUrl,o=e.isNextPrev;return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"button-group",children:(0,g.jsx)("div",{className:"control-bar",style:{display:"flex",justifyContent:"end",gap:10,marginBottom:10},children:o&&(0,g.jsxs)("span",{className:"right-controls",style:{display:"flex",gap:10},children:[(0,g.jsx)(b.A,{variant:"outlined",onClick:l,disabled:0===t,title:"Previous",sx:{fontSize:"0.75rem"},children:"Prev"}),(0,g.jsx)(b.A,{variant:"outlined",onClick:n,disabled:t===a.length-1,title:"Next",sx:{fontSize:"0.75rem"},children:"Next"})]})})}),(0,g.jsx)("div",{className:"text-center",children:(0,g.jsxs)("video",{width:"100%",height:"auto",controls:!0,style:{maxHeight:"100vh",borderRadius:"0px"},children:[(0,g.jsx)("source",{src:r,type:"video/mp4"}),"Your browser does not support the video tag."]},t)})]})},j=void 0,y=(0,v.A)(function(e){return{card:{maxWidth:416,height:"100%",margin:"auto"},media:{height:230},header:{paddingBottom:"0rem"},learnMore:{position:"absolute",bottom:0},cardCol:{height:220,marginTop:25,marginBottom:15}}})(function(e){var t,a,v,b=e.tableDatas,y=e.showBarTableData,S=e.handleCloseModal,N=(0,l.useState)(null),C=(0,n.A)(N,2),w=C[0],k=C[1],P=(0,l.useState)([]),O=(0,n.A)(P,2),E=O[0],z=O[1],D=(0,l.useState)(0),F=(0,n.A)(D,2),I=F[0],_=F[1],T=(0,l.useState)(0),M=(0,n.A)(T,2),R=M[0],L=M[1],B=(0,l.useState)([]),K=(0,n.A)(B,2),U=K[0],Y=K[1],G=(0,l.useState)("images"),H=(0,n.A)(G,2),$=H[0],W=H[1],V=(0,h.d4)(function(e){var t,a,n,l=e.auth;return{userRole:(null===(t=l.user)||void 0===t||null===(a=t.roles)||void 0===a?void 0:a.length)&&(null===(n=l.user.roles[0])||void 0===n?void 0:n.role)}},h.bN).userRole;(0,l.useEffect)(function(){Z()},[V]);var Z=function(){(0,f.if)(["-1"],V).then(function(e){if(e&&e.isSuccess){var t=[];e.data.map(function(e,a){return t.push({label:e.camera_name,value:e.id}),null}),t.push({label:"All Camera",value:"-1"}),Y(t)}else j.setState({blocking:!1}),console.log("Something went wrong")}).catch(function(e){e.detail&&console.log(e.detail)})};(0,l.useEffect)(function(){U&&(q(),J())},[I,R,b,U]);var q=function(){k([{dataField:"camera_name",text:"Camera"},{dataField:"count",text:"Count"},{dataField:"date",text:"Date"},{dataField:"labels",text:"Labels",formatter:function(e){return e?e.split(",").map(function(e){return(0,x.F)(e.trim())}).join(", "):""}}])},J=function(){var e,t,a;if(b.length){var n="images"===$?b[I]:b[R],l=[],r=U.find(function(e){return String(e.value)===(null===n||void 0===n?void 0:n.camera_id)}),o=(null===r||void 0===r?void 0:r.label)||"Unknown Camera",i=(null===n||void 0===n||null===(e=n.result)||void 0===e||null===(t=e.detection)||void 0===t?void 0:t.length)||0,s=m.utc(null===n||void 0===n||null===(a=n.frame_date)||void 0===a?void 0:a.$date).local().format("MMMM DD YYYY, h:mm:ss a"),c=Object.keys((null===n||void 0===n?void 0:n.counts)||{}).toString();l.push({camera_name:o,count:i,date:s,labels:c,notification_type:"tusker"}),z(l)}},X=(0,l.useCallback)(function(){_(function(e){return Math.min(e+1,b.length-1)})},[b.length]),Q=(0,l.useCallback)(function(){_(function(e){return Math.max(e-1,0)})},[]),ee=(0,l.useCallback)(function(){L(function(e){return Math.min(e+1,b.length-1)})},[b.length]),te=(0,l.useCallback)(function(){L(function(e){return Math.max(e-1,0)})},[]),ae=(0,l.useCallback)(function(e){W(e)},[]);return(0,g.jsxs)(i.A,{size:"lg",show:y,onHide:S,dialogClassName:"result-modal",children:[(0,g.jsx)(i.A.Header,{closeButton:!0,children:(0,g.jsx)("h3",{children:"My Result Details"})}),(0,g.jsx)(i.A.Body,{children:(0,g.jsxs)(s.A,{activeKey:$,onSelect:ae,id:"media-tabs",className:"mb-3",children:[(0,g.jsx)(c.A,{eventKey:"images",title:"Images",children:(0,g.jsxs)(g.Fragment,{children:[E.length>0?(0,g.jsx)(r.A,{bootstrap4:!0,keyField:"id",data:E,columns:w,bordered:!1,wrapperClasses:"table-responsive"}):(0,g.jsx)("p",{children:"No data available"}),(0,g.jsx)(p.A,{currentFrameIndex:I,tableData:b,handleNext:X,handlePrev:Q,imageUrl:null===(t=b[I])||void 0===t?void 0:t.image_url,isNextPrev:!0})]})}),(0,g.jsxs)(c.A,{eventKey:"video",title:"Video",children:[E.length>0?(0,g.jsx)(r.A,{bootstrap4:!0,keyField:"id",data:E,columns:w,bordered:!1,wrapperClasses:"table-responsive"}):(0,g.jsx)("p",{children:"No data available"}),b&&null!==(a=b[R])&&void 0!==a&&a.video_url?(0,g.jsx)(A,{currentFrameIndex:R,tableData:b,handleNext:ee,handlePrev:te,videoUrl:null===(v=b[R])||void 0===v?void 0:v.video_url,isNextPrev:!0}):(0,g.jsx)("p",{className:"text-center",children:"No video available for this frame."})]})]})}),(0,g.jsx)(i.A.Footer,{children:(0,g.jsxs)(u.A,{className:"w-100",children:[(0,g.jsx)(d.A,{xs:6,children:(0,g.jsx)("span",{children:"images"===$?(0,g.jsxs)(g.Fragment,{children:["Frame ",I+1," of ",b.length]}):(0,g.jsxs)(g.Fragment,{children:["Video ",R+1," of ",b.length]})})}),(0,g.jsx)(d.A,{xs:6,className:"text-right",children:(0,g.jsx)(o.A,{type:"button",onClick:S,className:"btn btn-secondary ml-2",children:"Cancel"})})]})})]})})},36278:function(e,t,a){a.d(t,{A:function(){return b}});var n=a(58168),l=a(98587),r=a(27565),o=(a(10060),a(86989)),i=a(78023),s=a(64623),c=a(59396),u=a(90270),d=a(3428),m=a(35767);function f(e,t){var a=0;return r.Children.map(e,function(e){return r.isValidElement(e)?t(e,a++):e})}var v=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function h(e){var t;return function(e,t){var a=0;r.Children.forEach(e,function(e){r.isValidElement(e)&&t(e,a++)})}(e,function(e){null==t&&(t=e.props.eventKey)}),t}function x(e){var t=e.props,a=t.title,n=t.eventKey,l=t.disabled,o=t.tabClassName,i=t.id;return null==a?null:r.createElement(c.A,{as:s.A,eventKey:n,disabled:l,id:i,className:o},a)}var p=function(e){var t=(0,o.Zw)(e,{activeKey:"onSelect"}),a=t.id,s=t.onSelect,c=t.transition,p=t.mountOnEnter,b=t.unmountOnExit,g=t.children,A=t.activeKey,j=void 0===A?h(g):A,y=(0,l.A)(t,v);return r.createElement(u.A,{id:a,activeKey:j,onSelect:s,transition:c,mountOnEnter:p,unmountOnExit:b},r.createElement(i.A,(0,n.A)({},y,{role:"tablist",as:"nav"}),f(g,x)),r.createElement(d.A,null,f(g,function(e){var t=(0,n.A)({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,r.createElement(m.A,t)})))};p.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},p.displayName="Tabs";var b=p},37165:function(e,t,a){var n=a(80045),l=a(27565),r=a(30122),o=a(83832),i=a(71744),s=a(50521),c=a.n(s),u=a(53493),d=a(27929),m=["zoomIn","zoomOut","resetTransform"];t.A=function(e){var t=e.currentFrameIndex,a=e.tableData,s=e.handleNext,f=e.handlePrev,v=e.imageUrl,h=e.isNextPrev,x=l.useRef(null);return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"button-group",children:(0,d.jsxs)("div",{className:"control-bar",style:{display:"flex",justifyContent:"space-between",gap:10,marginBottom:10},children:[(0,d.jsxs)("span",{className:"left-controls",children:[(0,d.jsx)(r.A,{variant:"outlined",onClick:function(){var e;return null===(e=x.current)||void 0===e?void 0:e.zoomIn()},title:"Zoom In",sx:{fontSize:"0.75rem",minWidth:"32px"},children:"+"}),(0,d.jsx)(r.A,{variant:"outlined",onClick:function(){var e;return null===(e=x.current)||void 0===e?void 0:e.zoomOut()},title:"Zoom Out",sx:{fontSize:"0.75rem",minWidth:"32px"},children:"-"}),(0,d.jsx)(r.A,{variant:"outlined",onClick:function(){var e;return null===(e=x.current)||void 0===e?void 0:e.resetTransform()},title:"Reset",sx:{fontSize:"0.75rem"},children:"Reset"})]}),h&&(0,d.jsxs)("span",{className:"right-controls",style:{display:"flex",gap:10},children:[(0,d.jsx)(r.A,{variant:"outlined",onClick:f,disabled:0===t,title:"Previous",sx:{fontSize:"0.75rem"},children:"Prev"}),(0,d.jsx)(r.A,{variant:"outlined",onClick:s,disabled:t===a.length-1,title:"Next",sx:{fontSize:"0.75rem"},children:"Next"})]})]})}),(0,d.jsx)("div",{className:"image-container",children:(0,d.jsx)(o.GT,{defaultScale:1,defaultPositionX:200,defaultPositionY:100,children:function(e){var r,s,f=e.zoomIn,h=e.zoomOut,x=e.resetTransform;(0,n.A)(e,m);return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsx)("div",{className:"tools text-right",style:{width:"100%",marginBottom:"4px"},children:(0,d.jsx)(i.A,{zoomIn:f,zoomOut:h,resetTransform:x,frameData:!0})}),(0,d.jsxs)("div",{className:"boundimage-full w-100",style:{margin:"0 auto"},children:[console.log("tableData",a[t]),(0,d.jsx)(o.WZ,{children:(0,d.jsx)(c(),{className:"row m-auto col-12 p-0 text-center",image:v,boxes:null===(r=a[t])||void 0===r||null===(s=r.result)||void 0===s?void 0:s.detection.map(function(e){return{coord:[e.location[0],e.location[1],e.location[2]-e.location[0],e.location[3]-e.location[1]],label:e.label}}),options:u.Wj})})]})]})}})})]})}},47766:function(e,t,a){var n=a(86946),l=a(27929);t.A=(0,n.A)((0,l.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},61626:function(e,t,a){a.r(t),a.d(t,{default:function(){return ne}});var n=a(27565),l=a(24765),r=a(5544),o=a(12682),i=a(89379),s=a(59635),c=a(20737),u=a(85670),d=a(53493),m=a(22466),f=a(17598),v=a(63630),h=a(74702),x=a(39652).M.actions,p=function(e){return function(t){t(x.setEntities(e))}},b=a(90053),g=a(90179),A=a(35944),j=a.n(A),y=a(65971),S=a.n(y),N=(a(82017),a(36380)),C=a(3200),w=a(7274),k=a(47766),P=a(68854),O=a(36278),E=a(6585),z=a(3934),D=a(35540),F=a(60409),I=a(37165),_=a(27929);function T(e){var t=e.id,a=e.show,l=e.onHide,o=e.row,i=e.cameraName,c=(0,n.useState)([]),u=(0,r.A)(c,2),d=u[0],m=u[1],f=(0,n.useState)("images"),x=(0,r.A)(f,2),p=x[0],b=x[1],g=(0,n.useState)({}),A=(0,r.A)(g,2),y=A[0],S=A[1],N=[{dataField:"camera_name",text:"camera"},{dataField:"count",text:"Count"},{dataField:"date",text:"Date"},{dataField:"labels",text:"Labels",formatter:function(e){return e?e.split(",").map(function(e){return(0,w.G)(e.trim())}).join(", "):""}}];(0,n.useEffect)(function(){Object.keys(o).length>0&&k()},[o]);var C=(0,h.d4)(function(e){return{entities:e.myResult.entities}},h.bN).entities;(0,n.useEffect)(function(){if(t&&C){var e=C.filter(function(e){return e._id.$oid===t});e.length?S(e[0]):(0,v.Au)("No deployedRTSP job found with that id")}return function(){return S({})}},[t,C]);var k=function(){var e=[],t=i[parseInt(null===o||void 0===o?void 0:o.camera_id)],a=o.result.detection.length,n=j().utc(o.frame_date.$date).local().format("MMMM DD YYYY, h:mm:ss a"),l=Object.keys(o.counts).toString();e.push({camera_name:t,count:a,date:n,labels:l}),m(e)},T=(0,n.useCallback)(function(e){return b(e)},[]);return(0,_.jsxs)(P.A,{size:"lg",show:a,onHide:l,dialogClassName:"result-modal","aria-labelledby":"example-modal-sizes-title-lg",style:{maxHeight:"-webkit-fill-available"},children:[(0,_.jsx)(P.A.Header,{closeButton:!0,children:(0,_.jsx)(P.A.Title,{id:"example-modal-sizes-title-lg",children:"My Result Details"})}),(0,_.jsx)(P.A.Body,{children:(0,_.jsxs)(O.A,{activeKey:p,onSelect:T,id:"media-tabs",className:"mb-3",children:[(0,_.jsx)(E.A,{eventKey:"images",title:"Images",children:(0,_.jsxs)(z.A,{children:[(0,_.jsx)(D.A,{xl:12,xs:12,md:12,lg:12,sm:12,className:"mt-2",children:o&&d&&(0,_.jsx)(s.A,{classes:"table table-head-custom table-vertical-center overflow-hidden mt-3",bootstrap4:!0,wrapperClasses:"table-responsive",keyField:"label",bordered:!1,data:d,columns:N})}),(0,_.jsx)(D.A,{xl:12,xs:12,md:12,lg:12,sm:12,children:(0,_.jsx)(I.A,{imageUrl:null===y||void 0===y?void 0:y.image_url})})]})}),(0,_.jsx)(E.A,{eventKey:"video",title:"Video",children:(0,_.jsxs)(z.A,{children:[(0,_.jsx)(D.A,{xl:12,xs:12,md:12,lg:12,sm:12,className:"mt-2",children:o&&d&&(0,_.jsx)(s.A,{classes:"table table-head-custom table-vertical-center overflow-hidden mt-3",bootstrap4:!0,wrapperClasses:"table-responsive",keyField:"label",bordered:!1,data:d,columns:N})}),(0,_.jsx)(D.A,{xl:12,xs:12,md:12,lg:12,sm:12,children:y&&y.video_url?(0,_.jsx)("div",{className:"text-center",children:(0,_.jsxs)("video",{width:"100%",height:"auto",controls:!0,style:{maxHeight:"100vh",borderRadius:"0px"},children:[(0,_.jsx)("source",{src:y.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]})}):(0,_.jsx)("p",{className:"text-center",children:"No video available for this frame."})})]})})]})}),(0,_.jsx)(P.A.Footer,{children:(0,_.jsx)(F.A,{color:"secondary",onClick:l,children:"Cancel"})})]})}var M=function(e,t){return function(a,n){return(0,_.jsx)("a",{title:"Information",className:"btn btn-icon btn-light btn-sm mx-3",onClick:function(){return e(n._id.$oid,n,t)},style:{cursor:"pointer"},children:(0,_.jsx)(k.A,{color:"action",style:{fontSize:"2rem",color:"#147b82"}})})}};function R(e){var t=e.jobId,a=e.cameraName,l=e.selectedLabel,v=e.startDate,x=e.endDate,j=e.selctedCameraId,y=e.locationIdList,k=e.userRole,P=(0,h.wA)(),O=(0,n.useState)({pageSize:0,totalPages:0,totalCounts:0}),E=(0,r.A)(O,2),z=E[0],D=E[1],F=(0,n.useState)({pageNumber:1,pageSize:10,sortField:null,sortOrder:null}),I=(0,r.A)(F,2),R=I[0],L=I[1],B=(0,n.useState)([]),K=(0,r.A)(B,2),U=K[0],Y=K[1],G=(0,n.useState)([]),H=(0,r.A)(G,2),$=H[0],W=H[1],V=(0,n.useState)(!1),Z=(0,r.A)(V,2),q=Z[0],J=Z[1],X=(0,n.useState)(!1),Q=(0,r.A)(X,2),ee=Q[0],te=Q[1],ae=(0,n.useState)(!1),ne=(0,r.A)(ae,2),le=ne[0],re=ne[1],oe=(0,n.useState)(!1),ie=(0,r.A)(oe,2),se=ie[0],ce=ie[1],ue=(0,h.d4)(function(e){return{currentState:e.myResult}},h.bN).currentState.refreshResult;(0,n.useEffect)(function(){be()},[U]);var de=[{dataField:"idx",text:"Index",sort:!0},{dataField:"camera_name",text:"Camera Name",sort:!0,formatter:function(e,t){return a[parseInt(null===t||void 0===t?void 0:t.camera_id)]},headerSortingClasses:u.UJ},{dataField:"count",text:"Count",sort:!0,formatter:function(e,t){var a,n;return(null===t||void 0===t||null===(a=t.result)||void 0===a||null===(n=a.detection)||void 0===n?void 0:n.length)||0}},{dataField:"created_date.$date",text:"Created Date",sort:!0,sortCaret:u.iA,headerSortingClasses:u.UJ,formatter:function(e,t){return A.utc(null===t||void 0===t?void 0:t.created_date.$date).local().format("MMMM DD YYYY, h:mm:ss a")}},{dataField:"labels",text:"labels",sort:!0,formatter:function(e,t){return Object.keys((null===t||void 0===t?void 0:t.counts)||{}).map(function(e){return(0,w.G)(e)}).join(", ")}},{dataField:"action",text:"Actions",formatter:M(function(e,t,a){ce(!0),W(t)},a)}],me=(0,n.useState)(U),fe=(0,r.A)(me,2),ve=fe[0],he=fe[1],xe=(0,n.useRef)(""),pe={custom:!0,totalSize:z.totalCounts,page:R.pageNumber,sizePerPage:R.pageSize,sizePerPageList:[{text:"10",value:10},{text:"50",value:50},{text:"100",value:100}],showTotal:!0,pageStartIndex:1,firstPageText:"First",prePageText:"Previous",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"Next page",prePageTitle:"Previous page",firstPageTitle:"First page",lastPageTitle:"Last page",showSizePerPage:!0,alwaysShowAllBtns:!0,onPageChange:function(e,t){L(function(a){return(0,i.A)((0,i.A)({},a),{},{pageNumber:e,pageSize:t})})},onSizePerPageChange:function(e,t){L(function(a){return(0,i.A)((0,i.A)({},a),{},{pageNumber:t,pageSize:e})})}},be=function(e){var t,a=((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||xe.current.value||"").trim(),n=U||[];a&&(n=(0,m.Ht)(U,a,{keys:["_id.$oid","camera_id","created_date.$date","updated_date.$date","status"]})),he(n.slice().sort((0,u.hG)(R)))};function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.xlsx";try{if(!(e instanceof Blob))throw new Error("Invalid Blob object. Check API response.");var a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}catch(l){console.error("Error during file download:",l)}}(0,n.useEffect)(function(){if(v&&x){var e=R;e.pageNumber=1,e.pageSize=10,L(e)}},[]),(0,n.useEffect)(function(){var e=R.pageSize;(v&&x||l||j)&&function(e,t,a,n,l){J(!0),e&&t&&(0,f.t)(e,t,a,n,y,l,k).then(function(e){if(!e||!e.isSuccess)throw new Error;D({pageSize:e.data.page_size,totalPages:e.data.total_pages,totalCounts:e.data.total_count})}).catch(function(e){e.detail&&(J(!1),console.log(e.detail))})}(v,x,l,j,e)},[R.pageSize]),(0,n.useEffect)(function(){var e=R.pageNumber,a=R.pageSize;v&&x&&function(e,a){J(!0);var n={pageSize:a,pageNo:e,jobId:t,startDate:v,endDate:x,selctedCameraId:j,selectedLabel:l,locationIdList:y,userRole:k};(0,f.h)(n).then(function(e){if(!e||!e.isSuccess)throw new Error;Y(e.data),P(p(e.data)),J(!1),e.data.length>0?re(!0):re(!1)}).catch(function(e){e.detail&&(J(!1),console.log(e.detail))})}(e,a)},[R,ue]);var Ae=(0,n.useCallback)(function(){if(ve&&0!==ve.length){te(!0);var e=ve.map(function(e){var t;return null===(t=e._id)||void 0===t?void 0:t.$oid});(0,C.hr)(e,k).then(function(e){e&&e.data?"string"===typeof e.data?ge(function(e,t){for(var a=atob(e),n=new Array(a.length),l=0;l<a.length;l++)n[l]=a.charCodeAt(l);return new Blob([new Uint8Array(n)],{type:t})}(e.data,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),"Results.xlsx"):e.data instanceof Blob?ge(e.data,"Results.xlsx"):console.error("Invalid response format: not a Blob or base64 string."):console.error("No data received from server")}).catch(function(e){console.error("Error downloading Excel:",e)}).finally(function(){te(!1)})}},[ve,k]),je=(0,n.useCallback)(function(){ce(!1)},[]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"separator separator-dashed mt-5 mb-5"}),(0,_.jsx)(S(),{tag:"div",blocking:q,color:"#147b82",children:le?(0,_.jsx)(c.gx,{pagination:(0,c.Ay)(pe),children:function(e){var t=e.paginationProps,a=e.paginationTableProps;return(0,_.jsx)(o.dK,{isLoading:q,paginationProps:t,children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"row mb-5 mr-5 d-flex  justify-content-end",children:ve&&ve.length>0&&(0,_.jsx)(N.A,{type:"submit",onClick:Ae,className:"bt btn-primary btn-elevate d-flex align-items-center",disabled:ee,children:ee?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Downloading..."]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("i",{className:"ki ki-download mr-2"}),"Download Excel For Results"]})})}),(0,_.jsx)(b.A,{children:(0,_.jsx)(g.A,{xl:12,style:{padding:"10px 40px 10px 40px",minWidth:"300px"},children:(0,_.jsx)("div",{style:{flex:1,height:"calc(100vh - 531px)",overflowX:"auto"},children:(0,_.jsxs)(s.A,(0,i.A)((0,i.A)({wrapperClasses:"table-responsive",bordered:!1,classes:"table employeeTable table-head-custom table-vertical-center table-horizontal-center overflow-hidden",bootstrap4:!0,remote:!0,keyField:"_id.$oid",data:(null===ve||void 0===ve?void 0:ve.map(function(e,t){var n,l,r,o;return(0,i.A)((0,i.A)({},e),{},{idx:((null===a||void 0===a||null===(n=a.pagination)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.page)-1)*(null===a||void 0===a||null===(r=a.pagination)||void 0===r||null===(o=r.options)||void 0===o?void 0:o.sizePerPage)+1+t})}))||[],columns:de,defaultSorted:d.Nz,onTableChange:(0,u.Tq)(L)},a),{},{children:[(0,_.jsx)(u.Hd,{entities:null}),(0,_.jsx)(u.Rt,{entities:null})]}))})})})]})})}}):(0,_.jsx)("div",{style:{minHeight:"calc(100vh - 405px)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,_.jsx)("h3",{className:"text-center mb-0",children:"No Data Found"})})}),se&&(0,_.jsx)(T,{row:$,show:se,id:$._id.$oid,onHide:je,cameraName:a})]})}var L=a(43368),B=a(74177),K=a(27967),U=a(19505),Y=a(96815),G=a(57059),H=a(95967),$=a(13682),W=a(22945),V=a(55072),Z=a(99734),q=a(10334),J=a(10782);function X(){var e=(0,h.wA)(),t=(0,n.useState)([{label:"All Camera",value:"-1"}]),a=(0,r.A)(t,2),i=a[0],s=a[1],c=(0,n.useState)([{label:"All label",value:"-1"}]),u=(0,r.A)(c,2),d=u[0],m=u[1],f=(0,n.useState)([{label:"All Location",value:"-1"}]),x=(0,r.A)(f,2),p=x[0],b=x[1],g=(0,n.useState)([]),A=(0,r.A)(g,2),y=A[0],S=A[1],N=(0,n.useState)(["-1"]),k=(0,r.A)(N,2),P=k[0],O=k[1],E=(0,n.useState)(["-1"]),I=(0,r.A)(E,2),T=I[0],M=I[1],X=(0,n.useState)(!0),Q=(0,r.A)(X,2),ee=Q[0],te=Q[1],ae=(0,n.useState)(["-1"]),ne=(0,r.A)(ae,2),le=ne[0],re=ne[1],oe=(0,n.useState)(null),ie=(0,r.A)(oe,2),se=ie[0],ce=ie[1],ue=(0,n.useState)(!1),de=(0,r.A)(ue,2),me=de[0],fe=de[1],ve=(0,n.useState)(!1),he=(0,r.A)(ve,2),xe=he[0],pe=he[1],be=(0,n.useState)(!1),ge=(0,r.A)(be,2),Ae=ge[0],je=ge[1],ye=(0,n.useState)(12),Se=(0,r.A)(ye,2),Ne=Se[0],Ce=Se[1],we=(0,n.useState)(j().utc((0,Y.cn)()).format()),ke=(0,r.A)(we,2),Pe=ke[0],Oe=ke[1],Ee=(0,n.useState)(j().utc((0,Y.bJ)()).format()),ze=(0,r.A)(Ee,2),De=ze[0],Fe=ze[1],Ie=(0,n.useState)(new Date),_e=(0,r.A)(Ie,2),Te=_e[0],Me=_e[1],Re=(0,n.useState)(),Le=(0,r.A)(Re,2),Be=Le[0],Ke=Le[1],Ue=(0,h.d4)(function(e){var t,a,n,l=e.auth,r=e.location;return{userRole:(null===(t=l.user)||void 0===t||null===(a=t.roles)||void 0===a?void 0:a.length)&&(null===(n=l.user.roles[0])||void 0===n?void 0:n.role),popupData:null===r||void 0===r?void 0:r.popupData}},h.bN),Ye=Ue.userRole,Ge=Ue.popupData,He=(0,n.useState)([]),$e=(0,r.A)(He,2),We=$e[0],Ve=$e[1],Ze=(0,n.useState)(["-1"]),qe=(0,r.A)(Ze,2),Je=qe[0],Xe=qe[1],Qe=(0,n.useState)([]),et=(0,r.A)(Qe,2),tt=et[0],at=et[1];(0,n.useEffect)(function(){(0,V.dr)(Ye).then(function(e){if(e&&e.data){var t=[];e.data.map(function(e){return t.push({label:e.location_name,value:e.id})}),t.push({label:"All Location",value:"-1"}),at(t)}}).catch(function(e){e.detail&&console.log(e.detail)})},[]),(0,n.useEffect)(function(){nt()},[Je,p]);var nt=function(){null===p||0===p.length?(s(null),m(null)):(s([{label:"All Camera",value:"-1"}]),m([{label:"All label",value:"-1"}])),(0,W.if)(Je,Ye).then(function(e){if(!e||!e.isSuccess)throw new Error;var t=e.data.map(function(e){return{label:e.camera_name,value:e.id}});t.push({label:"All Camera",value:"-1"}),Ve(t);var a={};e.data.map(function(e){return a[e.id]=e.camera_name,null}),ce(a),fe(!1)})};(0,n.useEffect)(function(){var e={camera_id:le,location_id:Je};null===i||0===i.length?m(null):m([{label:"All label",value:"-1"}]),(0,C.gm)(e,Ye).then(function(e){if(!e||!e.isSuccess)throw new Error;var t=e.data.flatMap(function(e){return e.labels}),a=Array.from(new Set(t)).map(function(e){return{label:(0,w.G)(e),value:e}});a.push({label:"All Label",value:"-1"}),pe(!1),S(a.length>0?a:[])}).catch(function(e){pe(!1),e.detail&&console.log(e.detail)})},[le,Je]);var lt=(0,n.useCallback)(function(e){null===e||0===e.length?(s(null),m(null),Xe(["-1"]),O(["-1"])):(s([{label:"All Camera",value:"-1"}]),m([{label:"All label",value:"-1"}]),re(["-1"]),O(["-1"])),M([]);var t=[];if(e){var a,n=(0,l.A)(e);try{var r=function(){var n=a.value;t.push(n.value.toString());var l=[];e.map(function(e){return l.push(e.value.toString()),null}),Xe(l)};for(n.s();!(a=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}}b(e),M(t)},[]),rt=function(e){O([]);var t=[];if(e){var a,n=(0,l.A)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;t.push(r.value)}}catch(o){n.e(o)}finally{n.f()}}m(e),O(t)},ot=function(e){if(e){var t=[];e.map(function(e){return t.push(e.value.toString()),O(["-1"]),null}),re(t)}else re([]),O(["-1"]);s(e)},it=(0,n.useCallback)(function(e,t){var a=(0,H.A)(t),n=(0,$.A)(parseInt(a,10)),l=Pe,r=De,o=Te,i=Be;12===parseInt(a)&&(l=parseInt("defaultMin",0),r=parseInt("defaultMax",0),o=["min"],i=["max"]),Ce(n),Oe(l),Fe(r),Me(o),Ke(i)},[]),st=(0,n.useCallback)(function(e,t){Oe(j().utc(e).format()),Fe(j().utc(t).format())},[]),ct=(0,n.useCallback)(function(){0===T.length?(0,v.Au)("Please Select Location"):0===le.length?(0,v.Au)("Please Select Camera"):0===P.length?(0,v.Au)("Please Select Labels"):(te(!1),setTimeout(function(){te(!0)},100))},[]),ut=(0,n.useCallback)(function(){Xe([-1]),O(["-1"]),re(["-1"]),te(!1),b([{label:"All Location",value:"-1"}]),s({label:"All Camera",value:"-1"}),m({label:"All label",value:"-1"}),Oe(j().utc((0,Y.cn)()).format()),Fe(j().utc((0,Y.bJ)()).format()),setTimeout(function(){te(!0)},100)},[]),dt=(0,n.useCallback)(function(){e(J.Uc()),je(!1)},[]);(0,n.useEffect)(function(){Ge.length>0?je(!0):je(!1)},[Ge]);var mt=(0,n.useCallback)(function(e){ot(e)},[ot]),ft=(0,n.useCallback)(function(e){rt(e)},[rt]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(o.Zp,{className:"example example-compact",style:{minHeight:"230px"},children:(0,_.jsxs)(o.bw,{style:{padding:"10px 10px"},children:[(0,_.jsx)(z.A,{children:(0,_.jsx)(D.A,{xl:8,xs:12,md:7,children:(0,_.jsx)(Z.A,{title:"Result Details"})})}),(0,_.jsx)("hr",{}),(0,_.jsxs)(z.A,{className:"space",children:[(0,_.jsx)(D.A,{xl:2,xs:12,md:6,sm:12,children:(0,_.jsxs)(B.A.Group,{className:"mb-3",children:[(0,_.jsx)(B.A.Label,{className:"mb-4",children:"Select Location"}),(0,_.jsx)(L.b,{isSearchable:!1,isMulti:!0,placeholder:"Select Location",className:"select-react-dropdown",value:p,onChange:lt,options:tt})]})}),(0,_.jsx)(D.A,{xl:2,xs:12,md:6,sm:12,children:(0,_.jsxs)(B.A.Group,{className:"mb-3",children:[(0,_.jsx)(B.A.Label,{className:"mb-4",children:"Select Camera"}),(0,_.jsx)(L.b,{name:"camera",isLoading:me,isSearchable:!1,className:"select-react-dropdown",isMulti:!0,placeholder:"Select Camera",options:We,onChange:mt,value:i})]})}),(0,_.jsx)(D.A,{xl:2,xs:12,md:6,sm:12,children:(0,_.jsxs)(B.A.Group,{className:"mb-3",children:[(0,_.jsx)(B.A.Label,{className:"mb-4",children:"Select Label"}),(0,_.jsx)(L.b,{isSearchable:!1,isLoading:xe,className:"select-react-dropdown",isMulti:!0,placeholder:"Select Label",value:d,onChange:ft,options:y})]})}),(0,_.jsx)(D.A,{xl:4,xs:12,md:6,sm:12,children:(0,_.jsxs)(B.A.Group,{className:"mb-3",children:[(0,_.jsx)(B.A.Label,{className:"mb-4",children:"Select Date Range"}),(0,_.jsx)(G.A,{rangeIndex:Ne,minDate:Te,maxDate:Be,startDate:Pe,endDate:De,changeDateTimeRange:st,changeDateTimeRangeIndex:it})]})}),(0,_.jsx)(D.A,{xl:2,xs:12,md:12,sm:12,children:(0,_.jsxs)("div",{className:"d-flex mr-2 mt-5",children:[(0,_.jsx)(F.A,{className:"mt-5 mr-3",color:"primary",onClick:ct,children:"Apply Filter"}),(0,_.jsx)(K.A,{placement:"bottom",overlay:(0,_.jsx)(U.A,{id:"user-notification-tooltip",children:"Show All Data"}),children:(0,_.jsx)(F.A,{className:"mt-5",color:"secondary",onClick:ut,children:"Reset filter"})})]})})]}),(0,_.jsx)("div",{children:ee&&se?(0,_.jsx)(R,{startDate:Pe,endDate:De,cameraName:se,locationIdList:Je,jobId:0,selectedLabel:P,selctedCameraId:le,userRole:Ye}):(0,_.jsx)(_.Fragment,{})})]})}),Ae&&(0,_.jsx)(q.A,{showBarTableData:Ae,tableDatas:Ge,handleCloseModal:dt})]})}function Q(){return(0,_.jsx)(X,{})}function ee(){return(0,_.jsx)(Q,{})}var te=a(62195);function ae(){return(0,te.ro)().setTitle("Result"),(0,_.jsx)(ee,{})}function ne(){return(0,_.jsx)(ae,{})}},90053:function(e,t,a){var n=a(27565),l=a(38967),r=a.n(l),o=a(23163),i=a.n(o),s=a(21784),c=["className","cssModule","noGutters","tag","widths"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var m=["xs","sm","md","lg","xl","xxl"],f=r().oneOfType([r().number,r().string]),v={tag:s.Wx,noGutters:(0,s.io)(r().bool,"Please use Bootstrap 5 gutter utility classes. https://getbootstrap.com/docs/5.0/layout/gutters/"),className:r().string,cssModule:r().object,xs:f,sm:f,md:f,lg:f,xl:f,xxl:f,widths:r().array};function h(e){var t=e.className,a=e.cssModule,l=e.noGutters,r=e.tag,o=void 0===r?"div":r,f=e.widths,v=void 0===f?m:f,h=d(e,c),x=[];v.forEach(function(t,a){var n=e[t];if(delete h[t],n){var l=!a;x.push(l?"row-cols-".concat(n):"row-cols-".concat(t,"-").concat(n))}});var p=(0,s.qO)(i()(t,l?"gx-0":null,"row",x),a);return n.createElement(o,u({},h,{className:p}))}h.propTypes=v,t.A=h},90179:function(e,t,a){var n=a(27565),l=a(38967),r=a.n(l),o=a(23163),i=a.n(o),s=a(21784),c=["className","cssModule","widths","tag"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u.apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=["xs","sm","md","lg","xl","xxl"],v=r().oneOfType([r().number,r().string]),h=r().oneOfType([r().bool,r().number,r().string,r().shape({size:r().oneOfType([r().bool,r().number,r().string]),order:v,offset:v})]),x={tag:s.Wx,xs:h,sm:h,md:h,lg:h,xl:h,xxl:h,className:r().string,cssModule:r().object,widths:r().array},p=function(e,t,a){return!0===a||""===a?e?"col":"col-".concat(t):"auto"===a?e?"col-auto":"col-".concat(t,"-auto"):e?"col-".concat(a):"col-".concat(t,"-").concat(a)};function b(e){var t=e.className,a=e.cssModule,l=e.widths,r=void 0===l?f:l,o=e.tag,v=void 0===o?"div":o,h=function(e,t){var a=e,n=[];return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:f).forEach(function(e,l){var r=a[e];if(delete a[e],r||""===r){var o=!l;if((0,s.Gv)(r)){var c,u=o?"-":"-".concat(e,"-"),d=p(o,e,r.size);n.push((0,s.qO)(i()((m(c={},d,r.size||""===r.size),m(c,"order".concat(u).concat(r.order),r.order||0===r.order),m(c,"offset".concat(u).concat(r.offset),r.offset||0===r.offset),c)),t))}else{var f=p(o,e,r);n.push(f)}}}),{colClasses:n,modifiedAttributes:a}}(d(e,c),a,r),x=h.modifiedAttributes,b=h.colClasses;b.length||b.push("col");var g=(0,s.qO)(i()(t,b),a);return n.createElement(v,u({},x,{className:g}))}b.propTypes=x,t.A=b}}]);
//# sourceMappingURL=521.d7701c93.chunk.js.map