"use strict";(self.webpackChunkTUSKER_AI=self.webpackChunkTUSKER_AI||[]).push([[824],{10334:function(e,t,n){n.d(t,{A:function(){return y}});var i=n(5544),s=n(27565),o=n(59635),a=n(60409),r=n(68854),l=n(36278),c=n(6585),u=n(3934),d=n(35540),m=n(35944),h=n(22945),p=n(65044),v=n(74702),f=n(7274),x=n(37165),g=n(30122),A=n(27929);var _=function(e){var t=e.currentFrameIndex,n=e.tableData,i=e.handleNext,s=e.handlePrev,o=e.videoUrl,a=e.isNextPrev;return(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"button-group",children:(0,A.jsx)("div",{className:"control-bar",style:{display:"flex",justifyContent:"end",gap:10,marginBottom:10},children:a&&(0,A.jsxs)("span",{className:"right-controls",style:{display:"flex",gap:10},children:[(0,A.jsx)(g.A,{variant:"outlined",onClick:s,disabled:0===t,title:"Previous",sx:{fontSize:"0.75rem"},children:"Prev"}),(0,A.jsx)(g.A,{variant:"outlined",onClick:i,disabled:t===n.length-1,title:"Next",sx:{fontSize:"0.75rem"},children:"Next"})]})})}),(0,A.jsx)("div",{className:"text-center",children:(0,A.jsxs)("video",{width:"100%",height:"auto",controls:!0,style:{maxHeight:"100vh",borderRadius:"0px"},children:[(0,A.jsx)("source",{src:o,type:"video/mp4"}),"Your browser does not support the video tag."]},t)})]})},j=void 0,y=(0,p.A)(function(e){return{card:{maxWidth:416,height:"100%",margin:"auto"},media:{height:230},header:{paddingBottom:"0rem"},learnMore:{position:"absolute",bottom:0},cardCol:{height:220,marginTop:25,marginBottom:15}}})(function(e){var t,n,p,g=e.tableDatas,y=e.showBarTableData,b=e.handleCloseModal,S=(0,s.useState)(null),C=(0,i.A)(S,2),w=C[0],N=C[1],L=(0,s.useState)([]),k=(0,i.A)(L,2),E=k[0],P=k[1],T=(0,s.useState)(0),R=(0,i.A)(T,2),F=R[0],U=R[1],O=(0,s.useState)(0),M=(0,i.A)(O,2),D=M[0],z=M[1],B=(0,s.useState)([]),I=(0,i.A)(B,2),W=I[0],H=I[1],K=(0,s.useState)("images"),Y=(0,i.A)(K,2),Z=Y[0],q=Y[1],Q=(0,v.d4)(function(e){var t,n,i,s=e.auth;return{userRole:(null===(t=s.user)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.length)&&(null===(i=s.user.roles[0])||void 0===i?void 0:i.role)}},v.bN).userRole;(0,s.useEffect)(function(){G()},[Q]);var G=function(){(0,h.if)(["-1"],Q).then(function(e){if(e&&e.isSuccess){var t=[];e.data.map(function(e,n){return t.push({label:e.camera_name,value:e.id}),null}),t.push({label:"All Camera",value:"-1"}),H(t)}else j.setState({blocking:!1}),console.log("Something went wrong")}).catch(function(e){e.detail&&console.log(e.detail)})};(0,s.useEffect)(function(){W&&($(),J())},[F,D,g,W]);var $=function(){N([{dataField:"camera_name",text:"Camera"},{dataField:"count",text:"Count"},{dataField:"date",text:"Date"},{dataField:"labels",text:"Labels",formatter:function(e){return e?e.split(",").map(function(e){return(0,f.F)(e.trim())}).join(", "):""}}])},J=function(){var e,t,n;if(g.length){var i="images"===Z?g[F]:g[D],s=[],o=W.find(function(e){return String(e.value)===(null===i||void 0===i?void 0:i.camera_id)}),a=(null===o||void 0===o?void 0:o.label)||"Unknown Camera",r=(null===i||void 0===i||null===(e=i.result)||void 0===e||null===(t=e.detection)||void 0===t?void 0:t.length)||0,l=m.utc(null===i||void 0===i||null===(n=i.frame_date)||void 0===n?void 0:n.$date).local().format("MMMM DD YYYY, h:mm:ss a"),c=Object.keys((null===i||void 0===i?void 0:i.counts)||{}).toString();s.push({camera_name:a,count:r,date:l,labels:c,notification_type:"tusker"}),P(s)}},X=(0,s.useCallback)(function(){U(function(e){return Math.min(e+1,g.length-1)})},[g.length]),V=(0,s.useCallback)(function(){U(function(e){return Math.max(e-1,0)})},[]),ee=(0,s.useCallback)(function(){z(function(e){return Math.min(e+1,g.length-1)})},[g.length]),te=(0,s.useCallback)(function(){z(function(e){return Math.max(e-1,0)})},[]),ne=(0,s.useCallback)(function(e){q(e)},[]);return(0,A.jsxs)(r.A,{size:"lg",show:y,onHide:b,dialogClassName:"result-modal",children:[(0,A.jsx)(r.A.Header,{closeButton:!0,children:(0,A.jsx)("h3",{children:"My Result Details"})}),(0,A.jsx)(r.A.Body,{children:(0,A.jsxs)(l.A,{activeKey:Z,onSelect:ne,id:"media-tabs",className:"mb-3",children:[(0,A.jsx)(c.A,{eventKey:"images",title:"Images",children:(0,A.jsxs)(A.Fragment,{children:[E.length>0?(0,A.jsx)(o.A,{bootstrap4:!0,keyField:"id",data:E,columns:w,bordered:!1,wrapperClasses:"table-responsive"}):(0,A.jsx)("p",{children:"No data available"}),(0,A.jsx)(x.A,{currentFrameIndex:F,tableData:g,handleNext:X,handlePrev:V,imageUrl:null===(t=g[F])||void 0===t?void 0:t.image_url,isNextPrev:!0})]})}),(0,A.jsxs)(c.A,{eventKey:"video",title:"Video",children:[E.length>0?(0,A.jsx)(o.A,{bootstrap4:!0,keyField:"id",data:E,columns:w,bordered:!1,wrapperClasses:"table-responsive"}):(0,A.jsx)("p",{children:"No data available"}),g&&null!==(n=g[D])&&void 0!==n&&n.video_url?(0,A.jsx)(_,{currentFrameIndex:D,tableData:g,handleNext:ee,handlePrev:te,videoUrl:null===(p=g[D])||void 0===p?void 0:p.video_url,isNextPrev:!0}):(0,A.jsx)("p",{className:"text-center",children:"No video available for this frame."})]})]})}),(0,A.jsx)(r.A.Footer,{children:(0,A.jsxs)(u.A,{className:"w-100",children:[(0,A.jsx)(d.A,{xs:6,children:(0,A.jsx)("span",{children:"images"===Z?(0,A.jsxs)(A.Fragment,{children:["Frame ",F+1," of ",g.length]}):(0,A.jsxs)(A.Fragment,{children:["Video ",D+1," of ",g.length]})})}),(0,A.jsx)(d.A,{xs:6,className:"text-right",children:(0,A.jsx)(a.A,{type:"button",onClick:b,className:"btn btn-secondary ml-2",children:"Cancel"})})]})})]})})},29991:function(e,t,n){n.d(t,{U:function(){return s}});n(27565);var i=n(27929);function s(e){var t=e.onChangeHandler,n=e.reference,s=e.className,o=e.placeholder;return(0,i.jsx)("div",{className:s+"col-xl-3",children:(0,i.jsx)("input",{type:"text",className:"form-control",name:"searchText",placeholder:o||"Search For Name",onChange:t,ref:n})})}},37165:function(e,t,n){var i=n(80045),s=n(27565),o=n(30122),a=n(83832),r=n(71744),l=n(50521),c=n.n(l),u=n(53493),d=n(27929),m=["zoomIn","zoomOut","resetTransform"];t.A=function(e){var t=e.currentFrameIndex,n=e.tableData,l=e.handleNext,h=e.handlePrev,p=e.imageUrl,v=e.isNextPrev,f=s.useRef(null);return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"button-group",children:(0,d.jsxs)("div",{className:"control-bar",style:{display:"flex",justifyContent:"space-between",gap:10,marginBottom:10},children:[(0,d.jsxs)("span",{className:"left-controls",children:[(0,d.jsx)(o.A,{variant:"outlined",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.zoomIn()},title:"Zoom In",sx:{fontSize:"0.75rem",minWidth:"32px"},children:"+"}),(0,d.jsx)(o.A,{variant:"outlined",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.zoomOut()},title:"Zoom Out",sx:{fontSize:"0.75rem",minWidth:"32px"},children:"-"}),(0,d.jsx)(o.A,{variant:"outlined",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.resetTransform()},title:"Reset",sx:{fontSize:"0.75rem"},children:"Reset"})]}),v&&(0,d.jsxs)("span",{className:"right-controls",style:{display:"flex",gap:10},children:[(0,d.jsx)(o.A,{variant:"outlined",onClick:h,disabled:0===t,title:"Previous",sx:{fontSize:"0.75rem"},children:"Prev"}),(0,d.jsx)(o.A,{variant:"outlined",onClick:l,disabled:t===n.length-1,title:"Next",sx:{fontSize:"0.75rem"},children:"Next"})]})]})}),(0,d.jsx)("div",{className:"image-container",children:(0,d.jsx)(a.GT,{defaultScale:1,defaultPositionX:200,defaultPositionY:100,children:function(e){var o,l,h=e.zoomIn,v=e.zoomOut,f=e.resetTransform;(0,i.A)(e,m);return(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)("div",{className:"tools text-right",style:{width:"100%",marginBottom:"4px"},children:(0,d.jsx)(r.A,{zoomIn:h,zoomOut:v,resetTransform:f,frameData:!0})}),(0,d.jsxs)("div",{className:"boundimage-full w-100",style:{margin:"0 auto"},children:[console.log("tableData",n[t]),(0,d.jsx)(a.WZ,{children:(0,d.jsx)(c(),{className:"row m-auto col-12 p-0 text-center",image:p,boxes:null===(o=n[t])||void 0===o||null===(l=o.result)||void 0===l?void 0:l.detection.map(function(e){return{coord:[e.location[0],e.location[1],e.location[2]-e.location[0],e.location[3]-e.location[1]],label:e.label}}),options:u.Wj})})]})]})}})})]})}},55072:function(e,t,n){n.d(t,{C1:function(){return g},TN:function(){return u},Yj:function(){return y},dr:function(){return f},i9:function(){return m},ir:function(){return S},kz:function(){return _},uU:function(){return p}});var i=n(91212),s=n(10467),o=n(1514),a=n(20457),r=n(95177),l="/get_enabled_locations_by_company_id",c="/get_current_company_enabled_locations";function u(e){return d.apply(this,arguments)}function d(){return(d=(0,s.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:t===r.NY?"/get_all_supervisor":"/get_current_company_supervisor",method:a.K.GET});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return(h=(0,s.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:"/get_all_companies",method:a.K.GET});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return(v=(0,s.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:t===r.NY?l+"?company_id=1":c,method:a.K.GET});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=(0,s.A)((0,i.A)().m(function e(t){var n;return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return n="",n=t===r.lc?c:t===r.Gm?"/get_supervisor_enabled_locations":l+"?company_id=1",e.n=1,(0,o.E)({endpoint:n,method:a.K.GET});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function g(e){return A.apply(this,arguments)}function A(){return(A=(0,s.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:"/add_supervisor",method:a.K.POST,body:t});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function _(e){return j.apply(this,arguments)}function j(){return(j=(0,s.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:"/update_supervisor_status?user_status="+t.user_status+"&user_id="+t.user_id,method:a.K.POST});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,s.A)((0,i.A)().m(function e(t,n){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:"/assign_locations?user_id="+n,method:a.K.POST,body:t.location_list});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function S(e,t){return C.apply(this,arguments)}function C(){return(C=(0,s.A)((0,i.A)().m(function e(t,n){return(0,i.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,o.E)({endpoint:"/remove_assigned_locations?user_id="+n,method:a.K.POST,body:t.location_list});case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}},84824:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var i=n(27565),s=n(5544),o=n(84702),a=n(53493),r=n(27929),l=(0,i.createContext)();function c(e){var t=e.children,n=(0,i.useState)(a.ZE),c=(0,s.A)(n,2),u=c[0],d=c[1],m=(0,i.useCallback)(function(e){d(function(t){return(0,o.isFunction)(e)&&(e=e(t)),(0,o.isEqual)(t,e)?t:e})},[]),h=(0,i.useMemo)(function(){return{queryParams:u,setQueryParams:m}},[u,m]);return(0,r.jsx)(l.Provider,{value:h,children:t})}var u=n(20737),d=n(85670),m=n(12682),h=n(63630),p=n(60112),v=n.n(p),f=n(87494),x=n(90053),g=n(90179),A=n(60409),_=n(55072),j=n(43519),y=n(87835),b=n(29991),S=n(99734),C=n(64467),w=n(89379),N=n(23029),L=n(92901),k=n(39874),E=n(85501),P=n(49075),T=n(93917),R=n(74702),F=n(21096),U=n(11549),O=n(2063),M=n(95177),D=n(68854),z={PASSWORD_REQUIREMENTS:"Password must be at least 8 characters and include a letter, number, and symbol",EMAIL_REQUIREMENTS:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},B=function(e){function t(e){var n;return(0,N.A)(this,t),(n=(0,k.A)(this,t,[e])).handleOnChange=function(e){var t=e.target,i=t.name,s=t.value;n.setState(function(e){return(0,C.A)((0,C.A)({},i,s),"errors",(0,w.A)((0,w.A)({},e.errors),{},(0,C.A)({},i,"")))})},n.handleBlur=function(e){var t=e.target,i=t.name,s=t.value,o=(0,w.A)({},n.state.errors);if("user_email"===i&&(null!==z&&void 0!==z&&z.EMAIL_REQUIREMENTS.test(s.trim())||(o.user_email="Please enter a valid email")),"user_password"===i){/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/.test(s)||(o.user_password=null===z||void 0===z?void 0:z.PASSWORD_REQUIREMENTS)}n.setState({errors:o})},n.handleCompanyChange=function(e){n.setState(function(t){return{selectedCompanies:e,errors:(0,w.A)((0,w.A)({},t.errors),{},{selectedCompanies:""})}})},n.addSupervisorToList=function(){var e=n.props,t=e.user,i=e.userRole,s=n.state,o=s.user_email,a=s.user_password,r=s.selectedCompanies,l={};null!==z&&void 0!==z&&z.EMAIL_REQUIREMENTS.test(o.trim())||(l.user_email="Please enter a valid email");if(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/.test(a)||(l.user_password=null===z||void 0===z?void 0:z.PASSWORD_REQUIREMENTS),i!==M.NY||r||(l.selectedCompanies="Please select at least one company"),Object.keys(l).length>0)n.setState({errors:l});else{var c={user_email:o,user_password:a,user_status:!0};i===M.NY&&(c.company_id=r.value),(0,_.C1)(c).then(function(e){if(null!==e&&void 0!==e&&e.isSuccess){n.props.toggleSupervisorModal();var i={notification_message:"Supervisor Added: ".concat(o),user_id:t.id,type_of_notification:"string",status:!0,is_unread:!0};(0,U.z8)(i).then(function(){(0,h.Zx)("Crate Supervisor Added Successful")}).catch(function(e){console.warn((null===e||void 0===e?void 0:e.detail)||"Notification error")})}}).catch(function(e){(0,h.Au)(null===e||void 0===e?void 0:e.detail),console.warn((null===e||void 0===e?void 0:e.detail)||"Something went wrong")})}},n.selectTheme=function(e){return(0,w.A)((0,w.A)({},e),{},{borderRadius:0,colors:(0,w.A)((0,w.A)({},e.colors),{},{primary25:"#5DBFC4",primary:"#147b82"})})},n.state={modalOpen:e.modalOpen,user_email:"",user_password:"",selectedCompanies:null,companyList:[],errors:{user_email:"",user_password:"",selectedCompanies:""}},n}return(0,E.A)(t,e),(0,L.A)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.userRole===M.NY&&(0,_.i9)().then(function(t){null!==t&&void 0!==t&&t.isSuccess&&Array.isArray(t.data)&&e.setState({companyList:t.data})}).catch(function(){console.warn("Failed to fetch companies")})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({modalOpen:e.modalOpen})}},{key:"render",value:function(){var e=this.state,t=e.user_email,n=e.user_password,s=e.selectedCompanies,o=e.companyList,a=e.errors,l=this.props.userRole,c=o.map(function(e){return{value:e.id,label:e.company_name}});return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(D.A,{backdrop:"static",size:"md",centered:!1,show:this.state.modalOpen,onHide:this.props.toggleSupervisorModal,"aria-labelledby":"example-modal-sizes-title-lg",children:[(0,r.jsx)(D.A.Header,{closeButton:!0,children:(0,r.jsx)(D.A.Title,{id:"example-modal-sizes-title-lg",children:"Add Supervisor"})}),(0,r.jsxs)(D.A.Body,{children:[l===M.NY&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.A,{className:"mt-2",for:"assign_company",children:"Assign Company *"}),(0,r.jsx)(O.default,{placeholder:"Assign Company",value:s,onChange:this.handleCompanyChange,options:c,className:a.selectedCompanies?"is-invalid":"",theme:this.selectTheme}),a.selectedCompanies&&(0,r.jsx)("div",{className:"text-danger mt-1",children:a.selectedCompanies})]}),(0,r.jsx)(P.A,{for:"email",className:"mt-3",children:"Email *"}),(0,r.jsx)(T.A,{type:"email",name:"user_email",value:t,onChange:this.handleOnChange,onBlur:this.handleBlur,invalid:!!a.user_email}),a.user_email&&(0,r.jsx)("div",{className:"text-danger mt-1",children:a.user_email}),(0,r.jsx)(P.A,{for:"password",className:"mt-2",children:"Password *"}),(0,r.jsx)(T.A,{type:"password",name:"user_password",value:n,onChange:this.handleOnChange,onBlur:this.handleBlur,invalid:!!a.user_password}),a.user_password&&(0,r.jsx)("div",{className:"text-danger mt-1",children:a.user_password})]}),(0,r.jsx)(D.A.Footer,{children:(0,r.jsx)(x.A,{className:"m-0",style:{width:"100%"},children:(0,r.jsx)(g.A,{className:"p-0",xl:12,children:(0,r.jsxs)("div",{style:{width:"100%",textAlign:"end"},children:[(0,r.jsx)(A.A,{onClick:this.props.toggleSupervisorModal,color:"secondary",children:"Cancel"}),(0,r.jsx)(A.A,{onClick:this.addSupervisorToList,color:"primary",className:"ml-3",children:"Add Supervisor"})]})})})})]})})}}])}(i.Component);var I=(0,R.Ng)(function(e){var t,n,i,s=e.auth;return{user:s.user,userRole:null===(t=s.user)||void 0===t||null===(n=t.roles)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.role}},F.o1)(B),W=n(24765),H=n(65971),K=n.n(H),Y=function(e){function t(e){var n;return(0,N.A)(this,t),(n=(0,k.A)(this,t,[e])).getCurrentUserLocationList=function(){var e=n.state.user_selected_location;if(e&&e.length>0){var t,i=[],s=(0,W.A)(e);try{for(s.s();!(t=s.n()).done;){var o=t.value;i.push(o.value)}}catch(a){s.e(a)}finally{s.f()}n.setState({selectedLocation:e,selectedLocationList:i})}else n.setState({selectedLocation:[],selectedLocationList:[]})},n.populateLocationList=function(){var e,t;(0,_.uU)(n.props.userRole,null===(e=n.props.selectedUser)||void 0===e||null===(t=e.company)||void 0===t?void 0:t.id).then(function(e){if(e&&e.data){var t=n.generateOptions(e.data);n.setState({locationOptions:t})}})},n.handleLocationChange=function(e){var t=n.getLocationDifference(e);if(t.length){var i=t[0],s={location_list:[i.value]},o=n.props,a=o.user,r=o.selectedUserLocation;n.setState({selectedLocation:e}),r.includes(i)?(n.setState({blocking:!0}),(0,_.ir)(s,n.state.specific_user_id).then(function(t){n.setState({blocking:!1}),null!==t&&void 0!==t&&t.isSuccess?(n.updateSelectedLocations(e),n.sendLocationDeletedNotification(a,i.label)):(0,h.Au)("Something went wrong")}).catch(function(e){n.setState({blocking:!1}),(0,h.Au)((null===e||void 0===e?void 0:e.detail)||"Something went Wrong")})):n.updateSelectedLocations(e)}else n.updateSelectedLocations(e)},n.getLocationDifference=function(e){var t;return(null===(t=n.state.selectedLocation)||void 0===t?void 0:t.filter(function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))||[]},n.updateSelectedLocations=function(e){var t=(null===e||void 0===e?void 0:e.map(function(e){return e.value}))||[];n.setState({selectedLocation:e,selectedLocationList:t})},n.sendLocationDeletedNotification=function(e,t){var n={notification_message:"Assign Location Deleted: ".concat(t),user_id:e.id,type_of_notification:"string",status:!0,is_unread:!0};(0,U.z8)(n).then(function(e){null!==e&&void 0!==e&&e.isSuccess&&(0,h.Zx)("Assign Location Deleted Successful")})},n.assignLocation=function(){var e={location_list:n.state.selectedLocationList};n.state.selectedLocationList&&n.state.selectedLocationList.length>0?(0,_.Yj)(e,n.state.specific_user_id).then(function(e){var t=n.props.user;if(e&&e.isSuccess){n.props.blockAddSupervisor(),n.props.toggleLocationModal();var i={notification_message:" Assign Location Added: "+n.state.selectedLocation.map(function(e){return e.label}).join(" "),user_id:t.id,type_of_notification:"string",status:!0,is_unread:!0};(0,U.z8)(i).then(function(e){e&&e.isSuccess&&(0,h.Zx)("Assign Location Added Successful")})}else(0,h.Au)("Something went wrong")}):(0,h.Au)("Please fill required fields")},n.generateOptions=function(e){var t,n=[],i=(0,W.A)(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;n.push({value:s.id,label:s.location_name})}}catch(o){i.e(o)}finally{i.f()}return n},n.selectTheme=function(e){return(0,w.A)((0,w.A)({},e),{},{borderRadius:0,colors:(0,w.A)((0,w.A)({},e.colors),{},{primary25:"#5DBFC4",primary:"#147b82"})})},n.state={modalOpen:e.modalOpen,specific_user_id:e.specific_user_id,locationOptions:[],selectedLocationList:[],user_id:e.selectedUser.id,user_email:e.selectedUser.email,user_selected_location:e.selectedUserLocation,selectedLocation:[],blocking:!1},n}return(0,E.A)(t,e),(0,L.A)(t,[{key:"componentDidMount",value:function(){this.populateLocationList()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){this.setState({modalOpen:e.modalOpen,user_id:e.selectedUser.id,specific_user_id:e.specific_user_id,user_email:e.selectedUser.email,user_selected_location:e.selectedUserLocation}),e.modalOpen&&this.getCurrentUserLocationList()}},{key:"render",value:function(){var e=this.state,t=e.locationOptions,n=e.selectedLocation,s=e.user_email;return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(D.A,{backdrop:"static",size:"md",centered:!1,show:this.state.modalOpen,onHide:this.props.toogleSupervisorModal,"aria-labelledby":"example-modal-sizes-title-lg",children:(0,r.jsxs)(K(),{tag:"div",blocking:this.state.blocking,color:"#147b82",children:[(0,r.jsx)(D.A.Header,{closeButton:!0,children:(0,r.jsx)(D.A.Title,{id:"example-modal-sizes-title-lg",children:"Assign Location"})}),(0,r.jsxs)(D.A.Body,{children:[(0,r.jsx)(P.A,{for:"user_email",children:"User Email"}),(0,r.jsx)(T.A,{disabled:!0,type:"user_email",value:s,name:"user_email"}),(0,r.jsx)(P.A,{className:"mt-2",for:"assign_location",children:"Assign Location *"}),(0,r.jsx)(O.default,{theme:this.selectTheme,isMulti:!0,placeholder:"Assign Location",value:n,onChange:this.handleLocationChange,options:t})]}),(0,r.jsx)(D.A.Footer,{children:(0,r.jsx)(x.A,{className:"m-0",style:{width:"100%"},children:(0,r.jsx)(g.A,{className:"p-0",xl:12,children:(0,r.jsxs)("div",{style:{width:"100%",textAlign:"end"},children:[(0,r.jsx)(A.A,{color:"secondary",onClick:this.props.toggleLocationModal,className:"mr-2",children:"Cancel"}),(0,r.jsx)(A.A,{color:"primary",onClick:this.assignLocation,children:"Assign Location"})]})})})})]})})})}}])}(i.Component);var Z=(0,R.Ng)(function(e){return{user:e.auth.user}},F.o1)(Y),q=n(10782),Q=n(10334),G=n(13025),$=function(e){var t,n=e.cellContent,s=e.row,o=e.setShowAlert1,a=(0,i.useCallback)(function(){o(n,s)},[n,s,o]);return(0,r.jsx)(G.A,{checked:null===(t=n[0])||void 0===t?void 0:t.user_status,onChange:a,color:"primary"})};function J(e,t){return function(n,i){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{title:"Assign locations",className:"btn btn-icon btn-light btn-hover-primary btn-sm mx-3",onClick:function(){return e(n,i)},children:(0,r.jsx)("span",{className:"svg-icon svg-icon-md svg-icon-primary",children:(0,r.jsx)(j.A,{title:"Assign locations",src:(0,d.oK)("/media/svg/icons/Communication/Write.svg")})})}),(0,r.jsx)($,{cellContent:n,row:i,setShowAlert1:t})]})}}function X(){var e,t,n=(0,R.wA)(),o=(0,i.useContext)(l),a=(0,i.useMemo)(function(){return o},[o]),c=(0,i.useState)(!1),p=(0,s.A)(c,2),j=p[0],C=p[1],w=(0,i.useState)(!1),N=(0,s.A)(w,2),L=N[0],k=N[1],E=(0,i.useState)([]),P=(0,s.A)(E,2),T=P[0],F=P[1],U=(0,i.useState)(!1),O=(0,s.A)(U,2),M=O[0],D=O[1],z=(0,i.useState)(""),B=(0,s.A)(z,2),W=B[0],H=B[1],Y=(0,i.useState)(""),G=(0,s.A)(Y,2),$=G[0],X=G[1],V=(0,i.useState)(!1),ee=(0,s.A)(V,2),te=ee[0],ne=ee[1],ie=(0,i.useState)(""),se=(0,s.A)(ie,2),oe=se[0],ae=se[1],re=(0,i.useState)(!1),le=(0,s.A)(re,2),ce=le[0],ue=le[1],de=(0,i.useState)([]),me=(0,s.A)(de,2),he=me[0],pe=me[1],ve=(0,i.useState)(null),fe=(0,s.A)(ve,2),xe=fe[0],ge=fe[1],Ae=(0,i.useState)([]),_e=(0,s.A)(Ae,2),je=_e[0],ye=_e[1],be=(0,i.useState)([]),Se=(0,s.A)(be,2),Ce=Se[0],we=Se[1],Ne=(0,R.d4)(function(e){var t=e.auth,n=e.location;return{user:t.user,popupData:null===n||void 0===n?void 0:n.popupData}},R.bN),Le=Ne.user,ke=Ne.popupData,Ee=(0,i.useCallback)(function(){return ne(!0)},[]),Pe=(0,i.useCallback)(function(){return k(!L)},[]),Te=function(){return D(!M)},Re=(0,i.useCallback)(function(){return ue(!1)},[]),Fe=(0,i.useCallback)(function(e,t){ue(!0),pe(e),ge(t)},[]),Ue=(0,i.useCallback)(function(){n(q.Uc()),C(!1)},[]),Oe=function(){var e,t=[{dataField:"id",text:"INDEX",sort:!0,sortCaret:d.iA,headerSortingClasses:d.UJ},{dataField:"email",text:"Email",sort:!0,sortCaret:d.iA,headerSortingClasses:d.UJ},{dataField:"locations",text:"Locations",sort:!0,sortCaret:d.iA,headerSortingClasses:d.UJ,formatter:function(e,t){return null!==t&&void 0!==t&&t.locations?null===t||void 0===t?void 0:t.locations:"-"}},{dataField:"assignlocation",text:"Actions",style:{minWidth:"150px"},formatter:J(Me,Fe)}];Ee(),!M&&(0,_.TN)(null===Le||void 0===Le||null===(e=Le.roles[0])||void 0===e?void 0:e.role).then(function(e){if(null!==e&&void 0!==e&&e.isSuccess){var n=e.data.map(function(e,t){var n,i,s=(null===(n=e.locations)||void 0===n?void 0:n.map(function(e){return e.location_name}))||[],o=(null===(i=e.locations)||void 0===i?void 0:i.map(function(e){return{label:e.location_name,value:e.id}}))||[];return{id:t+1,email:e.user_email,company:null===e||void 0===e?void 0:e.company,locations:s.toString(),assignlocation:[{user_status:e.user_status,location:o,id:e.id}]}});F(t),ye(n),we(n)}else(0,h.Au)("Something went wrong")}).catch(function(e){return(0,h.Au)((null===e||void 0===e?void 0:e.detail)||"Something went Wrong")}).finally(function(){return ne(!1)})},Me=function(e,t){H(t),ae(e[0].id),X(e[0].location),setTimeout(function(){return Te()},500)},De=(0,i.useRef)(""),ze=(0,i.useCallback)(function(e){var t,n=((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||De.current.value||"").trim();(0,d.GI)(je,n,["id","email"],a.queryParams,we)},[je,a.queryParams,we]);(0,i.useEffect)(function(){Oe()},[a.queryParams,L,M]),(0,i.useEffect)(function(){ke.length>0?C(!0):C(!1)},[ke]),(0,i.useEffect)(function(){ze()},[]);var Be=(0,d.J$)(Ce||je,a.queryParams),Ie=i.useCallback(function(){!function(e){var t={user_status:!e[0].user_status,user_id:e[0].id};Ee(),(0,_.kz)(t).then(function(e){if(null===e||void 0===e||!e.isSuccess)return(0,h.Au)("Something went wrong");Oe()}).catch(function(e){return(0,h.Au)((null===e||void 0===e?void 0:e.detail)||"Something went Wrong")}).finally(function(){return Re()})}(he)},[he,xe]);return(0,r.jsxs)(f.A,{className:"p-0",fluid:!0,children:[(0,r.jsx)(m.Zp,{className:"example example-compact",style:{minHeight:"300px"},children:(0,r.jsxs)(m.bw,{style:{minHeight:"300px",padding:"10px 10px"},children:[(0,r.jsxs)(x.A,{className:"align-items-center",children:[(0,r.jsx)(g.A,{xs:12,sm:12,md:6,lg:6,xl:6,className:"mb-2 mb-md-0",children:(0,r.jsx)(S.A,{title:"Supervisor Details"})}),(0,r.jsxs)(g.A,{xs:12,sm:12,md:6,lg:6,xl:6,className:"d-flex justify-content-end align-items-center gap-2 flex-wrap",children:[(0,r.jsx)("div",{className:"mr-1",children:(0,r.jsx)(b.U,{reference:De,onChangeHandler:ze,placeholder:"Search For Email"})}),(0,r.jsx)(A.A,{color:"primary",onClick:Pe,children:"Add Supervisor"})]})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(x.A,{children:[(0,r.jsx)(g.A,{xl:12,style:{padding:"10px 20px",minWidth:"300px"},children:(null===Be||void 0===Be?void 0:Be.length)>0?(0,r.jsx)(u.gx,{pagination:(0,u.Ay)((0,d.lh)(Ce.length,a.queryParams)),children:function(e){var t=e.paginationProps,n=e.paginationTableProps;return(0,r.jsx)(m.dK,{paginationProps:t,children:(0,r.jsx)("div",{style:{flex:1,height:"calc(100vh - 368px)",overflowX:"auto"},children:(0,r.jsx)(K(),{tag:"div",blocking:te,color:"#147b82",children:(0,r.jsx)(y.a,{columns:T,items:Be,tableChangeHandler:a.setQueryParams,paginationTableProps:n})})})})}}):(0,r.jsx)("div",{style:{minHeight:"calc(100vh - 365px)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("h3",{className:"text-center mb-0",children:"No Data Found"})})}),M&&(0,r.jsx)(Z,{specific_user_id:oe,blockAddSupervisor:Ee,selectedUserLocation:$,selectedUser:W,toggleLocationModal:Te,modalOpen:M,userRole:null===Le||void 0===Le||null===(e=Le.roles[0])||void 0===e?void 0:e.role})]})]})}),(0,r.jsx)(v(),{showCancel:!0,showConfirm:!0,confirmBtnText:"Confirm",confirmBtnBsStyle:"primary",cancelBtnBsStyle:"light",cancelBtnStyle:{color:"black"},title:"Are you sure ?",onConfirm:Ie,onCancel:Re,show:ce,focusCancelBtn:!0}),L&&(0,r.jsx)(I,{blockAddSupervisor:Ee,modalOpen:L,toggleSupervisorModal:Pe,userRole:null===Le||void 0===Le||null===(t=Le.roles[0])||void 0===t?void 0:t.role}),j&&(0,r.jsx)(Q.A,{showBarTableData:j,tableDatas:ke,handleCloseModal:Ue})]})}function V(){return(0,r.jsx)(c,{children:(0,r.jsx)(X,{})})}function ee(){return(0,r.jsx)(V,{})}},87835:function(e,t,n){n.d(t,{a:function(){return l}});var i=n(89379),s=n(53493),o=n(85670),a=n(59635),r=(n(27565),n(27929)),l=function(e){var t,n,l,c,u=e.items,d=e.columns,m=e.tableChangeHandler,h=e.paginationTableProps,p=e.selectRow,v=(((null===h||void 0===h||null===(t=h.pagination)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.page)||1)-1)*((null===h||void 0===h||null===(l=h.pagination)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.sizePerPage)||(null===u||void 0===u?void 0:u.length)||10)+1,f=!!h;return(0,r.jsxs)(a.A,(0,i.A)((0,i.A)({wrapperClasses:"table-responsive",bordered:!1,classes:"table employeeTable table-head-custom table-vertical-center table-horizontal-center overflow-hidden",bootstrap4:!0,remote:f,keyField:"id",data:(null===u||void 0===u?void 0:u.map(function(e,t){return(0,i.A)((0,i.A)({},e),{},{idx:v+t})}))||[],columns:d,defaultSorted:s.Nz,onTableChange:f?(0,o.Tq)(m):void 0,hideSelectColumn:!0},h||{}),{},{selectRow:p,children:[(0,r.jsx)(o.Hd,{entities:u}),(0,r.jsx)(o.Rt,{entities:u})]}))}}}]);
//# sourceMappingURL=824.c57c487a.chunk.js.map