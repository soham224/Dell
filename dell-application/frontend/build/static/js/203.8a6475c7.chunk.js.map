{"version":3,"file":"static/js/203.8a6475c7.chunk.js","mappings":"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","sources":["../node_modules/react-intl/lib/src/components/message.js","../node_modules/react-intl/lib/src/components/useIntl.js","app/Admin/modules/Auth/pages/Login.js"],"sourcesContent":["/*\n * Copyright 2015, Yahoo Inc.\n * Copyrights licensed under the New BSD License.\n * See the accompanying LICENSE file for terms.\n */\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { shallowEqual } from '../utils';\nimport useIntl from './useIntl';\nfunction areEqual(prevProps, nextProps) {\n    var values = prevProps.values, otherProps = __rest(prevProps, [\"values\"]);\n    var nextValues = nextProps.values, nextOtherProps = __rest(nextProps, [\"values\"]);\n    return (shallowEqual(nextValues, values) &&\n        shallowEqual(otherProps, nextOtherProps));\n}\nfunction FormattedMessage(props) {\n    var intl = useIntl();\n    var formatMessage = intl.formatMessage, _a = intl.textComponent, Text = _a === void 0 ? React.Fragment : _a;\n    var id = props.id, description = props.description, defaultMessage = props.defaultMessage, values = props.values, children = props.children, _b = props.tagName, Component = _b === void 0 ? Text : _b, ignoreTag = props.ignoreTag;\n    var descriptor = { id: id, description: description, defaultMessage: defaultMessage };\n    var nodes = formatMessage(descriptor, values, {\n        ignoreTag: ignoreTag,\n    });\n    if (typeof children === 'function') {\n        return children(Array.isArray(nodes) ? nodes : [nodes]);\n    }\n    if (Component) {\n        return React.createElement(Component, null, nodes);\n    }\n    return React.createElement(React.Fragment, null, nodes);\n}\nFormattedMessage.displayName = 'FormattedMessage';\nvar MemoizedFormattedMessage = React.memo(FormattedMessage, areEqual);\nMemoizedFormattedMessage.displayName = 'MemoizedFormattedMessage';\nexport default MemoizedFormattedMessage;\n","import * as React from 'react';\nimport { invariantIntlContext } from '../utils';\nimport { Context } from './injectIntl';\nexport default function useIntl() {\n    var intl = React.useContext(Context);\n    invariantIntlContext(intl);\n    return intl;\n}\n","import React, { useState } from \"react\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport Cookies from \"universal-cookie\";\nimport * as auth from \"../_redux/authRedux\";\nimport { getCurrentUser, login } from \"../_redux/authCrud\";\nimport { warningToast  ,successToast} from \"../../../../../utils/ToastMessage\";\nimport {\n  ADMIN_ROLE,\n  SUPER_ADMIN_ROLE,\n  SUPERVISOR_ROLE\n} from \"../../../../../enums/constant\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst initialValues = {\n  email: \"\",\n  password: \"\"\n};\n\nfunction Login(props) {\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { intl } = props;\n  const [loading, setLoading] = useState(false);\n\n  const LoginSchema = Yup.object().shape({\n    email: Yup.string()\n      .email(\"Wrong email format\")\n      .min(3, \"Minimum 3 symbols\")\n      .max(50, \"Maximum 50 symbols\")\n      .required(\n        intl.formatMessage({\n          id: \"AUTH.VALIDATION.REQUIRED_FIELD\"\n        })\n      ),\n    password: Yup.string()\n      .min(3, \"Minimum 3 symbols\")\n      .max(50, \"Maximum 50 symbols\")\n      .required(\n        intl.formatMessage({\n          id: \"AUTH.VALIDATION.REQUIRED_FIELD\"\n        })\n      )\n  });\n\n  const enableLoading = () => {\n    setLoading(true);\n  };\n\n  const disableLoading = () => {\n    setLoading(false);\n  };\n\n  const getInputClasses = fieldName => {\n    if (formik.touched[fieldName] && formik.errors[fieldName]) {\n      return \"is-invalid\";\n    }\n\n    if (formik.touched[fieldName] && !formik.errors[fieldName]) {\n      return \"is-valid\";\n    }\n\n    return \"\";\n  };\n\n  const verifyTokenAndSetUser = () => {\n    getCurrentUser()\n        .then(response => {\n          const { data, isSuccess, failureStatus } = response;\n\n          if (!isSuccess || !data) {\n            if (failureStatus) {\n              warningToast(\"Something went wrong\");\n            }\n            return;\n          }\n\n          if (!data.user_status) {\n            warningToast(\"This Account has been deactivated\");\n            return;\n          }\n\n          dispatch(props.setUser(data));\n\n          const userRole = data.roles?.[0]?.role;\n          if (isAdminRole(userRole)) {\n            navigate('/admin/dashboard', { replace: true });\n          } else {\n            navigate('/violation');\n          }\n        })\n        .catch(error => {\n          warningToast(error?.detail || \"Something went Wrong\");\n        });\n  };\n\n\n  const setTokenCookies = async (token, tokenType) => {\n    const cookies = new Cookies();\n    cookies.set(\"access_token\", token, { httpOnly: false, path: \"/\" });\n    cookies.set(\"token_type\", tokenType, { httpOnly: false, path: \"/\" });\n    verifyTokenAndSetUser();\n  };\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema: LoginSchema,\n    onSubmit: (values, { setStatus, setSubmitting }) => {\n      enableLoading();\n      const authData = new FormData();\n      authData.append(\"username\", values.email);\n      authData.append(\"password\", values.password);\n      login(authData)\n        .then(response => {\n          let { access_token, token_type } = response.data;\n          setTokenCookies(access_token, token_type);\n          disableLoading();\n        })\n        .catch(err => {\n          if (err.detail === \"Inactive user\") {\n            successToast(\"ask admin to enable the user\");\n            disableLoading();\n            setSubmitting(false);\n            setStatus();\n          } else {\n            disableLoading();\n            setSubmitting(false);\n            setStatus(\n              intl.formatMessage({\n                id: \"AUTH.VALIDATION.INVALID_LOGIN\"\n              })\n            );\n            if (err.detail) {\n              warningToast(err.detail);\n            } else {\n              warningToast(\"Something went Wrong\");\n            }\n          }\n        });\n    }\n  });\n\n  return (\n    <div className=\"login-form login-signin\" id=\"kt_login_signin_form\">\n      {/* begin::Head */}\n      <div className=\"text-center mb-10 mb-lg-20\">\n        <h3 className=\"font-size-h1\">\n          <FormattedMessage id=\"AUTH.LOGIN.TITLE\" />\n        </h3>\n        <p className=\"text-muted font-weight-bold\">\n          Enter your username and password\n        </p>\n      </div>\n      {/* end::Head */}\n\n      {/*begin::Form*/}\n      <form\n        onSubmit={formik.handleSubmit}\n        className=\"form fv-plugins-bootstrap fv-plugins-framework\"\n      >\n        {formik.status ? (\n          <div className=\"mb-10 alert alert-custom alert-light-danger alert-dismissible\">\n            <div className=\"alert-text font-weight-bold\">{formik.status}</div>\n          </div>\n        ) : null}\n\n        <div className=\"form-group fv-plugins-icon-container\">\n          <input\n            placeholder=\"Email\"\n            type=\"email\"\n            className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\n              \"email\"\n            )}`}\n            name=\"email\"\n            {...formik.getFieldProps(\"email\")}\n          />\n          {formik.touched.email && formik.errors.email ? (\n            <div className=\"fv-plugins-message-container\">\n              <div className=\"fv-help-block\">{formik.errors.email}</div>\n            </div>\n          ) : null}\n        </div>\n        <div className=\"form-group fv-plugins-icon-container\">\n          <input\n            autoComplete=\"on\"\n            placeholder=\"Password\"\n            type=\"password\"\n            className={`form-control form-control-solid h-auto py-5 px-6 ${getInputClasses(\n              \"password\"\n            )}`}\n            name=\"password\"\n            {...formik.getFieldProps(\"password\")}\n          />\n          {formik.touched.password && formik.errors.password ? (\n            <div className=\"fv-plugins-message-container\">\n              <div className=\"fv-help-block\">{formik.errors.password}</div>\n            </div>\n          ) : null}\n        </div>\n        <div className=\"form-group d-flex flex-wrap justify-content-between align-items-center\">\n          <button\n            id=\"kt_login_signin_submit\"\n            type=\"submit\"\n            disabled={formik.isSubmitting}\n            className={`btn btn-primary font-weight-bold px-9 py-4 my-3`}\n          >\n            <span>Sign In</span>\n            {loading && <span className=\"ml-3 spinner spinner-white\"></span>}\n          </button>\n        </div>\n      </form>\n      {/*end::Form*/}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  const { auth } = state;\n  return { user: auth.user };\n}\n\nexport default injectIntl(connect(mapStateToProps, auth.actions)(Login));\n\n\n\n// Helper function\nconst isAdminRole = (role) =>\n    [ADMIN_ROLE, SUPERVISOR_ROLE, SUPER_ADMIN_ROLE].includes(role);\n"],"names":["FormattedMessage","props","intl","React","Context","invariantIntlContext","useIntl","formatMessage","_a","textComponent","Text","id","description","defaultMessage","values","children","_b","tagName","Component","nodes","ignoreTag","Array","isArray","displayName","MemoizedFormattedMessage","prevProps","nextProps","otherProps","__rest","nextValues","nextOtherProps","shallowEqual","initialValues","email","password","injectIntl","connect","state","user","auth","navigate","useNavigate","dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","loading","setLoading","LoginSchema","Yup","shape","min","max","required","disableLoading","getInputClasses","fieldName","formik","touched","errors","verifyTokenAndSetUser","getCurrentUser","then","response","_data$roles","_data$roles$","data","isSuccess","failureStatus","user_status","setUser","userRole","roles","role","isAdminRole","replace","warningToast","catch","error","detail","setTokenCookies","_ref","_asyncToGenerator","_regenerator","m","_callee","token","tokenType","cookies","w","_context","n","Cookies","set","httpOnly","path","a","_x","_x2","apply","arguments","useFormik","validationSchema","onSubmit","_ref2","setStatus","setSubmitting","authData","FormData","append","login","_response$data","access_token","token_type","err","successToast","_jsxs","className","_jsx","handleSubmit","status","_objectSpread","placeholder","type","concat","name","getFieldProps","autoComplete","disabled","isSubmitting","ADMIN_ROLE","SUPERVISOR_ROLE","SUPER_ADMIN_ROLE","includes"],"sourceRoot":""}