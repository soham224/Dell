2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 15:42:32 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 15:42:32 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.25, MODEL_IOU=0.45
2025-11-04 15:42:32 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 15:42:32 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 15:42:34 - [    INFO] - ppe_detection - my_utils.py:26 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x70509618db80>
2025-11-04 15:42:34 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 15:42:34 - [    INFO] - ppe_detection - my_utils.py:136 - load_model() - Load Model
2025-11-04 15:42:34 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:11:00', 'camera_id': 1}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251079_frame.jpg
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251079_frame.jpg
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:42:34 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251079_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251079_frame.jpg
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251079_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251079_frame.jpg
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:11:00', 'camera_id': 2}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251080_frame.jpg
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251080_frame.jpg
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:42:34 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251080_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251080_frame.jpg
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:42:34 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251080_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251080_frame.jpg
2025-11-04 15:42:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:11:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:42:34 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:12:00', 'camera_id': 1}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:43:04 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:12:00', 'camera_id': 2}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:43:04 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:43:04 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:43:04 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:12:00', 'camera_id': 1}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:43:34 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251080_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251080_frame.jpg
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:12:00', 'camera_id': 2}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:43:34 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:43:34 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:43:34 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251081_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251081_frame.jpg
2025-11-04 15:43:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:12:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:43:35 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 1}
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:44:05 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:44:05 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.25
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:44:05 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 5.0963 seconds
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:44:10 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 85, 448, 113], Conf: 0.67
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [305, 81, 344, 130], Conf: 0.46
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 342, 80], Conf: 0.39
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [429, 112, 457, 142], Conf: 0.34
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [449, 137, 477, 169], Conf: 0.32
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [133, 56, 152, 83], Conf: 0.32
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [427, 137, 462, 177], Conf: 0.27
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 85, 448, 113]}, {'label': 'no_vest', 'location': [305, 81, 344, 130]}, {'label': 'hardhat', 'location': [317, 53, 342, 80]}, {'label': 'no_vest', 'location': [429, 112, 457, 142]}, {'label': 'no_hardhat', 'location': [449, 137, 477, 169]}, {'label': 'hardhat', 'location': [133, 56, 152, 83]}, {'label': 'no_vest', 'location': [427, 137, 462, 177]}], 'inference_time': 5.096346378326416}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 85, 448, 113]}, {'label': 'no_vest', 'location': [305, 81, 344, 130]}, {'label': 'hardhat', 'location': [317, 53, 342, 80]}, {'label': 'no_vest', 'location': [429, 112, 457, 142]}, {'label': 'no_hardhat', 'location': [449, 137, 477, 169]}, {'label': 'hardhat', 'location': [133, 56, 152, 83]}, {'label': 'no_vest', 'location': [427, 137, 462, 177]}], 'inference_time': 5.096346378326416}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=7 after=5
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:282 - <module>() - Saved visualization image: ppe_outputs/1762251081_frame.jpg
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251081_frame.jpg', 'image_size': 640}
2025-11-04 15:44:10 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251081_frame.jpg"}
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:352 - <module>() - Calling DELETE_SOURCE_IMAGE_URL API with: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg'}
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Delete API :: http://192.168.11.97:8000/delete_image
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:368 - <module>() - Source image deleted successfully | status=404 url=http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 2}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:44:10 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:44:10 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.25
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:44:10 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 2.0222 seconds
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:44:12 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [277, 187, 318, 254], Conf: 0.73
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 91, 357, 117], Conf: 0.66
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [356, 266, 420, 354], Conf: 0.65
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [288, 144, 313, 182], Conf: 0.65
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 94, 311, 125], Conf: 0.63
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [384, 215, 418, 267], Conf: 0.58
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [336, 209, 378, 261], Conf: 0.45
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [277, 187, 318, 254]}, {'label': 'no_hardhat', 'location': [338, 91, 357, 117]}, {'label': 'no_vest', 'location': [356, 266, 420, 354]}, {'label': 'no_hardhat', 'location': [288, 144, 313, 182]}, {'label': 'no_hardhat', 'location': [289, 94, 311, 125]}, {'label': 'no_hardhat', 'location': [384, 215, 418, 267]}, {'label': 'no_vest', 'location': [336, 209, 378, 261]}], 'inference_time': 2.022195816040039}
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [277, 187, 318, 254]}, {'label': 'no_hardhat', 'location': [338, 91, 357, 117]}, {'label': 'no_vest', 'location': [356, 266, 420, 354]}, {'label': 'no_hardhat', 'location': [288, 144, 313, 182]}, {'label': 'no_hardhat', 'location': [289, 94, 311, 125]}, {'label': 'no_hardhat', 'location': [384, 215, 418, 267]}, {'label': 'no_vest', 'location': [336, 209, 378, 261]}], 'inference_time': 2.022195816040039}
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=7 after=7
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:282 - <module>() - Saved visualization image: ppe_outputs/1762251082_frame.jpg
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251082_frame.jpg', 'image_size': 640}
2025-11-04 15:44:12 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251082_frame.jpg"}
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:352 - <module>() - Calling DELETE_SOURCE_IMAGE_URL API with: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg'}
2025-11-04 15:44:12 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Delete API :: http://192.168.11.97:8000/delete_image
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:368 - <module>() - Source image deleted successfully | status=404 url=http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:44:12 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 15:44:24 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 15:44:24 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.25, MODEL_IOU=0.45
2025-11-04 15:44:24 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 15:44:24 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 15:44:25 - [    INFO] - ppe_detection - my_utils.py:26 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x7d5a5eb68b80>
2025-11-04 15:44:25 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 15:44:25 - [    INFO] - ppe_detection - my_utils.py:136 - load_model() - Load Model
2025-11-04 15:44:25 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 1}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:44:25 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 2}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:44:25 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:44:25 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:44:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:44:55 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 1}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:44:56 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251081_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251081_frame.jpg
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:13:00', 'camera_id': 2}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:44:56 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:44:56 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251082_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251082_frame.jpg
2025-11-04 15:44:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:13:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:44:56 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:14:00', 'camera_id': 1}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:45:26 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:14:00', 'camera_id': 2}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:45:26 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:45:26 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:45:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:14:00', 'camera_id': 1}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:45:56 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251082_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251082_frame.jpg
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:14:00', 'camera_id': 2}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:45:56 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:45:56 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251083_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251083_frame.jpg
2025-11-04 15:45:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:14:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:45:56 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 30 Seconds
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 15:46:56 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 15:46:56 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.5, MODEL_IOU=0.45
2025-11-04 15:46:56 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 15:46:56 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 15:46:57 - [    INFO] - ppe_detection - my_utils.py:26 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x7eb17f366f40>
2025-11-04 15:46:57 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 15:46:57 - [    INFO] - ppe_detection - my_utils.py:136 - load_model() - Load Model
2025-11-04 15:46:57 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:15:00', 'camera_id': 1}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251083_frame.jpg
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251083_frame.jpg
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:46:57 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1817 seconds
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:46:57 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [428, 83, 449, 113], Conf: 0.72
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [301, 80, 343, 138], Conf: 0.56
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [428, 83, 449, 113]}, {'label': 'no_vest', 'location': [301, 80, 343, 138]}], 'inference_time': 0.18167948722839355}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [428, 83, 449, 113]}, {'label': 'no_vest', 'location': [301, 80, 343, 138]}], 'inference_time': 0.18167948722839355}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:282 - <module>() - Saved visualization image: ppe_outputs/1762251083_frame.jpg
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251083_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251083_frame.jpg', 'image_size': 640}
2025-11-04 15:46:57 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251083_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:46:57 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251083_frame.jpg
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251083_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251083_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [428.0, 83.0, 449.0, 113.0]}, {'label': 'no_vest', 'location': [301.0, 80.0, 343.0, 138.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:15:00+00:00', 'created_date': '2025-11-04T10:16:57.985000', 'updated_date': '2025-11-04T10:16:57', '_id': '6909d29966237910ebf4fcd4'}
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:46:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:15:00', 'camera_id': 2}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251084_frame.jpg
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251084_frame.jpg
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:46:58 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1540 seconds
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:46:58 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [276, 178, 318, 245], Conf: 0.73
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 141, 315, 176], Conf: 0.66
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [341, 252, 388, 327], Conf: 0.65
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 116, 375, 145], Conf: 0.60
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [276, 178, 318, 245]}, {'label': 'no_hardhat', 'location': [289, 141, 315, 176]}, {'label': 'no_vest', 'location': [341, 252, 388, 327]}, {'label': 'no_hardhat', 'location': [352, 116, 375, 145]}], 'inference_time': 0.15404939651489258}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [276, 178, 318, 245]}, {'label': 'no_hardhat', 'location': [289, 141, 315, 176]}, {'label': 'no_vest', 'location': [341, 252, 388, 327]}, {'label': 'no_hardhat', 'location': [352, 116, 375, 145]}], 'inference_time': 0.15404939651489258}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:282 - <module>() - Saved visualization image: ppe_outputs/1762251084_frame.jpg
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251084_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251084_frame.jpg', 'image_size': 640}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251084_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:46:58 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251084_frame.jpg
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251084_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251084_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [276.0, 178.0, 318.0, 245.0]}, {'label': 'no_hardhat', 'location': [289.0, 141.0, 315.0, 176.0]}, {'label': 'no_vest', 'location': [341.0, 252.0, 388.0, 327.0]}, {'label': 'no_hardhat', 'location': [352.0, 116.0, 375.0, 145.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:15:00+00:00', 'created_date': '2025-11-04T10:16:58.248000', 'updated_date': '2025-11-04T10:16:58', '_id': '6909d29a66237910ebf4fcd5'}
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:46:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:46:58 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:16:00', 'camera_id': 1}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251084_frame.jpg
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251084_frame.jpg
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:47:58 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251084_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251084_frame.jpg
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251084_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251084_frame.jpg
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:16:00', 'camera_id': 2}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251085_frame.jpg
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251085_frame.jpg
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 15:47:58 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251085_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251085_frame.jpg
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 15:47:58 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251085_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251085_frame.jpg
2025-11-04 15:47:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:16:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 15:47:58 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 15:48:40 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 15:48:40 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.5, MODEL_IOU=0.45
2025-11-04 15:48:40 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 15:48:40 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 15:48:41 - [    INFO] - ppe_detection - my_utils.py:26 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x727ebc9cbf40>
2025-11-04 15:48:41 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 15:48:41 - [    INFO] - ppe_detection - my_utils.py:136 - load_model() - Load Model
2025-11-04 15:48:42 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:17:00', 'camera_id': 1}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251085_frame.jpg
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251085_frame.jpg
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:48:42 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1754 seconds
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:48:42 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 119, 472, 152], Conf: 0.61
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [425, 84, 447, 115], Conf: 0.60
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [301, 80, 343, 137], Conf: 0.55
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [443, 119, 472, 152]}, {'label': 'no_hardhat', 'location': [425, 84, 447, 115]}, {'label': 'no_vest', 'location': [301, 80, 343, 137]}], 'inference_time': 0.17538857460021973}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [443, 119, 472, 152]}, {'label': 'no_hardhat', 'location': [425, 84, 447, 115]}, {'label': 'no_vest', 'location': [301, 80, 343, 137]}], 'inference_time': 0.17538857460021973}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251085_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251085_frame.jpg', 'image_size': 640}
2025-11-04 15:48:42 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251085_frame.jpg"}
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:17:00', 'camera_id': 2}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251086_frame.jpg
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251086_frame.jpg
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:48:42 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1133 seconds
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:48:42 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [369, 204, 398, 250], Conf: 0.76
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [344, 254, 392, 341], Conf: 0.75
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [274, 183, 314, 251], Conf: 0.74
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [336, 86, 357, 113], Conf: 0.59
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [369, 204, 398, 250]}, {'label': 'no_vest', 'location': [344, 254, 392, 341]}, {'label': 'no_vest', 'location': [274, 183, 314, 251]}, {'label': 'no_hardhat', 'location': [336, 86, 357, 113]}], 'inference_time': 0.11332297325134277}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [369, 204, 398, 250]}, {'label': 'no_vest', 'location': [344, 254, 392, 341]}, {'label': 'no_vest', 'location': [274, 183, 314, 251]}, {'label': 'no_hardhat', 'location': [336, 86, 357, 113]}], 'inference_time': 0.11332297325134277}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251086_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251086_frame.jpg', 'image_size': 640}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251086_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:48:42 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251086_frame.jpg
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251086_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251086_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [369.0, 204.0, 398.0, 250.0]}, {'label': 'no_vest', 'location': [344.0, 254.0, 392.0, 341.0]}, {'label': 'no_vest', 'location': [274.0, 183.0, 314.0, 251.0]}, {'label': 'no_hardhat', 'location': [336.0, 86.0, 357.0, 113.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:17:00+00:00', 'created_date': '2025-11-04T10:18:42.606000', 'updated_date': '2025-11-04T10:18:42', '_id': '6909d30266237910ebf4fcd9'}
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:48:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:17:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:48:42 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:18:00', 'camera_id': 1}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251086_frame.jpg
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251086_frame.jpg
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:49:42 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1127 seconds
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:49:42 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 83, 448, 112], Conf: 0.70
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 120, 473, 153], Conf: 0.63
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 80, 342, 132], Conf: 0.54
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 83, 448, 112]}, {'label': 'no_hardhat', 'location': [443, 120, 473, 153]}, {'label': 'no_vest', 'location': [303, 80, 342, 132]}], 'inference_time': 0.11265349388122559}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 83, 448, 112]}, {'label': 'no_hardhat', 'location': [443, 120, 473, 153]}, {'label': 'no_vest', 'location': [303, 80, 342, 132]}], 'inference_time': 0.11265349388122559}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251086_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251086_frame.jpg', 'image_size': 640}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251086_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:49:42 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251086_frame.jpg
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251086_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251086_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [427.0, 83.0, 448.0, 112.0]}, {'label': 'no_hardhat', 'location': [443.0, 120.0, 473.0, 153.0]}, {'label': 'no_vest', 'location': [303.0, 80.0, 342.0, 132.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:18:00+00:00', 'created_date': '2025-11-04T10:19:42.870000', 'updated_date': '2025-11-04T10:19:42', '_id': '6909d33e66237910ebf4fcdb'}
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:18:00', 'camera_id': 2}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251087_frame.jpg
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251087_frame.jpg
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:49:42 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:49:42 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:49:42 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1012 seconds
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:49:43 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [370, 203, 399, 250], Conf: 0.59
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 115, 373, 146], Conf: 0.58
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [351, 254, 395, 335], Conf: 0.58
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [343, 146, 379, 194], Conf: 0.57
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [370, 203, 399, 250]}, {'label': 'no_hardhat', 'location': [351, 115, 373, 146]}, {'label': 'no_vest', 'location': [351, 254, 395, 335]}, {'label': 'no_vest', 'location': [343, 146, 379, 194]}], 'inference_time': 0.10117864608764648}
2025-11-04 15:49:43 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [370, 203, 399, 250]}, {'label': 'no_hardhat', 'location': [351, 115, 373, 146]}, {'label': 'no_vest', 'location': [351, 254, 395, 335]}, {'label': 'no_vest', 'location': [343, 146, 379, 194]}], 'inference_time': 0.10117864608764648}
2025-11-04 15:49:43 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 15:49:43 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251087_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251087_frame.jpg', 'image_size': 640}
2025-11-04 15:49:43 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251087_frame.jpg"}
2025-11-04 15:49:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:18:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:49:43 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:49:43 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:19:00', 'camera_id': 1}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251087_frame.jpg
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251087_frame.jpg
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:50:43 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1053 seconds
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:50:43 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [424, 84, 446, 114], Conf: 0.77
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [444, 121, 474, 154], Conf: 0.69
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [285, 110, 332, 171], Conf: 0.60
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [424, 84, 446, 114]}, {'label': 'no_hardhat', 'location': [444, 121, 474, 154]}, {'label': 'no_vest', 'location': [285, 110, 332, 171]}], 'inference_time': 0.10527610778808594}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [424, 84, 446, 114]}, {'label': 'no_hardhat', 'location': [444, 121, 474, 154]}, {'label': 'no_vest', 'location': [285, 110, 332, 171]}], 'inference_time': 0.10527610778808594}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251087_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251087_frame.jpg', 'image_size': 640}
2025-11-04 15:50:43 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251087_frame.jpg"}
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:19:00', 'camera_id': 2}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251088_frame.jpg
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251088_frame.jpg
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:50:43 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0896 seconds
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:50:43 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [378, 203, 409, 248], Conf: 0.72
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 113, 375, 147], Conf: 0.68
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [291, 148, 316, 183], Conf: 0.61
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [274, 192, 314, 255], Conf: 0.54
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [349, 252, 391, 337], Conf: 0.50
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [378, 203, 409, 248]}, {'label': 'no_hardhat', 'location': [351, 113, 375, 147]}, {'label': 'no_hardhat', 'location': [291, 148, 316, 183]}, {'label': 'no_vest', 'location': [274, 192, 314, 255]}, {'label': 'no_vest', 'location': [349, 252, 391, 337]}], 'inference_time': 0.08957242965698242}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [378, 203, 409, 248]}, {'label': 'no_hardhat', 'location': [351, 113, 375, 147]}, {'label': 'no_hardhat', 'location': [291, 148, 316, 183]}, {'label': 'no_vest', 'location': [274, 192, 314, 255]}, {'label': 'no_vest', 'location': [349, 252, 391, 337]}], 'inference_time': 0.08957242965698242}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251088_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251088_frame.jpg', 'image_size': 640}
2025-11-04 15:50:43 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251088_frame.jpg"}
2025-11-04 15:50:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:19:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:50:43 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:20:00', 'camera_id': 1}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251088_frame.jpg
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251088_frame.jpg
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:51:43 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1132 seconds
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:51:43 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 121, 473, 155], Conf: 0.76
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [426, 81, 447, 110], Conf: 0.75
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [290, 84, 341, 166], Conf: 0.65
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [455, 154, 480, 191], Conf: 0.56
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [443, 121, 473, 155]}, {'label': 'no_hardhat', 'location': [426, 81, 447, 110]}, {'label': 'no_vest', 'location': [290, 84, 341, 166]}, {'label': 'no_hardhat', 'location': [455, 154, 480, 191]}], 'inference_time': 0.11324810981750488}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [443, 121, 473, 155]}, {'label': 'no_hardhat', 'location': [426, 81, 447, 110]}, {'label': 'no_vest', 'location': [290, 84, 341, 166]}, {'label': 'no_hardhat', 'location': [455, 154, 480, 191]}], 'inference_time': 0.11324810981750488}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251088_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251088_frame.jpg', 'image_size': 640}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251088_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:51:43 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251088_frame.jpg
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251088_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251088_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [443.0, 121.0, 473.0, 155.0]}, {'label': 'no_hardhat', 'location': [426.0, 81.0, 447.0, 110.0]}, {'label': 'no_vest', 'location': [290.0, 84.0, 341.0, 166.0]}, {'label': 'no_hardhat', 'location': [455.0, 154.0, 480.0, 191.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:20:00+00:00', 'created_date': '2025-11-04T10:21:43.681000', 'updated_date': '2025-11-04T10:21:43', '_id': '6909d3b766237910ebf4fcdf'}
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:20:00', 'camera_id': 2}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251089_frame.jpg
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251089_frame.jpg
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:51:43 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1483 seconds
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:51:43 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [275, 192, 316, 252], Conf: 0.67
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [354, 267, 408, 347], Conf: 0.54
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [275, 192, 316, 252]}, {'label': 'no_vest', 'location': [354, 267, 408, 347]}], 'inference_time': 0.14829587936401367}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [275, 192, 316, 252]}, {'label': 'no_vest', 'location': [354, 267, 408, 347]}], 'inference_time': 0.14829587936401367}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251089_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251089_frame.jpg', 'image_size': 640}
2025-11-04 15:51:43 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251089_frame.jpg"}
2025-11-04 15:51:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:20:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:51:43 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:52:43 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:52:43 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:52:43 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:52:43 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:52:43 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:21:00', 'camera_id': 1}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251089_frame.jpg
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251089_frame.jpg
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:52:44 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1466 seconds
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:52:44 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [440, 109, 460, 137], Conf: 0.68
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [428, 82, 448, 110], Conf: 0.67
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [440, 109, 460, 137]}, {'label': 'no_hardhat', 'location': [428, 82, 448, 110]}], 'inference_time': 0.14655423164367676}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [440, 109, 460, 137]}, {'label': 'no_hardhat', 'location': [428, 82, 448, 110]}], 'inference_time': 0.14655423164367676}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251089_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251089_frame.jpg', 'image_size': 640}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251089_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:52:44 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251089_frame.jpg
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251089_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251089_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [440.0, 109.0, 460.0, 137.0]}, {'label': 'no_hardhat', 'location': [428.0, 82.0, 448.0, 110.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:21:00+00:00', 'created_date': '2025-11-04T10:22:44.220000', 'updated_date': '2025-11-04T10:22:44', '_id': '6909d3f466237910ebf4fce1'}
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:21:00', 'camera_id': 2}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251090_frame.jpg
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251090_frame.jpg
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:52:44 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1468 seconds
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:52:44 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [379, 213, 412, 261], Conf: 0.79
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [353, 260, 404, 340], Conf: 0.74
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [264, 182, 310, 247], Conf: 0.72
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [269, 141, 296, 180], Conf: 0.61
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [302, 386, 364, 478], Conf: 0.53
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [277, 500, 358, 617], Conf: 0.51
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [379, 213, 412, 261]}, {'label': 'no_vest', 'location': [353, 260, 404, 340]}, {'label': 'no_vest', 'location': [264, 182, 310, 247]}, {'label': 'no_hardhat', 'location': [269, 141, 296, 180]}, {'label': 'no_hardhat', 'location': [302, 386, 364, 478]}, {'label': 'no_vest', 'location': [277, 500, 358, 617]}], 'inference_time': 0.1467907428741455}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [379, 213, 412, 261]}, {'label': 'no_vest', 'location': [353, 260, 404, 340]}, {'label': 'no_vest', 'location': [264, 182, 310, 247]}, {'label': 'no_hardhat', 'location': [269, 141, 296, 180]}, {'label': 'no_hardhat', 'location': [302, 386, 364, 478]}, {'label': 'no_vest', 'location': [277, 500, 358, 617]}], 'inference_time': 0.1467907428741455}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251090_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251090_frame.jpg', 'image_size': 640}
2025-11-04 15:52:44 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251090_frame.jpg"}
2025-11-04 15:52:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:21:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:52:44 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:22:00', 'camera_id': 1}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251090_frame.jpg
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251090_frame.jpg
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:53:44 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1503 seconds
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:53:44 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 82, 448, 111], Conf: 0.65
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [440, 110, 461, 139], Conf: 0.52
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 82, 448, 111]}, {'label': 'no_hardhat', 'location': [440, 110, 461, 139]}], 'inference_time': 0.15030860900878906}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 82, 448, 111]}, {'label': 'no_hardhat', 'location': [440, 110, 461, 139]}], 'inference_time': 0.15030860900878906}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251090_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251090_frame.jpg', 'image_size': 640}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251090_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:53:44 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251090_frame.jpg
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251090_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251090_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [427.0, 82.0, 448.0, 111.0]}, {'label': 'no_hardhat', 'location': [440.0, 110.0, 461.0, 139.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:22:00+00:00', 'created_date': '2025-11-04T10:23:44.754000', 'updated_date': '2025-11-04T10:23:44', '_id': '6909d43066237910ebf4fce3'}
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:22:00', 'camera_id': 2}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251091_frame.jpg
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251091_frame.jpg
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:53:44 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:53:44 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:53:44 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1651 seconds
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:53:45 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [379, 214, 411, 260], Conf: 0.73
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [354, 260, 409, 341], Conf: 0.71
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [270, 181, 314, 247], Conf: 0.67
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [379, 214, 411, 260]}, {'label': 'no_vest', 'location': [354, 260, 409, 341]}, {'label': 'no_vest', 'location': [270, 181, 314, 247]}], 'inference_time': 0.1651308536529541}
2025-11-04 15:53:45 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [379, 214, 411, 260]}, {'label': 'no_vest', 'location': [354, 260, 409, 341]}, {'label': 'no_vest', 'location': [270, 181, 314, 247]}], 'inference_time': 0.1651308536529541}
2025-11-04 15:53:45 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:53:45 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251091_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251091_frame.jpg', 'image_size': 640}
2025-11-04 15:53:45 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251091_frame.jpg"}
2025-11-04 15:53:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:22:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:53:45 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:53:45 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:23:00', 'camera_id': 1}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251091_frame.jpg
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251091_frame.jpg
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1385 seconds
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 84, 448, 113], Conf: 0.69
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [444, 117, 471, 150], Conf: 0.65
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [316, 53, 341, 80], Conf: 0.54
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 113]}, {'label': 'no_hardhat', 'location': [444, 117, 471, 150]}, {'label': 'no_hardhat', 'location': [316, 53, 341, 80]}], 'inference_time': 0.13848519325256348}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 113]}, {'label': 'no_hardhat', 'location': [444, 117, 471, 150]}, {'label': 'no_hardhat', 'location': [316, 53, 341, 80]}], 'inference_time': 0.13848519325256348}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251091_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251091_frame.jpg', 'image_size': 640}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251091_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251091_frame.jpg
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251091_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251091_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [427.0, 84.0, 448.0, 113.0]}, {'label': 'no_hardhat', 'location': [444.0, 117.0, 471.0, 150.0]}, {'label': 'no_hardhat', 'location': [316.0, 53.0, 341.0, 80.0]}]}, 'counts': {'no_hardhat': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:23:00+00:00', 'created_date': '2025-11-04T10:24:45.302000', 'updated_date': '2025-11-04T10:24:45', '_id': '6909d46d66237910ebf4fce4'}
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:23:00', 'camera_id': 2}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251092_frame.jpg
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251092_frame.jpg
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1439 seconds
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [286, 187, 323, 256], Conf: 0.66
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [291, 143, 319, 181], Conf: 0.59
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 86, 374, 118], Conf: 0.52
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [286, 187, 323, 256]}, {'label': 'no_hardhat', 'location': [291, 143, 319, 181]}, {'label': 'no_hardhat', 'location': [352, 86, 374, 118]}], 'inference_time': 0.14391875267028809}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [286, 187, 323, 256]}, {'label': 'no_hardhat', 'location': [291, 143, 319, 181]}, {'label': 'no_hardhat', 'location': [352, 86, 374, 118]}], 'inference_time': 0.14391875267028809}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251092_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251092_frame.jpg', 'image_size': 640}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251092_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:54:45 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251092_frame.jpg
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251092_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251092_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [286.0, 187.0, 323.0, 256.0]}, {'label': 'no_hardhat', 'location': [291.0, 143.0, 319.0, 181.0]}, {'label': 'no_hardhat', 'location': [352.0, 86.0, 374.0, 118.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:23:00+00:00', 'created_date': '2025-11-04T10:24:45.541000', 'updated_date': '2025-11-04T10:24:45', '_id': '6909d46d66237910ebf4fce5'}
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:54:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:23:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:54:45 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:24:00', 'camera_id': 1}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251092_frame.jpg
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251092_frame.jpg
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:55:45 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1407 seconds
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:55:45 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 85, 446, 111], Conf: 0.67
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [444, 118, 472, 151], Conf: 0.65
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 79, 338, 123], Conf: 0.53
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 85, 446, 111]}, {'label': 'no_hardhat', 'location': [444, 118, 472, 151]}, {'label': 'no_vest', 'location': [302, 79, 338, 123]}], 'inference_time': 0.1407301425933838}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 85, 446, 111]}, {'label': 'no_hardhat', 'location': [444, 118, 472, 151]}, {'label': 'no_vest', 'location': [302, 79, 338, 123]}], 'inference_time': 0.1407301425933838}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251092_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251092_frame.jpg', 'image_size': 640}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251092_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:55:45 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251092_frame.jpg
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251092_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251092_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [427.0, 85.0, 446.0, 111.0]}, {'label': 'no_hardhat', 'location': [444.0, 118.0, 472.0, 151.0]}, {'label': 'no_vest', 'location': [302.0, 79.0, 338.0, 123.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:24:00+00:00', 'created_date': '2025-11-04T10:25:45.835000', 'updated_date': '2025-11-04T10:25:45', '_id': '6909d4a966237910ebf4fce7'}
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:24:00', 'camera_id': 2}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251093_frame.jpg
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251093_frame.jpg
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:55:45 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:55:45 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:55:45 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1470 seconds
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:55:46 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [354, 251, 413, 342], Conf: 0.78
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [276, 185, 316, 255], Conf: 0.68
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [373, 199, 404, 246], Conf: 0.63
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [333, 121, 376, 190], Conf: 0.60
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [354, 251, 413, 342]}, {'label': 'no_vest', 'location': [276, 185, 316, 255]}, {'label': 'no_hardhat', 'location': [373, 199, 404, 246]}, {'label': 'no_vest', 'location': [333, 121, 376, 190]}], 'inference_time': 0.14700007438659668}
2025-11-04 15:55:46 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [354, 251, 413, 342]}, {'label': 'no_vest', 'location': [276, 185, 316, 255]}, {'label': 'no_hardhat', 'location': [373, 199, 404, 246]}, {'label': 'no_vest', 'location': [333, 121, 376, 190]}], 'inference_time': 0.14700007438659668}
2025-11-04 15:55:46 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 15:55:46 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251093_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251093_frame.jpg', 'image_size': 640}
2025-11-04 15:55:46 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251093_frame.jpg"}
2025-11-04 15:55:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:24:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:55:46 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:55:46 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:25:00', 'camera_id': 1}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251093_frame.jpg
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251093_frame.jpg
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:56:46 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1198 seconds
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:56:46 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 84, 448, 113], Conf: 0.68
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [446, 121, 474, 154], Conf: 0.54
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [306, 78, 342, 123], Conf: 0.51
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 113]}, {'label': 'no_hardhat', 'location': [446, 121, 474, 154]}, {'label': 'no_vest', 'location': [306, 78, 342, 123]}], 'inference_time': 0.11984443664550781}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 113]}, {'label': 'no_hardhat', 'location': [446, 121, 474, 154]}, {'label': 'no_vest', 'location': [306, 78, 342, 123]}], 'inference_time': 0.11984443664550781}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251093_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251093_frame.jpg', 'image_size': 640}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251093_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:56:46 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251093_frame.jpg
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251093_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251093_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [427.0, 84.0, 448.0, 113.0]}, {'label': 'no_hardhat', 'location': [446.0, 121.0, 474.0, 154.0]}, {'label': 'no_vest', 'location': [306.0, 78.0, 342.0, 123.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:25:00+00:00', 'created_date': '2025-11-04T10:26:46.313000', 'updated_date': '2025-11-04T10:26:46', '_id': '6909d4e666237910ebf4fce9'}
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:25:00', 'camera_id': 2}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251094_frame.jpg
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251094_frame.jpg
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:56:46 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1243 seconds
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:56:46 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [271, 186, 313, 254], Conf: 0.64
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [315, 120, 368, 190], Conf: 0.63
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [344, 280, 391, 355], Conf: 0.59
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 85, 374, 115], Conf: 0.59
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [285, 84, 308, 114], Conf: 0.55
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [271, 186, 313, 254]}, {'label': 'no_vest', 'location': [315, 120, 368, 190]}, {'label': 'no_vest', 'location': [344, 280, 391, 355]}, {'label': 'no_hardhat', 'location': [352, 85, 374, 115]}, {'label': 'no_hardhat', 'location': [285, 84, 308, 114]}], 'inference_time': 0.12429690361022949}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [271, 186, 313, 254]}, {'label': 'no_vest', 'location': [315, 120, 368, 190]}, {'label': 'no_vest', 'location': [344, 280, 391, 355]}, {'label': 'no_hardhat', 'location': [352, 85, 374, 115]}, {'label': 'no_hardhat', 'location': [285, 84, 308, 114]}], 'inference_time': 0.12429690361022949}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251094_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251094_frame.jpg', 'image_size': 640}
2025-11-04 15:56:46 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251094_frame.jpg"}
2025-11-04 15:56:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:25:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:56:46 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:26:00', 'camera_id': 1}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251094_frame.jpg
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251094_frame.jpg
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:57:46 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1514 seconds
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:57:46 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [427, 84, 448, 114], Conf: 0.71
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [456, 212, 484, 250], Conf: 0.66
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [448, 121, 475, 153], Conf: 0.60
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 114]}, {'label': 'no_hardhat', 'location': [456, 212, 484, 250]}, {'label': 'no_hardhat', 'location': [448, 121, 475, 153]}], 'inference_time': 0.15140652656555176}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [427, 84, 448, 114]}, {'label': 'no_hardhat', 'location': [456, 212, 484, 250]}, {'label': 'no_hardhat', 'location': [448, 121, 475, 153]}], 'inference_time': 0.15140652656555176}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251094_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251094_frame.jpg', 'image_size': 640}
2025-11-04 15:57:46 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251094_frame.jpg"}
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:26:00', 'camera_id': 2}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251095_frame.jpg
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251095_frame.jpg
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:57:46 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1137 seconds
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:57:46 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [268, 143, 296, 181], Conf: 0.76
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [275, 184, 314, 253], Conf: 0.68
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 85, 373, 115], Conf: 0.65
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [384, 222, 417, 269], Conf: 0.62
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [353, 276, 394, 353], Conf: 0.54
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [268, 143, 296, 181]}, {'label': 'no_vest', 'location': [275, 184, 314, 253]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 115]}, {'label': 'no_hardhat', 'location': [384, 222, 417, 269]}, {'label': 'no_vest', 'location': [353, 276, 394, 353]}], 'inference_time': 0.11366677284240723}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [268, 143, 296, 181]}, {'label': 'no_vest', 'location': [275, 184, 314, 253]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 115]}, {'label': 'no_hardhat', 'location': [384, 222, 417, 269]}, {'label': 'no_vest', 'location': [353, 276, 394, 353]}], 'inference_time': 0.11366677284240723}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251095_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251095_frame.jpg', 'image_size': 640}
2025-11-04 15:57:46 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251095_frame.jpg"}
2025-11-04 15:57:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:26:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:57:46 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:27:00', 'camera_id': 1}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251095_frame.jpg
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251095_frame.jpg
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:58:47 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1272 seconds
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:58:47 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [429, 83, 449, 112], Conf: 0.57
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [446, 120, 475, 156], Conf: 0.53
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [429, 83, 449, 112]}, {'label': 'no_hardhat', 'location': [446, 120, 475, 156]}], 'inference_time': 0.12716913223266602}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [429, 83, 449, 112]}, {'label': 'no_hardhat', 'location': [446, 120, 475, 156]}], 'inference_time': 0.12716913223266602}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251095_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251095_frame.jpg', 'image_size': 640}
2025-11-04 15:58:47 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251095_frame.jpg"}
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:27:00', 'camera_id': 2}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251096_frame.jpg
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251096_frame.jpg
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:58:47 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1385 seconds
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:58:47 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 8 detections found.
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [386, 220, 420, 268], Conf: 0.71
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [273, 181, 316, 251], Conf: 0.65
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 142, 299, 180], Conf: 0.65
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 85, 373, 113], Conf: 0.64
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 100, 290, 124], Conf: 0.60
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [355, 275, 407, 365], Conf: 0.57
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [283, 88, 300, 110], Conf: 0.54
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [335, 118, 367, 165], Conf: 0.51
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [386, 220, 420, 268]}, {'label': 'no_vest', 'location': [273, 181, 316, 251]}, {'label': 'no_hardhat', 'location': [270, 142, 299, 180]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 113]}, {'label': 'no_hardhat', 'location': [270, 100, 290, 124]}, {'label': 'no_vest', 'location': [355, 275, 407, 365]}, {'label': 'no_hardhat', 'location': [283, 88, 300, 110]}, {'label': 'no_vest', 'location': [335, 118, 367, 165]}], 'inference_time': 0.1385488510131836}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [386, 220, 420, 268]}, {'label': 'no_vest', 'location': [273, 181, 316, 251]}, {'label': 'no_hardhat', 'location': [270, 142, 299, 180]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 113]}, {'label': 'no_hardhat', 'location': [270, 100, 290, 124]}, {'label': 'no_vest', 'location': [355, 275, 407, 365]}, {'label': 'no_hardhat', 'location': [283, 88, 300, 110]}, {'label': 'no_vest', 'location': [335, 118, 367, 165]}], 'inference_time': 0.1385488510131836}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=8 after=8
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251096_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251096_frame.jpg', 'image_size': 640}
2025-11-04 15:58:47 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251096_frame.jpg"}
2025-11-04 15:58:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:27:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:58:47 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:28:00', 'camera_id': 1}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251096_frame.jpg
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251096_frame.jpg
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:59:47 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1210 seconds
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:59:47 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [417, 133, 468, 193], Conf: 0.59
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [428, 103, 452, 136], Conf: 0.56
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [417, 133, 468, 193]}, {'label': 'no_hardhat', 'location': [428, 103, 452, 136]}], 'inference_time': 0.12098908424377441}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [417, 133, 468, 193]}, {'label': 'no_hardhat', 'location': [428, 103, 452, 136]}], 'inference_time': 0.12098908424377441}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251096_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251096_frame.jpg', 'image_size': 640}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251096_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 15:59:47 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251096_frame.jpg
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251096_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251096_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [417.0, 133.0, 468.0, 193.0]}, {'label': 'no_hardhat', 'location': [428.0, 103.0, 452.0, 136.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:28:00+00:00', 'created_date': '2025-11-04T10:29:47.738000', 'updated_date': '2025-11-04T10:29:47', '_id': '6909d59b66237910ebf4fcef'}
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:28:00', 'camera_id': 2}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251097_frame.jpg
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251097_frame.jpg
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 15:59:47 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1198 seconds
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 15:59:47 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [377, 208, 410, 249], Conf: 0.81
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [296, 149, 320, 182], Conf: 0.70
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 184, 326, 256], Conf: 0.69
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 375, 116], Conf: 0.69
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [272, 98, 293, 126], Conf: 0.68
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [335, 122, 367, 171], Conf: 0.53
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [353, 266, 403, 352], Conf: 0.53
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [377, 208, 410, 249]}, {'label': 'no_hardhat', 'location': [296, 149, 320, 182]}, {'label': 'no_vest', 'location': [288, 184, 326, 256]}, {'label': 'no_hardhat', 'location': [352, 84, 375, 116]}, {'label': 'no_hardhat', 'location': [272, 98, 293, 126]}, {'label': 'no_vest', 'location': [335, 122, 367, 171]}, {'label': 'no_vest', 'location': [353, 266, 403, 352]}], 'inference_time': 0.11981368064880371}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [377, 208, 410, 249]}, {'label': 'no_hardhat', 'location': [296, 149, 320, 182]}, {'label': 'no_vest', 'location': [288, 184, 326, 256]}, {'label': 'no_hardhat', 'location': [352, 84, 375, 116]}, {'label': 'no_hardhat', 'location': [272, 98, 293, 126]}, {'label': 'no_vest', 'location': [335, 122, 367, 171]}, {'label': 'no_vest', 'location': [353, 266, 403, 352]}], 'inference_time': 0.11981368064880371}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=7 after=7
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251097_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251097_frame.jpg', 'image_size': 640}
2025-11-04 15:59:47 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251097_frame.jpg"}
2025-11-04 15:59:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:28:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 15:59:47 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:29:00', 'camera_id': 1}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251097_frame.jpg
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251097_frame.jpg
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:00:48 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1645 seconds
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:00:48 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [305, 80, 344, 132], Conf: 0.59
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 343, 80], Conf: 0.51
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [305, 80, 344, 132]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.164536714553833}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [305, 80, 344, 132]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.164536714553833}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251097_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251097_frame.jpg', 'image_size': 640}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251097_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:00:48 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251097_frame.jpg
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251097_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251097_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [305.0, 80.0, 344.0, 132.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:29:00+00:00', 'created_date': '2025-11-04T10:30:48.226000', 'updated_date': '2025-11-04T10:30:48', '_id': '6909d5d866237910ebf4fcf1'}
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:29:00', 'camera_id': 2}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251098_frame.jpg
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251098_frame.jpg
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:00:48 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1703 seconds
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:00:48 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [307, 68, 338, 107], Conf: 0.80
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [381, 215, 417, 270], Conf: 0.79
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [356, 270, 411, 356], Conf: 0.78
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [304, 111, 354, 210], Conf: 0.76
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 373, 113], Conf: 0.65
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [307, 68, 338, 107]}, {'label': 'no_hardhat', 'location': [381, 215, 417, 270]}, {'label': 'no_vest', 'location': [356, 270, 411, 356]}, {'label': 'no_vest', 'location': [304, 111, 354, 210]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 113]}], 'inference_time': 0.17025971412658691}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [307, 68, 338, 107]}, {'label': 'no_hardhat', 'location': [381, 215, 417, 270]}, {'label': 'no_vest', 'location': [356, 270, 411, 356]}, {'label': 'no_vest', 'location': [304, 111, 354, 210]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 113]}], 'inference_time': 0.17025971412658691}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251098_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251098_frame.jpg', 'image_size': 640}
2025-11-04 16:00:48 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251098_frame.jpg"}
2025-11-04 16:00:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:29:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:00:48 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:30:00', 'camera_id': 1}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251098_frame.jpg
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251098_frame.jpg
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:01:48 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1368 seconds
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:01:48 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 81, 343, 134], Conf: 0.62
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [315, 53, 342, 80], Conf: 0.53
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [302, 81, 343, 134]}, {'label': 'hardhat', 'location': [315, 53, 342, 80]}], 'inference_time': 0.13683056831359863}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [302, 81, 343, 134]}, {'label': 'hardhat', 'location': [315, 53, 342, 80]}], 'inference_time': 0.13683056831359863}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251098_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251098_frame.jpg', 'image_size': 640}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251098_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:01:48 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251098_frame.jpg
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251098_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251098_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [302.0, 81.0, 343.0, 134.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:30:00+00:00', 'created_date': '2025-11-04T10:31:48.769000', 'updated_date': '2025-11-04T10:31:48', '_id': '6909d61466237910ebf4fcf3'}
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:30:00', 'camera_id': 2}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251099_frame.jpg
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251099_frame.jpg
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:01:48 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:01:48 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:01:48 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1712 seconds
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:01:49 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [307, 63, 337, 105], Conf: 0.79
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 110, 352, 207], Conf: 0.78
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 374, 112], Conf: 0.70
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [393, 209, 427, 258], Conf: 0.68
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [367, 261, 428, 346], Conf: 0.67
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [133, 603, 208, 640], Conf: 0.51
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [307, 63, 337, 105]}, {'label': 'no_vest', 'location': [302, 110, 352, 207]}, {'label': 'no_hardhat', 'location': [352, 84, 374, 112]}, {'label': 'no_hardhat', 'location': [393, 209, 427, 258]}, {'label': 'no_vest', 'location': [367, 261, 428, 346]}, {'label': 'no_hardhat', 'location': [133, 603, 208, 640]}], 'inference_time': 0.17116236686706543}
2025-11-04 16:01:49 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [307, 63, 337, 105]}, {'label': 'no_vest', 'location': [302, 110, 352, 207]}, {'label': 'no_hardhat', 'location': [352, 84, 374, 112]}, {'label': 'no_hardhat', 'location': [393, 209, 427, 258]}, {'label': 'no_vest', 'location': [367, 261, 428, 346]}, {'label': 'no_hardhat', 'location': [133, 603, 208, 640]}], 'inference_time': 0.17116236686706543}
2025-11-04 16:01:49 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:01:49 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251099_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251099_frame.jpg', 'image_size': 640}
2025-11-04 16:01:49 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251099_frame.jpg"}
2025-11-04 16:01:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:30:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:01:49 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:01:49 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:31:00', 'camera_id': 1}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251099_frame.jpg
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251099_frame.jpg
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:02:49 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1402 seconds
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:02:49 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 80, 344, 132], Conf: 0.65
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [315, 53, 342, 80], Conf: 0.52
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [302, 80, 344, 132]}, {'label': 'hardhat', 'location': [315, 53, 342, 80]}], 'inference_time': 0.14024734497070312}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [302, 80, 344, 132]}, {'label': 'hardhat', 'location': [315, 53, 342, 80]}], 'inference_time': 0.14024734497070312}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251099_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251099_frame.jpg', 'image_size': 640}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251099_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:02:49 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251099_frame.jpg
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251099_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251099_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [302.0, 80.0, 344.0, 132.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:31:00+00:00', 'created_date': '2025-11-04T10:32:49.290000', 'updated_date': '2025-11-04T10:32:49', '_id': '6909d65166237910ebf4fcf5'}
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:31:00', 'camera_id': 2}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251100_frame.jpg
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251100_frame.jpg
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:02:49 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1446 seconds
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:02:49 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [317, 64, 347, 108], Conf: 0.83
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [278, 130, 306, 173], Conf: 0.76
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [323, 108, 362, 173], Conf: 0.67
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [344, 249, 400, 343], Conf: 0.66
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [358, 202, 387, 242], Conf: 0.59
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [132, 602, 209, 640], Conf: 0.59
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [276, 175, 317, 237], Conf: 0.54
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [317, 64, 347, 108]}, {'label': 'no_hardhat', 'location': [278, 130, 306, 173]}, {'label': 'no_vest', 'location': [323, 108, 362, 173]}, {'label': 'no_vest', 'location': [344, 249, 400, 343]}, {'label': 'no_hardhat', 'location': [358, 202, 387, 242]}, {'label': 'no_hardhat', 'location': [132, 602, 209, 640]}, {'label': 'no_vest', 'location': [276, 175, 317, 237]}], 'inference_time': 0.14456486701965332}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [317, 64, 347, 108]}, {'label': 'no_hardhat', 'location': [278, 130, 306, 173]}, {'label': 'no_vest', 'location': [323, 108, 362, 173]}, {'label': 'no_vest', 'location': [344, 249, 400, 343]}, {'label': 'no_hardhat', 'location': [358, 202, 387, 242]}, {'label': 'no_hardhat', 'location': [132, 602, 209, 640]}, {'label': 'no_vest', 'location': [276, 175, 317, 237]}], 'inference_time': 0.14456486701965332}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=7 after=7
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251100_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251100_frame.jpg', 'image_size': 640}
2025-11-04 16:02:49 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251100_frame.jpg"}
2025-11-04 16:02:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:31:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:02:49 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:32:00', 'camera_id': 1}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251100_frame.jpg
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251100_frame.jpg
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:03:49 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2031 seconds
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:03:49 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 82, 342, 133], Conf: 0.65
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [439, 139, 467, 174], Conf: 0.52
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [303, 82, 342, 133]}, {'label': 'no_hardhat', 'location': [439, 139, 467, 174]}], 'inference_time': 0.20313000679016113}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [303, 82, 342, 133]}, {'label': 'no_hardhat', 'location': [439, 139, 467, 174]}], 'inference_time': 0.20313000679016113}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251100_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251100_frame.jpg', 'image_size': 640}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251100_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:03:49 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251100_frame.jpg
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251100_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251100_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [303.0, 82.0, 342.0, 133.0]}, {'label': 'no_hardhat', 'location': [439.0, 139.0, 467.0, 174.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:32:00+00:00', 'created_date': '2025-11-04T10:33:49.892000', 'updated_date': '2025-11-04T10:33:49', '_id': '6909d68d66237910ebf4fcf7'}
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:32:00', 'camera_id': 2}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251101_frame.jpg
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251101_frame.jpg
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:03:49 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:03:49 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:03:49 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2958 seconds
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:03:50 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [313, 66, 340, 105], Conf: 0.73
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 374, 112], Conf: 0.72
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [296, 116, 345, 211], Conf: 0.65
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [313, 66, 340, 105]}, {'label': 'no_hardhat', 'location': [352, 84, 374, 112]}, {'label': 'no_vest', 'location': [296, 116, 345, 211]}], 'inference_time': 0.29582858085632324}
2025-11-04 16:03:50 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [313, 66, 340, 105]}, {'label': 'no_hardhat', 'location': [352, 84, 374, 112]}, {'label': 'no_vest', 'location': [296, 116, 345, 211]}], 'inference_time': 0.29582858085632324}
2025-11-04 16:03:50 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:03:50 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251101_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251101_frame.jpg', 'image_size': 640}
2025-11-04 16:03:50 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251101_frame.jpg"}
2025-11-04 16:03:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:32:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:03:50 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:03:50 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:33:00', 'camera_id': 1}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251101_frame.jpg
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251101_frame.jpg
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:04:50 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2855 seconds
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:04:50 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [304, 81, 343, 134], Conf: 0.60
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [304, 81, 343, 134]}], 'inference_time': 0.2855098247528076}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [304, 81, 343, 134]}], 'inference_time': 0.2855098247528076}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251101_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251101_frame.jpg', 'image_size': 640}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251101_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:04:50 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251101_frame.jpg
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251101_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251101_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [304.0, 81.0, 343.0, 134.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:33:00+00:00', 'created_date': '2025-11-04T10:34:50.750000', 'updated_date': '2025-11-04T10:34:50', '_id': '6909d6ca66237910ebf4fcf9'}
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:33:00', 'camera_id': 2}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251102_frame.jpg
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251102_frame.jpg
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:04:50 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:04:50 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:04:50 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2721 seconds
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:04:51 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [287, 123, 342, 224], Conf: 0.79
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [292, 71, 326, 117], Conf: 0.76
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 373, 111], Conf: 0.62
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [287, 123, 342, 224]}, {'label': 'no_hardhat', 'location': [292, 71, 326, 117]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 111]}], 'inference_time': 0.27205753326416016}
2025-11-04 16:04:51 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [287, 123, 342, 224]}, {'label': 'no_hardhat', 'location': [292, 71, 326, 117]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 111]}], 'inference_time': 0.27205753326416016}
2025-11-04 16:04:51 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:04:51 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251102_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251102_frame.jpg', 'image_size': 640}
2025-11-04 16:04:51 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251102_frame.jpg"}
2025-11-04 16:04:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:33:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:04:51 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:04:51 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:34:00', 'camera_id': 1}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251102_frame.jpg
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251102_frame.jpg
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:05:51 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1347 seconds
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:05:51 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [451, 201, 482, 250], Conf: 0.72
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [432, 105, 456, 137], Conf: 0.72
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 86, 462, 110], Conf: 0.60
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 82, 343, 134], Conf: 0.58
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [417, 72, 437, 103], Conf: 0.58
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [441, 250, 489, 314], Conf: 0.51
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [451, 201, 482, 250]}, {'label': 'no_hardhat', 'location': [432, 105, 456, 137]}, {'label': 'no_hardhat', 'location': [443, 86, 462, 110]}, {'label': 'no_vest', 'location': [303, 82, 343, 134]}, {'label': 'no_hardhat', 'location': [417, 72, 437, 103]}, {'label': 'no_vest', 'location': [441, 250, 489, 314]}], 'inference_time': 0.13466382026672363}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [451, 201, 482, 250]}, {'label': 'no_hardhat', 'location': [432, 105, 456, 137]}, {'label': 'no_hardhat', 'location': [443, 86, 462, 110]}, {'label': 'no_vest', 'location': [303, 82, 343, 134]}, {'label': 'no_hardhat', 'location': [417, 72, 437, 103]}, {'label': 'no_vest', 'location': [441, 250, 489, 314]}], 'inference_time': 0.13466382026672363}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251102_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251102_frame.jpg', 'image_size': 640}
2025-11-04 16:05:51 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251102_frame.jpg"}
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:34:00', 'camera_id': 2}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251103_frame.jpg
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251103_frame.jpg
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:05:51 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1327 seconds
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:05:51 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [290, 176, 330, 235], Conf: 0.75
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 85, 372, 111], Conf: 0.64
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [283, 84, 302, 104], Conf: 0.62
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [297, 139, 328, 173], Conf: 0.61
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [105, 588, 189, 640], Conf: 0.55
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [290, 176, 330, 235]}, {'label': 'no_hardhat', 'location': [351, 85, 372, 111]}, {'label': 'no_hardhat', 'location': [283, 84, 302, 104]}, {'label': 'no_hardhat', 'location': [297, 139, 328, 173]}, {'label': 'no_hardhat', 'location': [105, 588, 189, 640]}], 'inference_time': 0.13270139694213867}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [290, 176, 330, 235]}, {'label': 'no_hardhat', 'location': [351, 85, 372, 111]}, {'label': 'no_hardhat', 'location': [283, 84, 302, 104]}, {'label': 'no_hardhat', 'location': [297, 139, 328, 173]}, {'label': 'no_hardhat', 'location': [105, 588, 189, 640]}], 'inference_time': 0.13270139694213867}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251103_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251103_frame.jpg', 'image_size': 640}
2025-11-04 16:05:51 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251103_frame.jpg"}
2025-11-04 16:05:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:34:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:05:51 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:35:00', 'camera_id': 1}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251103_frame.jpg
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251103_frame.jpg
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:06:51 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1316 seconds
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:06:51 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [415, 71, 438, 104], Conf: 0.68
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 83, 343, 136], Conf: 0.57
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 342, 80], Conf: 0.52
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [415, 71, 438, 104]}, {'label': 'no_vest', 'location': [303, 83, 343, 136]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.13161063194274902}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [415, 71, 438, 104]}, {'label': 'no_vest', 'location': [303, 83, 343, 136]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.13161063194274902}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251103_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251103_frame.jpg', 'image_size': 640}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251103_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:06:51 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251103_frame.jpg
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251103_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251103_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [415.0, 71.0, 438.0, 104.0]}, {'label': 'no_vest', 'location': [303.0, 83.0, 343.0, 136.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:35:00+00:00', 'created_date': '2025-11-04T10:36:51.866000', 'updated_date': '2025-11-04T10:36:51', '_id': '6909d74366237910ebf4fcfd'}
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:35:00', 'camera_id': 2}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251104_frame.jpg
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251104_frame.jpg
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:06:51 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:06:51 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:06:51 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1380 seconds
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:06:52 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [292, 176, 335, 237], Conf: 0.74
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [350, 85, 372, 112], Conf: 0.68
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [287, 83, 304, 104], Conf: 0.52
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [292, 176, 335, 237]}, {'label': 'no_hardhat', 'location': [350, 85, 372, 112]}, {'label': 'no_hardhat', 'location': [287, 83, 304, 104]}], 'inference_time': 0.1380326747894287}
2025-11-04 16:06:52 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [292, 176, 335, 237]}, {'label': 'no_hardhat', 'location': [350, 85, 372, 112]}, {'label': 'no_hardhat', 'location': [287, 83, 304, 104]}], 'inference_time': 0.1380326747894287}
2025-11-04 16:06:52 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:06:52 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251104_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251104_frame.jpg', 'image_size': 640}
2025-11-04 16:06:52 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251104_frame.jpg"}
2025-11-04 16:06:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:35:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:06:52 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:06:52 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:36:00', 'camera_id': 1}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251104_frame.jpg
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251104_frame.jpg
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:07:52 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1173 seconds
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:07:52 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [419, 71, 439, 100], Conf: 0.67
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [304, 82, 344, 139], Conf: 0.63
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [419, 71, 439, 100]}, {'label': 'no_vest', 'location': [304, 82, 344, 139]}], 'inference_time': 0.11730766296386719}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [419, 71, 439, 100]}, {'label': 'no_vest', 'location': [304, 82, 344, 139]}], 'inference_time': 0.11730766296386719}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251104_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251104_frame.jpg', 'image_size': 640}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251104_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:07:52 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251104_frame.jpg
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251104_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251104_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [419.0, 71.0, 439.0, 100.0]}, {'label': 'no_vest', 'location': [304.0, 82.0, 344.0, 139.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:36:00+00:00', 'created_date': '2025-11-04T10:37:52.343000', 'updated_date': '2025-11-04T10:37:52', '_id': '6909d78066237910ebf4fcff'}
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:36:00', 'camera_id': 2}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251105_frame.jpg
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251105_frame.jpg
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:07:52 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1440 seconds
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:07:52 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [286, 180, 326, 244], Conf: 0.75
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [298, 141, 323, 177], Conf: 0.58
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [353, 87, 374, 117], Conf: 0.54
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [286, 180, 326, 244]}, {'label': 'no_hardhat', 'location': [298, 141, 323, 177]}, {'label': 'no_hardhat', 'location': [353, 87, 374, 117]}], 'inference_time': 0.14402031898498535}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [286, 180, 326, 244]}, {'label': 'no_hardhat', 'location': [298, 141, 323, 177]}, {'label': 'no_hardhat', 'location': [353, 87, 374, 117]}], 'inference_time': 0.14402031898498535}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251105_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251105_frame.jpg', 'image_size': 640}
2025-11-04 16:07:52 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251105_frame.jpg"}
2025-11-04 16:07:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:36:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:07:52 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:37:00', 'camera_id': 1}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251105_frame.jpg
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251105_frame.jpg
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:08:52 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1403 seconds
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:08:52 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [415, 81, 438, 111], Conf: 0.73
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [444, 87, 466, 117], Conf: 0.65
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [455, 119, 480, 152], Conf: 0.61
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [298, 79, 339, 130], Conf: 0.57
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [415, 81, 438, 111]}, {'label': 'no_hardhat', 'location': [444, 87, 466, 117]}, {'label': 'no_hardhat', 'location': [455, 119, 480, 152]}, {'label': 'no_vest', 'location': [298, 79, 339, 130]}], 'inference_time': 0.1402573585510254}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [415, 81, 438, 111]}, {'label': 'no_hardhat', 'location': [444, 87, 466, 117]}, {'label': 'no_hardhat', 'location': [455, 119, 480, 152]}, {'label': 'no_vest', 'location': [298, 79, 339, 130]}], 'inference_time': 0.1402573585510254}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251105_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251105_frame.jpg', 'image_size': 640}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251105_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:08:52 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251105_frame.jpg
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251105_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251105_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [415.0, 81.0, 438.0, 111.0]}, {'label': 'no_hardhat', 'location': [444.0, 87.0, 466.0, 117.0]}, {'label': 'no_hardhat', 'location': [455.0, 119.0, 480.0, 152.0]}, {'label': 'no_vest', 'location': [298.0, 79.0, 339.0, 130.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:37:00+00:00', 'created_date': '2025-11-04T10:38:52.861000', 'updated_date': '2025-11-04T10:38:52', '_id': '6909d7bc66237910ebf4fd00'}
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:37:00', 'camera_id': 2}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251106_frame.jpg
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251106_frame.jpg
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:08:52 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:08:52 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:08:52 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1369 seconds
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:08:53 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 139, 342, 233], Conf: 0.71
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 84, 318, 133], Conf: 0.70
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 86, 374, 118], Conf: 0.65
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [288, 139, 342, 233]}, {'label': 'no_hardhat', 'location': [289, 84, 318, 133]}, {'label': 'no_hardhat', 'location': [352, 86, 374, 118]}], 'inference_time': 0.13686370849609375}
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [288, 139, 342, 233]}, {'label': 'no_hardhat', 'location': [289, 84, 318, 133]}, {'label': 'no_hardhat', 'location': [352, 86, 374, 118]}], 'inference_time': 0.13686370849609375}
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251106_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251106_frame.jpg', 'image_size': 640}
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251106_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:08:53 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251106_frame.jpg
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251106_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251106_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [288.0, 139.0, 342.0, 233.0]}, {'label': 'no_hardhat', 'location': [289.0, 84.0, 318.0, 133.0]}, {'label': 'no_hardhat', 'location': [352.0, 86.0, 374.0, 118.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:37:00+00:00', 'created_date': '2025-11-04T10:38:53.090000', 'updated_date': '2025-11-04T10:38:53', '_id': '6909d7bd66237910ebf4fd01'}
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:08:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:37:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:08:53 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:38:00', 'camera_id': 1}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251106_frame.jpg
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251106_frame.jpg
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:09:53 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1149 seconds
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:09:53 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [441, 34, 463, 67], Conf: 0.71
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 82, 343, 133], Conf: 0.62
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [420, 105, 443, 136], Conf: 0.62
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 343, 80], Conf: 0.61
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [449, 121, 477, 155], Conf: 0.55
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [441, 34, 463, 67]}, {'label': 'no_vest', 'location': [302, 82, 343, 133]}, {'label': 'no_hardhat', 'location': [420, 105, 443, 136]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'hardhat', 'location': [449, 121, 477, 155]}], 'inference_time': 0.11494112014770508}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [441, 34, 463, 67]}, {'label': 'no_vest', 'location': [302, 82, 343, 133]}, {'label': 'no_hardhat', 'location': [420, 105, 443, 136]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'hardhat', 'location': [449, 121, 477, 155]}], 'inference_time': 0.11494112014770508}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=5 after=3
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251106_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251106_frame.jpg', 'image_size': 640}
2025-11-04 16:09:53 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251106_frame.jpg"}
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:38:00', 'camera_id': 2}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251107_frame.jpg
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251107_frame.jpg
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:09:53 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1671 seconds
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:09:53 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [361, 289, 420, 369], Conf: 0.63
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [279, 130, 318, 186], Conf: 0.63
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 85, 373, 111], Conf: 0.61
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [334, 119, 367, 167], Conf: 0.61
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 95, 312, 124], Conf: 0.60
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [361, 289, 420, 369]}, {'label': 'no_vest', 'location': [279, 130, 318, 186]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 111]}, {'label': 'no_vest', 'location': [334, 119, 367, 167]}, {'label': 'no_hardhat', 'location': [289, 95, 312, 124]}], 'inference_time': 0.1671299934387207}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [361, 289, 420, 369]}, {'label': 'no_vest', 'location': [279, 130, 318, 186]}, {'label': 'no_hardhat', 'location': [352, 85, 373, 111]}, {'label': 'no_vest', 'location': [334, 119, 367, 167]}, {'label': 'no_hardhat', 'location': [289, 95, 312, 124]}], 'inference_time': 0.1671299934387207}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251107_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251107_frame.jpg', 'image_size': 640}
2025-11-04 16:09:53 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251107_frame.jpg"}
2025-11-04 16:09:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:38:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:09:53 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:39:00', 'camera_id': 1}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251107_frame.jpg
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251107_frame.jpg
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:10:53 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1090 seconds
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:10:53 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [301, 81, 343, 133], Conf: 0.65
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [431, 223, 484, 293], Conf: 0.61
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 343, 80], Conf: 0.51
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [301, 81, 343, 133]}, {'label': 'no_vest', 'location': [431, 223, 484, 293]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.10898852348327637}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [301, 81, 343, 133]}, {'label': 'no_vest', 'location': [431, 223, 484, 293]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.10898852348327637}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251107_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251107_frame.jpg', 'image_size': 640}
2025-11-04 16:10:53 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251107_frame.jpg"}
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:39:00', 'camera_id': 2}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251108_frame.jpg
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251108_frame.jpg
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:10:53 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:10:53 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:10:53 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1414 seconds
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:10:54 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [255, 116, 304, 208], Conf: 0.80
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 82, 295, 109], Conf: 0.72
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [343, 149, 379, 203], Conf: 0.69
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [375, 111, 400, 147], Conf: 0.54
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 109, 379, 146], Conf: 0.51
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [255, 116, 304, 208]}, {'label': 'no_hardhat', 'location': [270, 82, 295, 109]}, {'label': 'no_vest', 'location': [343, 149, 379, 203]}, {'label': 'no_hardhat', 'location': [375, 111, 400, 147]}, {'label': 'no_hardhat', 'location': [352, 109, 379, 146]}], 'inference_time': 0.14136981964111328}
2025-11-04 16:10:54 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [255, 116, 304, 208]}, {'label': 'no_hardhat', 'location': [270, 82, 295, 109]}, {'label': 'no_vest', 'location': [343, 149, 379, 203]}, {'label': 'no_hardhat', 'location': [375, 111, 400, 147]}, {'label': 'no_hardhat', 'location': [352, 109, 379, 146]}], 'inference_time': 0.14136981964111328}
2025-11-04 16:10:54 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:10:54 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251108_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251108_frame.jpg', 'image_size': 640}
2025-11-04 16:10:54 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251108_frame.jpg"}
2025-11-04 16:10:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:39:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:10:54 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:10:54 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:40:00', 'camera_id': 1}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251108_frame.jpg
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251108_frame.jpg
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:11:54 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1150 seconds
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:11:54 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [448, 112, 470, 139], Conf: 0.70
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 81, 342, 131], Conf: 0.66
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 342, 80], Conf: 0.54
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [448, 112, 470, 139]}, {'label': 'no_vest', 'location': [302, 81, 342, 131]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.11503958702087402}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [448, 112, 470, 139]}, {'label': 'no_vest', 'location': [302, 81, 342, 131]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.11503958702087402}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251108_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251108_frame.jpg', 'image_size': 640}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251108_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:11:54 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251108_frame.jpg
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251108_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251108_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [448.0, 112.0, 470.0, 139.0]}, {'label': 'no_vest', 'location': [302.0, 81.0, 342.0, 131.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:40:00+00:00', 'created_date': '2025-11-04T10:41:54.318000', 'updated_date': '2025-11-04T10:41:54', '_id': '6909d87266237910ebf4fd07'}
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:40:00', 'camera_id': 2}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251109_frame.jpg
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251109_frame.jpg
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:11:54 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1354 seconds
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:11:54 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [256, 119, 312, 225], Conf: 0.82
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 67, 303, 111], Conf: 0.78
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [349, 85, 377, 124], Conf: 0.77
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [335, 129, 379, 207], Conf: 0.75
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [256, 119, 312, 225]}, {'label': 'no_hardhat', 'location': [270, 67, 303, 111]}, {'label': 'no_hardhat', 'location': [349, 85, 377, 124]}, {'label': 'no_vest', 'location': [335, 129, 379, 207]}], 'inference_time': 0.1354055404663086}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [256, 119, 312, 225]}, {'label': 'no_hardhat', 'location': [270, 67, 303, 111]}, {'label': 'no_hardhat', 'location': [349, 85, 377, 124]}, {'label': 'no_vest', 'location': [335, 129, 379, 207]}], 'inference_time': 0.1354055404663086}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251109_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251109_frame.jpg', 'image_size': 640}
2025-11-04 16:11:54 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251109_frame.jpg"}
2025-11-04 16:11:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:40:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:11:54 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:41:00', 'camera_id': 1}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251109_frame.jpg
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251109_frame.jpg
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:12:54 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1143 seconds
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:12:54 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 82, 342, 133], Conf: 0.66
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [446, 110, 467, 135], Conf: 0.61
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 343, 80], Conf: 0.56
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [302, 82, 342, 133]}, {'label': 'no_hardhat', 'location': [446, 110, 467, 135]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.11433768272399902}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [302, 82, 342, 133]}, {'label': 'no_hardhat', 'location': [446, 110, 467, 135]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}], 'inference_time': 0.11433768272399902}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251109_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251109_frame.jpg', 'image_size': 640}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251109_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:12:54 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251109_frame.jpg
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251109_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251109_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [302.0, 82.0, 342.0, 133.0]}, {'label': 'no_hardhat', 'location': [446.0, 110.0, 467.0, 135.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:41:00+00:00', 'created_date': '2025-11-04T10:42:54.787000', 'updated_date': '2025-11-04T10:42:54', '_id': '6909d8ae66237910ebf4fd09'}
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:41:00', 'camera_id': 2}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251110_frame.jpg
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251110_frame.jpg
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:12:54 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1183 seconds
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:12:54 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [258, 118, 314, 228], Conf: 0.81
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [333, 130, 377, 209], Conf: 0.70
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [267, 70, 301, 111], Conf: 0.61
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 84, 380, 119], Conf: 0.60
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [258, 118, 314, 228]}, {'label': 'no_vest', 'location': [333, 130, 377, 209]}, {'label': 'no_hardhat', 'location': [267, 70, 301, 111]}, {'label': 'no_hardhat', 'location': [351, 84, 380, 119]}], 'inference_time': 0.1182718276977539}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [258, 118, 314, 228]}, {'label': 'no_vest', 'location': [333, 130, 377, 209]}, {'label': 'no_hardhat', 'location': [267, 70, 301, 111]}, {'label': 'no_hardhat', 'location': [351, 84, 380, 119]}], 'inference_time': 0.1182718276977539}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251110_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251110_frame.jpg', 'image_size': 640}
2025-11-04 16:12:54 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251110_frame.jpg"}
2025-11-04 16:12:54 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:41:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:12:54 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:42:00', 'camera_id': 1}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251110_frame.jpg
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251110_frame.jpg
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:13:55 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1121 seconds
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:13:55 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [450, 108, 470, 135], Conf: 0.68
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 82, 343, 133], Conf: 0.66
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 343, 80], Conf: 0.59
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [450, 108, 470, 135]}, {'label': 'no_vest', 'location': [302, 82, 343, 133]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}], 'inference_time': 0.11206459999084473}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [450, 108, 470, 135]}, {'label': 'no_vest', 'location': [302, 82, 343, 133]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}], 'inference_time': 0.11206459999084473}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251110_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251110_frame.jpg', 'image_size': 640}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251110_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:13:55 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251110_frame.jpg
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251110_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251110_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [450.0, 108.0, 470.0, 135.0]}, {'label': 'no_vest', 'location': [302.0, 82.0, 343.0, 133.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:42:00+00:00', 'created_date': '2025-11-04T10:43:55.224000', 'updated_date': '2025-11-04T10:43:55', '_id': '6909d8eb66237910ebf4fd0b'}
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:42:00', 'camera_id': 2}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251111_frame.jpg
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251111_frame.jpg
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:13:55 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1186 seconds
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:13:55 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [256, 120, 309, 223], Conf: 0.80
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [336, 125, 375, 208], Conf: 0.68
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [352, 84, 373, 109], Conf: 0.64
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 70, 299, 112], Conf: 0.58
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [256, 120, 309, 223]}, {'label': 'no_vest', 'location': [336, 125, 375, 208]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 109]}, {'label': 'no_hardhat', 'location': [270, 70, 299, 112]}], 'inference_time': 0.11861968040466309}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [256, 120, 309, 223]}, {'label': 'no_vest', 'location': [336, 125, 375, 208]}, {'label': 'no_hardhat', 'location': [352, 84, 373, 109]}, {'label': 'no_hardhat', 'location': [270, 70, 299, 112]}], 'inference_time': 0.11861968040466309}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251111_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251111_frame.jpg', 'image_size': 640}
2025-11-04 16:13:55 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251111_frame.jpg"}
2025-11-04 16:13:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:42:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:13:55 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:43:00', 'camera_id': 1}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251111_frame.jpg
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251111_frame.jpg
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:14:55 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1284 seconds
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:14:55 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 81, 343, 134], Conf: 0.68
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [421, 97, 457, 147], Conf: 0.62
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 343, 80], Conf: 0.61
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [429, 70, 448, 94], Conf: 0.60
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [303, 81, 343, 134]}, {'label': 'no_vest', 'location': [421, 97, 457, 147]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}, {'label': 'no_hardhat', 'location': [429, 70, 448, 94]}], 'inference_time': 0.12839818000793457}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [303, 81, 343, 134]}, {'label': 'no_vest', 'location': [421, 97, 457, 147]}, {'label': 'hardhat', 'location': [317, 53, 343, 80]}, {'label': 'no_hardhat', 'location': [429, 70, 448, 94]}], 'inference_time': 0.12839818000793457}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=3
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251111_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251111_frame.jpg', 'image_size': 640}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251111_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:14:55 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251111_frame.jpg
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251111_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251111_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [303.0, 81.0, 343.0, 134.0]}, {'label': 'no_vest', 'location': [421.0, 97.0, 457.0, 147.0]}, {'label': 'no_hardhat', 'location': [429.0, 70.0, 448.0, 94.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:43:00+00:00', 'created_date': '2025-11-04T10:44:55.686000', 'updated_date': '2025-11-04T10:44:55', '_id': '6909d92766237910ebf4fd0d'}
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:43:00', 'camera_id': 2}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251112_frame.jpg
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251112_frame.jpg
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:14:55 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1163 seconds
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:14:55 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [267, 134, 319, 231], Conf: 0.79
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [359, 233, 399, 285], Conf: 0.71
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [353, 289, 412, 369], Conf: 0.71
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [280, 95, 309, 127], Conf: 0.71
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [333, 133, 374, 216], Conf: 0.68
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [349, 85, 375, 121], Conf: 0.63
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [267, 134, 319, 231]}, {'label': 'no_hardhat', 'location': [359, 233, 399, 285]}, {'label': 'no_vest', 'location': [353, 289, 412, 369]}, {'label': 'no_hardhat', 'location': [280, 95, 309, 127]}, {'label': 'no_vest', 'location': [333, 133, 374, 216]}, {'label': 'no_hardhat', 'location': [349, 85, 375, 121]}], 'inference_time': 0.11632132530212402}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [267, 134, 319, 231]}, {'label': 'no_hardhat', 'location': [359, 233, 399, 285]}, {'label': 'no_vest', 'location': [353, 289, 412, 369]}, {'label': 'no_hardhat', 'location': [280, 95, 309, 127]}, {'label': 'no_vest', 'location': [333, 133, 374, 216]}, {'label': 'no_hardhat', 'location': [349, 85, 375, 121]}], 'inference_time': 0.11632132530212402}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251112_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251112_frame.jpg', 'image_size': 640}
2025-11-04 16:14:55 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251112_frame.jpg"}
2025-11-04 16:14:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:43:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:14:55 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:44:00', 'camera_id': 1}
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251112_frame.jpg
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251112_frame.jpg
2025-11-04 16:15:55 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:15:55 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:15:56 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1180 seconds
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:15:56 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [317, 53, 343, 80], Conf: 0.61
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [306, 81, 344, 133], Conf: 0.58
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [317, 53, 343, 80]}, {'label': 'no_vest', 'location': [306, 81, 344, 133]}], 'inference_time': 0.11800980567932129}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [317, 53, 343, 80]}, {'label': 'no_vest', 'location': [306, 81, 344, 133]}], 'inference_time': 0.11800980567932129}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251112_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251112_frame.jpg', 'image_size': 640}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251112_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:15:56 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251112_frame.jpg
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251112_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251112_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [306.0, 81.0, 344.0, 133.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:44:00+00:00', 'created_date': '2025-11-04T10:45:56.150000', 'updated_date': '2025-11-04T10:45:56', '_id': '6909d96466237910ebf4fd0f'}
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:44:00', 'camera_id': 2}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251113_frame.jpg
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251113_frame.jpg
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:15:56 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1231 seconds
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:15:56 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [274, 134, 326, 233], Conf: 0.82
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [345, 85, 375, 127], Conf: 0.81
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [338, 133, 389, 215], Conf: 0.76
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [363, 244, 400, 292], Conf: 0.71
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [282, 101, 309, 128], Conf: 0.67
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [274, 134, 326, 233]}, {'label': 'no_hardhat', 'location': [345, 85, 375, 127]}, {'label': 'no_vest', 'location': [338, 133, 389, 215]}, {'label': 'no_hardhat', 'location': [363, 244, 400, 292]}, {'label': 'no_hardhat', 'location': [282, 101, 309, 128]}], 'inference_time': 0.12308764457702637}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [274, 134, 326, 233]}, {'label': 'no_hardhat', 'location': [345, 85, 375, 127]}, {'label': 'no_vest', 'location': [338, 133, 389, 215]}, {'label': 'no_hardhat', 'location': [363, 244, 400, 292]}, {'label': 'no_hardhat', 'location': [282, 101, 309, 128]}], 'inference_time': 0.12308764457702637}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251113_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251113_frame.jpg', 'image_size': 640}
2025-11-04 16:15:56 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251113_frame.jpg"}
2025-11-04 16:15:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:44:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:15:56 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:45:00', 'camera_id': 1}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251113_frame.jpg
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251113_frame.jpg
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:16:56 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1248 seconds
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:16:56 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [422, 77, 443, 106], Conf: 0.53
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 342, 80], Conf: 0.51
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [422, 77, 443, 106]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.12482047080993652}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [422, 77, 443, 106]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.12482047080993652}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251113_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251113_frame.jpg', 'image_size': 640}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251113_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:16:56 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251113_frame.jpg
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251113_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251113_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [422.0, 77.0, 443.0, 106.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:45:00+00:00', 'created_date': '2025-11-04T10:46:56.618000', 'updated_date': '2025-11-04T10:46:56', '_id': '6909d9a066237910ebf4fd11'}
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:45:00', 'camera_id': 2}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251114_frame.jpg
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251114_frame.jpg
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:16:56 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1396 seconds
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:16:56 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [278, 82, 309, 127], Conf: 0.81
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [272, 134, 325, 231], Conf: 0.80
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 85, 373, 111], Conf: 0.69
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [442, 347, 525, 468], Conf: 0.63
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [357, 290, 412, 362], Conf: 0.59
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [278, 82, 309, 127]}, {'label': 'no_vest', 'location': [272, 134, 325, 231]}, {'label': 'no_hardhat', 'location': [351, 85, 373, 111]}, {'label': 'no_vest', 'location': [442, 347, 525, 468]}, {'label': 'no_vest', 'location': [357, 290, 412, 362]}], 'inference_time': 0.13962030410766602}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [278, 82, 309, 127]}, {'label': 'no_vest', 'location': [272, 134, 325, 231]}, {'label': 'no_hardhat', 'location': [351, 85, 373, 111]}, {'label': 'no_vest', 'location': [442, 347, 525, 468]}, {'label': 'no_vest', 'location': [357, 290, 412, 362]}], 'inference_time': 0.13962030410766602}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251114_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251114_frame.jpg', 'image_size': 640}
2025-11-04 16:16:56 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251114_frame.jpg"}
2025-11-04 16:16:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:45:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:16:56 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:46:00', 'camera_id': 1}
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251114_frame.jpg
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251114_frame.jpg
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:17:56 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:17:56 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:17:56 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1592 seconds
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:17:57 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [464, 95, 491, 137], Conf: 0.60
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [415, 82, 444, 108], Conf: 0.59
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [285, 121, 330, 172], Conf: 0.53
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [464, 95, 491, 137]}, {'label': 'no_hardhat', 'location': [415, 82, 444, 108]}, {'label': 'no_vest', 'location': [285, 121, 330, 172]}], 'inference_time': 0.15917372703552246}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [464, 95, 491, 137]}, {'label': 'no_hardhat', 'location': [415, 82, 444, 108]}, {'label': 'no_vest', 'location': [285, 121, 330, 172]}], 'inference_time': 0.15917372703552246}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251114_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251114_frame.jpg', 'image_size': 640}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251114_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:17:57 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251114_frame.jpg
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251114_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251114_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [464.0, 95.0, 491.0, 137.0]}, {'label': 'no_hardhat', 'location': [415.0, 82.0, 444.0, 108.0]}, {'label': 'no_vest', 'location': [285.0, 121.0, 330.0, 172.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:46:00+00:00', 'created_date': '2025-11-04T10:47:57.128000', 'updated_date': '2025-11-04T10:47:57', '_id': '6909d9dd66237910ebf4fd12'}
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:46:00', 'camera_id': 2}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251115_frame.jpg
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251115_frame.jpg
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:17:57 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1198 seconds
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:17:57 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [334, 83, 356, 111], Conf: 0.75
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [294, 101, 315, 134], Conf: 0.67
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [289, 137, 325, 190], Conf: 0.60
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [344, 148, 382, 209], Conf: 0.52
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [334, 83, 356, 111]}, {'label': 'no_hardhat', 'location': [294, 101, 315, 134]}, {'label': 'no_vest', 'location': [289, 137, 325, 190]}, {'label': 'no_vest', 'location': [344, 148, 382, 209]}], 'inference_time': 0.11976408958435059}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [334, 83, 356, 111]}, {'label': 'no_hardhat', 'location': [294, 101, 315, 134]}, {'label': 'no_vest', 'location': [289, 137, 325, 190]}, {'label': 'no_vest', 'location': [344, 148, 382, 209]}], 'inference_time': 0.11976408958435059}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251115_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251115_frame.jpg', 'image_size': 640}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251115_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:17:57 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251115_frame.jpg
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251115_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251115_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [334.0, 83.0, 356.0, 111.0]}, {'label': 'no_hardhat', 'location': [294.0, 101.0, 315.0, 134.0]}, {'label': 'no_vest', 'location': [289.0, 137.0, 325.0, 190.0]}, {'label': 'no_vest', 'location': [344.0, 148.0, 382.0, 209.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:46:00+00:00', 'created_date': '2025-11-04T10:47:57.318000', 'updated_date': '2025-11-04T10:47:57', '_id': '6909d9dd66237910ebf4fd13'}
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:17:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:46:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:17:57 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:47:00', 'camera_id': 1}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251115_frame.jpg
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251115_frame.jpg
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:18:57 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1354 seconds
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: False
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [], 'inference_time': 0.13536930084228516}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [], 'inference_time': 0.13536930084228516}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=0 after=0
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:339 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:47:00', 'camera_id': 2}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251116_frame.jpg
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251116_frame.jpg
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:18:57 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1152 seconds
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:18:57 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [350, 111, 375, 145], Conf: 0.71
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [292, 103, 315, 134], Conf: 0.71
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [70, 586, 133, 640], Conf: 0.67
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [292, 136, 322, 186], Conf: 0.59
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [344, 149, 376, 200], Conf: 0.59
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [277, 84, 297, 111], Conf: 0.56
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [350, 111, 375, 145]}, {'label': 'no_hardhat', 'location': [292, 103, 315, 134]}, {'label': 'no_hardhat', 'location': [70, 586, 133, 640]}, {'label': 'no_vest', 'location': [292, 136, 322, 186]}, {'label': 'no_vest', 'location': [344, 149, 376, 200]}, {'label': 'no_hardhat', 'location': [277, 84, 297, 111]}], 'inference_time': 0.11520767211914062}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [350, 111, 375, 145]}, {'label': 'no_hardhat', 'location': [292, 103, 315, 134]}, {'label': 'no_hardhat', 'location': [70, 586, 133, 640]}, {'label': 'no_vest', 'location': [292, 136, 322, 186]}, {'label': 'no_vest', 'location': [344, 149, 376, 200]}, {'label': 'no_hardhat', 'location': [277, 84, 297, 111]}], 'inference_time': 0.11520767211914062}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251116_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251116_frame.jpg', 'image_size': 640}
2025-11-04 16:18:57 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251116_frame.jpg"}
2025-11-04 16:18:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:47:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:18:57 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:48:00', 'camera_id': 1}
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251116_frame.jpg
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251116_frame.jpg
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:19:57 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:19:57 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:19:57 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1341 seconds
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:19:58 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [425, 85, 456, 123], Conf: 0.70
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [427, 126, 472, 213], Conf: 0.68
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [289, 121, 332, 176], Conf: 0.56
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [307, 79, 340, 120], Conf: 0.52
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [425, 85, 456, 123]}, {'label': 'no_vest', 'location': [427, 126, 472, 213]}, {'label': 'no_vest', 'location': [289, 121, 332, 176]}, {'label': 'no_vest', 'location': [307, 79, 340, 120]}], 'inference_time': 0.13414764404296875}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [425, 85, 456, 123]}, {'label': 'no_vest', 'location': [427, 126, 472, 213]}, {'label': 'no_vest', 'location': [289, 121, 332, 176]}, {'label': 'no_vest', 'location': [307, 79, 340, 120]}], 'inference_time': 0.13414764404296875}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251116_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251116_frame.jpg', 'image_size': 640}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251116_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:19:58 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251116_frame.jpg
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251116_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251116_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [425.0, 85.0, 456.0, 123.0]}, {'label': 'no_vest', 'location': [427.0, 126.0, 472.0, 213.0]}, {'label': 'no_vest', 'location': [289.0, 121.0, 332.0, 176.0]}, {'label': 'no_vest', 'location': [307.0, 79.0, 340.0, 120.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:48:00+00:00', 'created_date': '2025-11-04T10:49:58.061000', 'updated_date': '2025-11-04T10:49:58', '_id': '6909da5666237910ebf4fd15'}
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:48:00', 'camera_id': 2}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251117_frame.jpg
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251117_frame.jpg
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:19:58 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1495 seconds
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:19:58 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [71, 585, 137, 640], Conf: 0.67
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [324, 279, 381, 357], Conf: 0.56
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [71, 585, 137, 640]}, {'label': 'no_vest', 'location': [324, 279, 381, 357]}], 'inference_time': 0.14947247505187988}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [71, 585, 137, 640]}, {'label': 'no_vest', 'location': [324, 279, 381, 357]}], 'inference_time': 0.14947247505187988}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251117_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251117_frame.jpg', 'image_size': 640}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251117_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:19:58 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251117_frame.jpg
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251117_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251117_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [71.0, 585.0, 137.0, 640.0]}, {'label': 'no_vest', 'location': [324.0, 279.0, 381.0, 357.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:48:00+00:00', 'created_date': '2025-11-04T10:49:58.298000', 'updated_date': '2025-11-04T10:49:58', '_id': '6909da5666237910ebf4fd16'}
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:19:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:48:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:19:58 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:49:00', 'camera_id': 1}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251117_frame.jpg
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251117_frame.jpg
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1345 seconds
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [427, 131, 474, 207], Conf: 0.73
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [304, 80, 344, 133], Conf: 0.61
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [448, 91, 475, 127], Conf: 0.60
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [427, 131, 474, 207]}, {'label': 'no_vest', 'location': [304, 80, 344, 133]}, {'label': 'no_hardhat', 'location': [448, 91, 475, 127]}], 'inference_time': 0.13453197479248047}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [427, 131, 474, 207]}, {'label': 'no_vest', 'location': [304, 80, 344, 133]}, {'label': 'no_hardhat', 'location': [448, 91, 475, 127]}], 'inference_time': 0.13453197479248047}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251117_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251117_frame.jpg', 'image_size': 640}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251117_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251117_frame.jpg
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251117_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251117_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [427.0, 131.0, 474.0, 207.0]}, {'label': 'no_vest', 'location': [304.0, 80.0, 344.0, 133.0]}, {'label': 'no_hardhat', 'location': [448.0, 91.0, 475.0, 127.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:49:00+00:00', 'created_date': '2025-11-04T10:50:58.587000', 'updated_date': '2025-11-04T10:50:58', '_id': '6909da9266237910ebf4fd17'}
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:49:00', 'camera_id': 2}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251118_frame.jpg
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251118_frame.jpg
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1212 seconds
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [281, 191, 323, 263], Conf: 0.75
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [373, 120, 396, 149], Conf: 0.72
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [293, 102, 316, 132], Conf: 0.66
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [0, 529, 49, 639], Conf: 0.56
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [289, 136, 322, 185], Conf: 0.51
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [281, 191, 323, 263]}, {'label': 'no_hardhat', 'location': [373, 120, 396, 149]}, {'label': 'no_hardhat', 'location': [293, 102, 316, 132]}, {'label': 'no_vest', 'location': [0, 529, 49, 639]}, {'label': 'no_vest', 'location': [289, 136, 322, 185]}], 'inference_time': 0.1211702823638916}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [281, 191, 323, 263]}, {'label': 'no_hardhat', 'location': [373, 120, 396, 149]}, {'label': 'no_hardhat', 'location': [293, 102, 316, 132]}, {'label': 'no_vest', 'location': [0, 529, 49, 639]}, {'label': 'no_vest', 'location': [289, 136, 322, 185]}], 'inference_time': 0.1211702823638916}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251118_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251118_frame.jpg', 'image_size': 640}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251118_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:20:58 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251118_frame.jpg
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251118_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251118_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [281.0, 191.0, 323.0, 263.0]}, {'label': 'no_hardhat', 'location': [373.0, 120.0, 396.0, 149.0]}, {'label': 'no_hardhat', 'location': [293.0, 102.0, 316.0, 132.0]}, {'label': 'no_vest', 'location': [0.0, 529.0, 49.0, 639.0]}, {'label': 'no_vest', 'location': [289.0, 136.0, 322.0, 185.0]}]}, 'counts': {'no_vest': 3, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:49:00+00:00', 'created_date': '2025-11-04T10:50:58.789000', 'updated_date': '2025-11-04T10:50:58', '_id': '6909da9266237910ebf4fd18'}
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:20:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:49:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:20:58 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:50:00', 'camera_id': 1}
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251118_frame.jpg
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251118_frame.jpg
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:21:58 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:21:58 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:21:58 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1260 seconds
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:21:59 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [431, 83, 462, 112], Conf: 0.67
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [287, 121, 332, 172], Conf: 0.55
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [431, 83, 462, 112]}, {'label': 'no_vest', 'location': [287, 121, 332, 172]}], 'inference_time': 0.12603759765625}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [431, 83, 462, 112]}, {'label': 'no_vest', 'location': [287, 121, 332, 172]}], 'inference_time': 0.12603759765625}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251118_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251118_frame.jpg', 'image_size': 640}
2025-11-04 16:21:59 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762251118_frame.jpg"}
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:50:00', 'camera_id': 2}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251119_frame.jpg
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251119_frame.jpg
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:21:59 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1210 seconds
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:21:59 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 110, 367, 144], Conf: 0.67
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [342, 246, 372, 278], Conf: 0.61
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [339, 110, 367, 144]}, {'label': 'no_hardhat', 'location': [342, 246, 372, 278]}], 'inference_time': 0.1210317611694336}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [339, 110, 367, 144]}, {'label': 'no_hardhat', 'location': [342, 246, 372, 278]}], 'inference_time': 0.1210317611694336}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251119_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251119_frame.jpg', 'image_size': 640}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251119_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:21:59 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251119_frame.jpg
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251119_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251119_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [339.0, 110.0, 367.0, 144.0]}, {'label': 'no_hardhat', 'location': [342.0, 246.0, 372.0, 278.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:50:00+00:00', 'created_date': '2025-11-04T10:51:59.250000', 'updated_date': '2025-11-04T10:51:59', '_id': '6909dacf66237910ebf4fd1a'}
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:21:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:50:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:21:59 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:51:00', 'camera_id': 1}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251119_frame.jpg
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251119_frame.jpg
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1061 seconds
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [426, 83, 451, 116], Conf: 0.77
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [444, 120, 478, 157], Conf: 0.70
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [284, 121, 330, 185], Conf: 0.63
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [317, 52, 343, 80], Conf: 0.62
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [461, 168, 493, 210], Conf: 0.53
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [426, 83, 451, 116]}, {'label': 'no_hardhat', 'location': [444, 120, 478, 157]}, {'label': 'no_vest', 'location': [284, 121, 330, 185]}, {'label': 'no_hardhat', 'location': [317, 52, 343, 80]}, {'label': 'no_hardhat', 'location': [461, 168, 493, 210]}], 'inference_time': 0.1061239242553711}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [426, 83, 451, 116]}, {'label': 'no_hardhat', 'location': [444, 120, 478, 157]}, {'label': 'no_vest', 'location': [284, 121, 330, 185]}, {'label': 'no_hardhat', 'location': [317, 52, 343, 80]}, {'label': 'no_hardhat', 'location': [461, 168, 493, 210]}], 'inference_time': 0.1061239242553711}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251119_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251119_frame.jpg', 'image_size': 640}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251119_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251119_frame.jpg
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251119_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251119_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [426.0, 83.0, 451.0, 116.0]}, {'label': 'no_hardhat', 'location': [444.0, 120.0, 478.0, 157.0]}, {'label': 'no_vest', 'location': [284.0, 121.0, 330.0, 185.0]}, {'label': 'no_hardhat', 'location': [317.0, 52.0, 343.0, 80.0]}, {'label': 'no_hardhat', 'location': [461.0, 168.0, 493.0, 210.0]}]}, 'counts': {'no_hardhat': 4, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:51:00+00:00', 'created_date': '2025-11-04T10:52:59.503000', 'updated_date': '2025-11-04T10:52:59', '_id': '6909db0b66237910ebf4fd1b'}
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:51:00', 'camera_id': 2}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251120_frame.jpg
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251120_frame.jpg
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1207 seconds
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [301, 204, 338, 266], Conf: 0.56
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [290, 102, 311, 133], Conf: 0.55
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [301, 204, 338, 266]}, {'label': 'no_hardhat', 'location': [290, 102, 311, 133]}], 'inference_time': 0.12066149711608887}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [301, 204, 338, 266]}, {'label': 'no_hardhat', 'location': [290, 102, 311, 133]}], 'inference_time': 0.12066149711608887}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251120_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251120_frame.jpg', 'image_size': 640}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251120_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:22:59 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251120_frame.jpg
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251120_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251120_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [301.0, 204.0, 338.0, 266.0]}, {'label': 'no_hardhat', 'location': [290.0, 102.0, 311.0, 133.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:51:00+00:00', 'created_date': '2025-11-04T10:52:59.700000', 'updated_date': '2025-11-04T10:52:59', '_id': '6909db0b66237910ebf4fd1c'}
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:22:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:51:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:22:59 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:52:00', 'camera_id': 1}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251120_frame.jpg
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251120_frame.jpg
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:23:59 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1179 seconds
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:23:59 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [104, 82, 143, 127], Conf: 0.56
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [307, 79, 340, 125], Conf: 0.51
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [104, 82, 143, 127]}, {'label': 'no_vest', 'location': [307, 79, 340, 125]}], 'inference_time': 0.1179044246673584}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [104, 82, 143, 127]}, {'label': 'no_vest', 'location': [307, 79, 340, 125]}], 'inference_time': 0.1179044246673584}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251120_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251120_frame.jpg', 'image_size': 640}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251120_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:23:59 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251120_frame.jpg
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251120_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251120_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [104.0, 82.0, 143.0, 127.0]}, {'label': 'no_vest', 'location': [307.0, 79.0, 340.0, 125.0]}]}, 'counts': {'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:52:00+00:00', 'created_date': '2025-11-04T10:53:59.963000', 'updated_date': '2025-11-04T10:53:59', '_id': '6909db4766237910ebf4fd1e'}
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:52:00', 'camera_id': 2}
2025-11-04 16:23:59 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:23:59 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251121_frame.jpg
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251121_frame.jpg
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:24:00 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1296 seconds
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:24:00 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [347, 85, 370, 114], Conf: 0.71
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [342, 138, 383, 196], Conf: 0.55
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [282, 83, 301, 106], Conf: 0.51
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [347, 85, 370, 114]}, {'label': 'no_vest', 'location': [342, 138, 383, 196]}, {'label': 'no_hardhat', 'location': [282, 83, 301, 106]}], 'inference_time': 0.12961935997009277}
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [347, 85, 370, 114]}, {'label': 'no_vest', 'location': [342, 138, 383, 196]}, {'label': 'no_hardhat', 'location': [282, 83, 301, 106]}], 'inference_time': 0.12961935997009277}
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251121_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251121_frame.jpg', 'image_size': 640}
2025-11-04 16:24:00 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251121_frame.jpg"}
2025-11-04 16:24:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:24:00 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:54:00', 'camera_id': 1}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251122_frame.jpg
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251122_frame.jpg
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1104 seconds
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [437, 84, 455, 109], Conf: 0.66
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [284, 125, 328, 181], Conf: 0.62
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [437, 84, 455, 109]}, {'label': 'no_vest', 'location': [284, 125, 328, 181]}], 'inference_time': 0.11039376258850098}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [437, 84, 455, 109]}, {'label': 'no_vest', 'location': [284, 125, 328, 181]}], 'inference_time': 0.11039376258850098}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251122_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251122_frame.jpg', 'image_size': 640}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251122_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251122_frame.jpg
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251122_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251122_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [437.0, 84.0, 455.0, 109.0]}, {'label': 'no_vest', 'location': [284.0, 125.0, 328.0, 181.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:54:00+00:00', 'created_date': '2025-11-04T10:55:00.424000', 'updated_date': '2025-11-04T10:55:00', '_id': '6909db8466237910ebf4fd1f'}
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:54:00', 'camera_id': 2}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251123_frame.jpg
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251123_frame.jpg
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1455 seconds
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [342, 145, 377, 200], Conf: 0.64
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [287, 130, 318, 168], Conf: 0.51
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [342, 145, 377, 200]}, {'label': 'no_vest', 'location': [287, 130, 318, 168]}], 'inference_time': 0.14550995826721191}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [342, 145, 377, 200]}, {'label': 'no_vest', 'location': [287, 130, 318, 168]}], 'inference_time': 0.14550995826721191}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251123_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251123_frame.jpg', 'image_size': 640}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251123_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:25:00 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251123_frame.jpg
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251123_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251123_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [342.0, 145.0, 377.0, 200.0]}, {'label': 'no_vest', 'location': [287.0, 130.0, 318.0, 168.0]}]}, 'counts': {'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:54:00+00:00', 'created_date': '2025-11-04T10:55:00.643000', 'updated_date': '2025-11-04T10:55:00', '_id': '6909db8466237910ebf4fd20'}
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:25:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:25:00 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:55:00', 'camera_id': 1}
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251123_frame.jpg
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251123_frame.jpg
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:26:00 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:26:00 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:26:00 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2309 seconds
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:26:01 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [418, 83, 441, 112], Conf: 0.68
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [283, 123, 330, 179], Conf: 0.58
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [418, 83, 441, 112]}, {'label': 'no_vest', 'location': [283, 123, 330, 179]}], 'inference_time': 0.23092007637023926}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [418, 83, 441, 112]}, {'label': 'no_vest', 'location': [283, 123, 330, 179]}], 'inference_time': 0.23092007637023926}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251123_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251123_frame.jpg', 'image_size': 640}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251123_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:26:01 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251123_frame.jpg
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251123_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251123_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [418.0, 83.0, 441.0, 112.0]}, {'label': 'no_vest', 'location': [283.0, 123.0, 330.0, 179.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:55:00+00:00', 'created_date': '2025-11-04T10:56:01.015000', 'updated_date': '2025-11-04T10:56:01', '_id': '6909dbc166237910ebf4fd21'}
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:55:00', 'camera_id': 2}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251124_frame.jpg
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251124_frame.jpg
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:26:01 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1820 seconds
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:26:01 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 165, 317, 205], Conf: 0.53
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 129, 321, 172], Conf: 0.51
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [289, 165, 317, 205]}, {'label': 'no_vest', 'location': [288, 129, 321, 172]}], 'inference_time': 0.18199634552001953}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [289, 165, 317, 205]}, {'label': 'no_vest', 'location': [288, 129, 321, 172]}], 'inference_time': 0.18199634552001953}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251124_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251124_frame.jpg', 'image_size': 640}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251124_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:26:01 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251124_frame.jpg
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251124_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251124_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [289.0, 165.0, 317.0, 205.0]}, {'label': 'no_vest', 'location': [288.0, 129.0, 321.0, 172.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:55:00+00:00', 'created_date': '2025-11-04T10:56:01.292000', 'updated_date': '2025-11-04T10:56:01', '_id': '6909dbc166237910ebf4fd22'}
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:26:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:26:01 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:56:00', 'camera_id': 1}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251124_frame.jpg
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251124_frame.jpg
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1270 seconds
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [417, 82, 440, 109], Conf: 0.68
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [281, 125, 327, 183], Conf: 0.64
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [447, 121, 480, 160], Conf: 0.58
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [417, 82, 440, 109]}, {'label': 'no_vest', 'location': [281, 125, 327, 183]}, {'label': 'no_hardhat', 'location': [447, 121, 480, 160]}], 'inference_time': 0.12697124481201172}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [417, 82, 440, 109]}, {'label': 'no_vest', 'location': [281, 125, 327, 183]}, {'label': 'no_hardhat', 'location': [447, 121, 480, 160]}], 'inference_time': 0.12697124481201172}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251124_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251124_frame.jpg', 'image_size': 640}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251124_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251124_frame.jpg
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251124_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251124_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [417.0, 82.0, 440.0, 109.0]}, {'label': 'no_vest', 'location': [281.0, 125.0, 327.0, 183.0]}, {'label': 'no_hardhat', 'location': [447.0, 121.0, 480.0, 160.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:56:00+00:00', 'created_date': '2025-11-04T10:57:01.572000', 'updated_date': '2025-11-04T10:57:01', '_id': '6909dbfd66237910ebf4fd23'}
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:56:00', 'camera_id': 2}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251125_frame.jpg
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251125_frame.jpg
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1279 seconds
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [279, 131, 325, 195], Conf: 0.64
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [283, 81, 310, 118], Conf: 0.55
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [279, 131, 325, 195]}, {'label': 'no_hardhat', 'location': [283, 81, 310, 118]}], 'inference_time': 0.12791013717651367}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [279, 131, 325, 195]}, {'label': 'no_hardhat', 'location': [283, 81, 310, 118]}], 'inference_time': 0.12791013717651367}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251125_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251125_frame.jpg', 'image_size': 640}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251125_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:27:01 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251125_frame.jpg
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251125_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251125_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [279.0, 131.0, 325.0, 195.0]}, {'label': 'no_hardhat', 'location': [283.0, 81.0, 310.0, 118.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:56:00+00:00', 'created_date': '2025-11-04T10:57:01.780000', 'updated_date': '2025-11-04T10:57:01', '_id': '6909dbfd66237910ebf4fd24'}
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:27:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:27:01 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:57:00', 'camera_id': 1}
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251125_frame.jpg
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251125_frame.jpg
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:28:01 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:28:01 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:28:01 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1218 seconds
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:28:02 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [418, 82, 442, 114], Conf: 0.64
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [283, 124, 328, 184], Conf: 0.64
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [462, 128, 487, 163], Conf: 0.57
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [418, 82, 442, 114]}, {'label': 'no_vest', 'location': [283, 124, 328, 184]}, {'label': 'no_hardhat', 'location': [462, 128, 487, 163]}], 'inference_time': 0.12183547019958496}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [418, 82, 442, 114]}, {'label': 'no_vest', 'location': [283, 124, 328, 184]}, {'label': 'no_hardhat', 'location': [462, 128, 487, 163]}], 'inference_time': 0.12183547019958496}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251125_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251125_frame.jpg', 'image_size': 640}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251125_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:28:02 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251125_frame.jpg
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251125_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251125_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [418.0, 82.0, 442.0, 114.0]}, {'label': 'no_vest', 'location': [283.0, 124.0, 328.0, 184.0]}, {'label': 'no_hardhat', 'location': [462.0, 128.0, 487.0, 163.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:57:00+00:00', 'created_date': '2025-11-04T10:58:02.050000', 'updated_date': '2025-11-04T10:58:02', '_id': '6909dc3a66237910ebf4fd25'}
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:57:00', 'camera_id': 2}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251126_frame.jpg
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251126_frame.jpg
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:28:02 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1196 seconds
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:28:02 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [342, 260, 393, 341], Conf: 0.61
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [337, 116, 360, 149], Conf: 0.59
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [342, 260, 393, 341]}, {'label': 'no_hardhat', 'location': [337, 116, 360, 149]}], 'inference_time': 0.11960792541503906}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [342, 260, 393, 341]}, {'label': 'no_hardhat', 'location': [337, 116, 360, 149]}], 'inference_time': 0.11960792541503906}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251126_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251126_frame.jpg', 'image_size': 640}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251126_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:28:02 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251126_frame.jpg
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251126_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251126_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [342.0, 260.0, 393.0, 341.0]}, {'label': 'no_hardhat', 'location': [337.0, 116.0, 360.0, 149.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:57:00+00:00', 'created_date': '2025-11-04T10:58:02.255000', 'updated_date': '2025-11-04T10:58:02', '_id': '6909dc3a66237910ebf4fd26'}
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:28:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:28:02 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:58:00', 'camera_id': 1}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251126_frame.jpg
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251126_frame.jpg
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1283 seconds
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 95, 464, 124], Conf: 0.67
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [450, 127, 476, 154], Conf: 0.58
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [317, 53, 341, 80], Conf: 0.51
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [443, 95, 464, 124]}, {'label': 'no_hardhat', 'location': [450, 127, 476, 154]}, {'label': 'no_hardhat', 'location': [317, 53, 341, 80]}], 'inference_time': 0.12833905220031738}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [443, 95, 464, 124]}, {'label': 'no_hardhat', 'location': [450, 127, 476, 154]}, {'label': 'no_hardhat', 'location': [317, 53, 341, 80]}], 'inference_time': 0.12833905220031738}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251126_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251126_frame.jpg', 'image_size': 640}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251126_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251126_frame.jpg
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251126_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251126_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [443.0, 95.0, 464.0, 124.0]}, {'label': 'no_hardhat', 'location': [450.0, 127.0, 476.0, 154.0]}, {'label': 'no_hardhat', 'location': [317.0, 53.0, 341.0, 80.0]}]}, 'counts': {'no_hardhat': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:58:00+00:00', 'created_date': '2025-11-04T10:59:02.519000', 'updated_date': '2025-11-04T10:59:02', '_id': '6909dc7666237910ebf4fd27'}
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:58:00', 'camera_id': 2}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251127_frame.jpg
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251127_frame.jpg
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1196 seconds
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [332, 115, 357, 150], Conf: 0.78
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [351, 86, 373, 114], Conf: 0.66
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [282, 83, 302, 110], Conf: 0.60
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [299, 107, 320, 133], Conf: 0.59
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [332, 149, 366, 209], Conf: 0.52
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 136, 325, 181], Conf: 0.50
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [332, 115, 357, 150]}, {'label': 'no_hardhat', 'location': [351, 86, 373, 114]}, {'label': 'no_hardhat', 'location': [282, 83, 302, 110]}, {'label': 'no_hardhat', 'location': [299, 107, 320, 133]}, {'label': 'no_vest', 'location': [332, 149, 366, 209]}, {'label': 'no_vest', 'location': [288, 136, 325, 181]}], 'inference_time': 0.11957979202270508}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [332, 115, 357, 150]}, {'label': 'no_hardhat', 'location': [351, 86, 373, 114]}, {'label': 'no_hardhat', 'location': [282, 83, 302, 110]}, {'label': 'no_hardhat', 'location': [299, 107, 320, 133]}, {'label': 'no_vest', 'location': [332, 149, 366, 209]}, {'label': 'no_vest', 'location': [288, 136, 325, 181]}], 'inference_time': 0.11957979202270508}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251127_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251127_frame.jpg', 'image_size': 640}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251127_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:29:02 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251127_frame.jpg
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251127_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251127_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [332.0, 115.0, 357.0, 150.0]}, {'label': 'no_hardhat', 'location': [351.0, 86.0, 373.0, 114.0]}, {'label': 'no_hardhat', 'location': [282.0, 83.0, 302.0, 110.0]}, {'label': 'no_hardhat', 'location': [299.0, 107.0, 320.0, 133.0]}, {'label': 'no_vest', 'location': [332.0, 149.0, 366.0, 209.0]}, {'label': 'no_vest', 'location': [288.0, 136.0, 325.0, 181.0]}]}, 'counts': {'no_hardhat': 4, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:58:00+00:00', 'created_date': '2025-11-04T10:59:02.718000', 'updated_date': '2025-11-04T10:59:02', '_id': '6909dc7666237910ebf4fd28'}
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:29:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:29:02 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:59:00', 'camera_id': 1}
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251127_frame.jpg
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251127_frame.jpg
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:30:02 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1378 seconds
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:30:02 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [436, 103, 460, 135], Conf: 0.76
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [420, 80, 442, 106], Conf: 0.68
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [306, 80, 342, 129], Conf: 0.53
2025-11-04 16:30:02 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [436, 103, 460, 135]}, {'label': 'no_hardhat', 'location': [420, 80, 442, 106]}, {'label': 'no_vest', 'location': [306, 80, 342, 129]}], 'inference_time': 0.13784337043762207}
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [436, 103, 460, 135]}, {'label': 'no_hardhat', 'location': [420, 80, 442, 106]}, {'label': 'no_vest', 'location': [306, 80, 342, 129]}], 'inference_time': 0.13784337043762207}
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:30:02 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251127_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251127_frame.jpg', 'image_size': 640}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251127_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:30:03 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251127_frame.jpg
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251127_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251127_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [436.0, 103.0, 460.0, 135.0]}, {'label': 'no_hardhat', 'location': [420.0, 80.0, 442.0, 106.0]}, {'label': 'no_vest', 'location': [306.0, 80.0, 342.0, 129.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:59:00+00:00', 'created_date': '2025-11-04T11:00:03.006000', 'updated_date': '2025-11-04T11:00:03', '_id': '6909dcb366237910ebf4fd29'}
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 10:59:00', 'camera_id': 2}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251128_frame.jpg
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251128_frame.jpg
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:30:03 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2318 seconds
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:30:03 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [333, 114, 357, 146], Conf: 0.73
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [350, 86, 372, 116], Conf: 0.70
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [288, 106, 312, 136], Conf: 0.68
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [286, 81, 307, 106], Conf: 0.55
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [281, 136, 319, 179], Conf: 0.51
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [333, 114, 357, 146]}, {'label': 'no_hardhat', 'location': [350, 86, 372, 116]}, {'label': 'no_hardhat', 'location': [288, 106, 312, 136]}, {'label': 'no_hardhat', 'location': [286, 81, 307, 106]}, {'label': 'no_vest', 'location': [281, 136, 319, 179]}], 'inference_time': 0.23183345794677734}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [333, 114, 357, 146]}, {'label': 'no_hardhat', 'location': [350, 86, 372, 116]}, {'label': 'no_hardhat', 'location': [288, 106, 312, 136]}, {'label': 'no_hardhat', 'location': [286, 81, 307, 106]}, {'label': 'no_vest', 'location': [281, 136, 319, 179]}], 'inference_time': 0.23183345794677734}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251128_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251128_frame.jpg', 'image_size': 640}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251128_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:30:03 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251128_frame.jpg
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251128_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251128_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [333.0, 114.0, 357.0, 146.0]}, {'label': 'no_hardhat', 'location': [350.0, 86.0, 372.0, 116.0]}, {'label': 'no_hardhat', 'location': [288.0, 106.0, 312.0, 136.0]}, {'label': 'no_hardhat', 'location': [286.0, 81.0, 307.0, 106.0]}, {'label': 'no_vest', 'location': [281.0, 136.0, 319.0, 179.0]}]}, 'counts': {'no_hardhat': 4, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T10:59:00+00:00', 'created_date': '2025-11-04T11:00:03.321000', 'updated_date': '2025-11-04T11:00:03', '_id': '6909dcb366237910ebf4fd2a'}
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:30:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 10:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:30:03 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:00:00', 'camera_id': 1}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251128_frame.jpg
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251128_frame.jpg
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1325 seconds
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [280, 123, 327, 169], Conf: 0.63
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [308, 79, 343, 128], Conf: 0.60
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [280, 123, 327, 169]}, {'label': 'no_vest', 'location': [308, 79, 343, 128]}], 'inference_time': 0.13247346878051758}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [280, 123, 327, 169]}, {'label': 'no_vest', 'location': [308, 79, 343, 128]}], 'inference_time': 0.13247346878051758}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251128_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251128_frame.jpg', 'image_size': 640}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251128_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251128_frame.jpg
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251128_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251128_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [280.0, 123.0, 327.0, 169.0]}, {'label': 'no_vest', 'location': [308.0, 79.0, 343.0, 128.0]}]}, 'counts': {'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:00:00+00:00', 'created_date': '2025-11-04T11:01:03.599000', 'updated_date': '2025-11-04T11:01:03', '_id': '6909dcef66237910ebf4fd2b'}
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:00:00', 'camera_id': 2}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251129_frame.jpg
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251129_frame.jpg
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1261 seconds
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [330, 111, 356, 146], Conf: 0.73
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [349, 85, 373, 115], Conf: 0.70
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [357, 215, 389, 248], Conf: 0.55
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [403, 521, 483, 629], Conf: 0.53
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [330, 111, 356, 146]}, {'label': 'no_hardhat', 'location': [349, 85, 373, 115]}, {'label': 'hardhat', 'location': [357, 215, 389, 248]}, {'label': 'no_vest', 'location': [403, 521, 483, 629]}], 'inference_time': 0.126145601272583}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [330, 111, 356, 146]}, {'label': 'no_hardhat', 'location': [349, 85, 373, 115]}, {'label': 'hardhat', 'location': [357, 215, 389, 248]}, {'label': 'no_vest', 'location': [403, 521, 483, 629]}], 'inference_time': 0.126145601272583}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251129_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251129_frame.jpg', 'image_size': 640}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251129_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:31:03 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251129_frame.jpg
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251129_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251129_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [330.0, 111.0, 356.0, 146.0]}, {'label': 'no_hardhat', 'location': [349.0, 85.0, 373.0, 115.0]}, {'label': 'hardhat', 'location': [357.0, 215.0, 389.0, 248.0]}, {'label': 'no_vest', 'location': [403.0, 521.0, 483.0, 629.0]}]}, 'counts': {'no_hardhat': 2, 'hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:00:00+00:00', 'created_date': '2025-11-04T11:01:03.803000', 'updated_date': '2025-11-04T11:01:03', '_id': '6909dcef66237910ebf4fd2c'}
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:31:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:31:03 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:01:00', 'camera_id': 1}
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251129_frame.jpg
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251129_frame.jpg
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:32:03 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:32:03 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:32:03 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1337 seconds
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:32:04 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [430, 106, 458, 139], Conf: 0.71
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [307, 79, 343, 127], Conf: 0.67
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [423, 73, 446, 106], Conf: 0.64
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [430, 106, 458, 139]}, {'label': 'no_vest', 'location': [307, 79, 343, 127]}, {'label': 'no_hardhat', 'location': [423, 73, 446, 106]}], 'inference_time': 0.13372135162353516}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [430, 106, 458, 139]}, {'label': 'no_vest', 'location': [307, 79, 343, 127]}, {'label': 'no_hardhat', 'location': [423, 73, 446, 106]}], 'inference_time': 0.13372135162353516}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251129_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251129_frame.jpg', 'image_size': 640}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251129_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:32:04 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251129_frame.jpg
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251129_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251129_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [430.0, 106.0, 458.0, 139.0]}, {'label': 'no_vest', 'location': [307.0, 79.0, 343.0, 127.0]}, {'label': 'no_hardhat', 'location': [423.0, 73.0, 446.0, 106.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:01:00+00:00', 'created_date': '2025-11-04T11:02:04.082000', 'updated_date': '2025-11-04T11:02:04', '_id': '6909dd2c66237910ebf4fd2d'}
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:01:00', 'camera_id': 2}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251130_frame.jpg
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251130_frame.jpg
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:32:04 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1193 seconds
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:32:04 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [327, 111, 356, 148], Conf: 0.70
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 129, 324, 183], Conf: 0.62
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [301, 96, 324, 127], Conf: 0.53
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [327, 111, 356, 148]}, {'label': 'no_vest', 'location': [288, 129, 324, 183]}, {'label': 'no_hardhat', 'location': [301, 96, 324, 127]}], 'inference_time': 0.11930203437805176}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [327, 111, 356, 148]}, {'label': 'no_vest', 'location': [288, 129, 324, 183]}, {'label': 'no_hardhat', 'location': [301, 96, 324, 127]}], 'inference_time': 0.11930203437805176}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251130_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251130_frame.jpg', 'image_size': 640}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251130_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:32:04 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251130_frame.jpg
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251130_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251130_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [327.0, 111.0, 356.0, 148.0]}, {'label': 'no_vest', 'location': [288.0, 129.0, 324.0, 183.0]}, {'label': 'no_hardhat', 'location': [301.0, 96.0, 324.0, 127.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:01:00+00:00', 'created_date': '2025-11-04T11:02:04.282000', 'updated_date': '2025-11-04T11:02:04', '_id': '6909dd2c66237910ebf4fd2e'}
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:32:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:01:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:32:04 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:02:00', 'camera_id': 1}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251130_frame.jpg
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251130_frame.jpg
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1887 seconds
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [424, 82, 445, 109], Conf: 0.61
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [545, 481, 608, 554], Conf: 0.50
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [424, 82, 445, 109]}, {'label': 'no_vest', 'location': [545, 481, 608, 554]}], 'inference_time': 0.18873882293701172}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [424, 82, 445, 109]}, {'label': 'no_vest', 'location': [545, 481, 608, 554]}], 'inference_time': 0.18873882293701172}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251130_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251130_frame.jpg', 'image_size': 640}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251130_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251130_frame.jpg
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251130_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251130_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [424.0, 82.0, 445.0, 109.0]}, {'label': 'no_vest', 'location': [545.0, 481.0, 608.0, 554.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:02:00+00:00', 'created_date': '2025-11-04T11:03:04.606000', 'updated_date': '2025-11-04T11:03:04', '_id': '6909dd6866237910ebf4fd2f'}
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:02:00', 'camera_id': 2}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251131_frame.jpg
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251131_frame.jpg
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1266 seconds
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [378, 238, 411, 287], Conf: 0.84
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [330, 111, 356, 144], Conf: 0.70
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [284, 130, 323, 184], Conf: 0.67
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [296, 96, 318, 126], Conf: 0.63
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [342, 261, 386, 350], Conf: 0.60
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [378, 238, 411, 287]}, {'label': 'no_hardhat', 'location': [330, 111, 356, 144]}, {'label': 'no_vest', 'location': [284, 130, 323, 184]}, {'label': 'no_hardhat', 'location': [296, 96, 318, 126]}, {'label': 'no_vest', 'location': [342, 261, 386, 350]}], 'inference_time': 0.12659978866577148}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [378, 238, 411, 287]}, {'label': 'no_hardhat', 'location': [330, 111, 356, 144]}, {'label': 'no_vest', 'location': [284, 130, 323, 184]}, {'label': 'no_hardhat', 'location': [296, 96, 318, 126]}, {'label': 'no_vest', 'location': [342, 261, 386, 350]}], 'inference_time': 0.12659978866577148}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251131_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251131_frame.jpg', 'image_size': 640}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251131_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:33:04 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251131_frame.jpg
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251131_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251131_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [378.0, 238.0, 411.0, 287.0]}, {'label': 'no_hardhat', 'location': [330.0, 111.0, 356.0, 144.0]}, {'label': 'no_vest', 'location': [284.0, 130.0, 323.0, 184.0]}, {'label': 'no_hardhat', 'location': [296.0, 96.0, 318.0, 126.0]}, {'label': 'no_vest', 'location': [342.0, 261.0, 386.0, 350.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:02:00+00:00', 'created_date': '2025-11-04T11:03:04.820000', 'updated_date': '2025-11-04T11:03:04', '_id': '6909dd6866237910ebf4fd30'}
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:33:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:02:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:33:04 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:03:00', 'camera_id': 1}
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251131_frame.jpg
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251131_frame.jpg
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:34:04 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:34:04 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:34:04 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1380 seconds
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:34:05 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [415, 86, 439, 116], Conf: 0.74
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [300, 82, 344, 162], Conf: 0.59
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [316, 53, 341, 79], Conf: 0.57
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [415, 86, 439, 116]}, {'label': 'no_vest', 'location': [300, 82, 344, 162]}, {'label': 'no_hardhat', 'location': [316, 53, 341, 79]}], 'inference_time': 0.13804864883422852}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [415, 86, 439, 116]}, {'label': 'no_vest', 'location': [300, 82, 344, 162]}, {'label': 'no_hardhat', 'location': [316, 53, 341, 79]}], 'inference_time': 0.13804864883422852}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251131_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251131_frame.jpg', 'image_size': 640}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251131_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:34:05 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251131_frame.jpg
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251131_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251131_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [415.0, 86.0, 439.0, 116.0]}, {'label': 'no_vest', 'location': [300.0, 82.0, 344.0, 162.0]}, {'label': 'no_hardhat', 'location': [316.0, 53.0, 341.0, 79.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:03:00+00:00', 'created_date': '2025-11-04T11:04:05.099000', 'updated_date': '2025-11-04T11:04:05', '_id': '6909dda566237910ebf4fd31'}
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:03:00', 'camera_id': 2}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251132_frame.jpg
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251132_frame.jpg
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:34:05 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1193 seconds
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:34:05 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 8 detections found.
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [278, 166, 321, 236], Conf: 0.77
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [292, 127, 322, 165], Conf: 0.74
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [327, 121, 352, 157], Conf: 0.71
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [456, 405, 479, 437], Conf: 0.65
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [0, 613, 30, 640], Conf: 0.57
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [83, 565, 145, 634], Conf: 0.55
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 218, 374, 259], Conf: 0.52
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [85, 564, 148, 635], Conf: 0.51
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [278, 166, 321, 236]}, {'label': 'no_hardhat', 'location': [292, 127, 322, 165]}, {'label': 'no_hardhat', 'location': [327, 121, 352, 157]}, {'label': 'hardhat', 'location': [456, 405, 479, 437]}, {'label': 'hardhat', 'location': [0, 613, 30, 640]}, {'label': 'no_hardhat', 'location': [83, 565, 145, 634]}, {'label': 'no_hardhat', 'location': [338, 218, 374, 259]}, {'label': 'no_vest', 'location': [85, 564, 148, 635]}], 'inference_time': 0.11925888061523438}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [278, 166, 321, 236]}, {'label': 'no_hardhat', 'location': [292, 127, 322, 165]}, {'label': 'no_hardhat', 'location': [327, 121, 352, 157]}, {'label': 'hardhat', 'location': [456, 405, 479, 437]}, {'label': 'hardhat', 'location': [0, 613, 30, 640]}, {'label': 'no_hardhat', 'location': [83, 565, 145, 634]}, {'label': 'no_hardhat', 'location': [338, 218, 374, 259]}, {'label': 'no_vest', 'location': [85, 564, 148, 635]}], 'inference_time': 0.11925888061523438}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=8 after=8
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251132_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251132_frame.jpg', 'image_size': 640}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251132_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:34:05 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251132_frame.jpg
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251132_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251132_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [278.0, 166.0, 321.0, 236.0]}, {'label': 'no_hardhat', 'location': [292.0, 127.0, 322.0, 165.0]}, {'label': 'no_hardhat', 'location': [327.0, 121.0, 352.0, 157.0]}, {'label': 'hardhat', 'location': [456.0, 405.0, 479.0, 437.0]}, {'label': 'hardhat', 'location': [0.0, 613.0, 30.0, 640.0]}, {'label': 'no_hardhat', 'location': [83.0, 565.0, 145.0, 634.0]}, {'label': 'no_hardhat', 'location': [338.0, 218.0, 374.0, 259.0]}, {'label': 'no_vest', 'location': [85.0, 564.0, 148.0, 635.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 4, 'hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:03:00+00:00', 'created_date': '2025-11-04T11:04:05.299000', 'updated_date': '2025-11-04T11:04:05', '_id': '6909dda566237910ebf4fd32'}
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:34:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:03:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:34:05 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:04:00', 'camera_id': 1}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251132_frame.jpg
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251132_frame.jpg
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1133 seconds
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [414, 84, 436, 114], Conf: 0.75
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [302, 81, 345, 158], Conf: 0.62
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [414, 84, 436, 114]}, {'label': 'no_vest', 'location': [302, 81, 345, 158]}], 'inference_time': 0.1133272647857666}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [414, 84, 436, 114]}, {'label': 'no_vest', 'location': [302, 81, 345, 158]}], 'inference_time': 0.1133272647857666}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251132_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251132_frame.jpg', 'image_size': 640}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251132_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251132_frame.jpg
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251132_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251132_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [414.0, 84.0, 436.0, 114.0]}, {'label': 'no_vest', 'location': [302.0, 81.0, 345.0, 158.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:04:00+00:00', 'created_date': '2025-11-04T11:05:05.561000', 'updated_date': '2025-11-04T11:05:05', '_id': '6909dde166237910ebf4fd33'}
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:04:00', 'camera_id': 2}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251133_frame.jpg
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251133_frame.jpg
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1333 seconds
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [454, 405, 479, 440], Conf: 0.78
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 94, 359, 119], Conf: 0.62
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [454, 405, 479, 440]}, {'label': 'no_hardhat', 'location': [339, 94, 359, 119]}], 'inference_time': 0.13332414627075195}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [454, 405, 479, 440]}, {'label': 'no_hardhat', 'location': [339, 94, 359, 119]}], 'inference_time': 0.13332414627075195}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251133_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251133_frame.jpg', 'image_size': 640}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251133_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:35:05 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251133_frame.jpg
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251133_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251133_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'hardhat', 'location': [454.0, 405.0, 479.0, 440.0]}, {'label': 'no_hardhat', 'location': [339.0, 94.0, 359.0, 119.0]}]}, 'counts': {'hardhat': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:04:00+00:00', 'created_date': '2025-11-04T11:05:05.774000', 'updated_date': '2025-11-04T11:05:05', '_id': '6909dde166237910ebf4fd34'}
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:35:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:04:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:35:05 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:05:00', 'camera_id': 1}
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251133_frame.jpg
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251133_frame.jpg
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:36:05 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:36:05 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:36:05 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1233 seconds
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:36:06 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [416, 88, 436, 111], Conf: 0.73
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [415, 112, 445, 152], Conf: 0.55
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [126, 83, 162, 132], Conf: 0.53
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [416, 88, 436, 111]}, {'label': 'no_vest', 'location': [415, 112, 445, 152]}, {'label': 'no_vest', 'location': [126, 83, 162, 132]}], 'inference_time': 0.12325739860534668}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [416, 88, 436, 111]}, {'label': 'no_vest', 'location': [415, 112, 445, 152]}, {'label': 'no_vest', 'location': [126, 83, 162, 132]}], 'inference_time': 0.12325739860534668}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251133_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251133_frame.jpg', 'image_size': 640}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251133_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:36:06 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251133_frame.jpg
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251133_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251133_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [416.0, 88.0, 436.0, 111.0]}, {'label': 'no_vest', 'location': [415.0, 112.0, 445.0, 152.0]}, {'label': 'no_vest', 'location': [126.0, 83.0, 162.0, 132.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:05:00+00:00', 'created_date': '2025-11-04T11:06:06.035000', 'updated_date': '2025-11-04T11:06:06', '_id': '6909de1e66237910ebf4fd35'}
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:05:00', 'camera_id': 2}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251134_frame.jpg
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251134_frame.jpg
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:36:06 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1360 seconds
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:36:06 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [454, 405, 479, 439], Conf: 0.76
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [332, 113, 357, 148], Conf: 0.74
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [327, 152, 362, 207], Conf: 0.65
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [454, 405, 479, 439]}, {'label': 'no_hardhat', 'location': [332, 113, 357, 148]}, {'label': 'no_vest', 'location': [327, 152, 362, 207]}], 'inference_time': 0.13595080375671387}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [454, 405, 479, 439]}, {'label': 'no_hardhat', 'location': [332, 113, 357, 148]}, {'label': 'no_vest', 'location': [327, 152, 362, 207]}], 'inference_time': 0.13595080375671387}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251134_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251134_frame.jpg', 'image_size': 640}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251134_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:36:06 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251134_frame.jpg
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251134_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251134_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'hardhat', 'location': [454.0, 405.0, 479.0, 439.0]}, {'label': 'no_hardhat', 'location': [332.0, 113.0, 357.0, 148.0]}, {'label': 'no_vest', 'location': [327.0, 152.0, 362.0, 207.0]}]}, 'counts': {'hardhat': 1, 'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:05:00+00:00', 'created_date': '2025-11-04T11:06:06.250000', 'updated_date': '2025-11-04T11:06:06', '_id': '6909de1e66237910ebf4fd36'}
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:36:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:05:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:36:06 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:06:00', 'camera_id': 1}
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251134_frame.jpg
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251134_frame.jpg
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:37:06 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:37:06 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:37:06 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 1.0930 seconds
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:37:07 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [315, 53, 342, 80], Conf: 0.51
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [296, 82, 341, 153], Conf: 0.50
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [315, 53, 342, 80]}, {'label': 'no_vest', 'location': [296, 82, 341, 153]}], 'inference_time': 1.09295654296875}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [315, 53, 342, 80]}, {'label': 'no_vest', 'location': [296, 82, 341, 153]}], 'inference_time': 1.09295654296875}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251134_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251134_frame.jpg', 'image_size': 640}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251134_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:37:07 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251134_frame.jpg
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251134_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251134_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [296.0, 82.0, 341.0, 153.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:06:00+00:00', 'created_date': '2025-11-04T11:07:07.517000', 'updated_date': '2025-11-04T11:07:07', '_id': '6909de5b66237910ebf4fd37'}
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:06:00', 'camera_id': 2}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251135_frame.jpg
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251135_frame.jpg
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:37:07 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:37:07 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:37:07 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.4390 seconds
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:37:08 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [330, 156, 371, 219], Conf: 0.67
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [337, 89, 357, 114], Conf: 0.63
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [331, 115, 358, 154], Conf: 0.54
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [330, 156, 371, 219]}, {'label': 'no_hardhat', 'location': [337, 89, 357, 114]}, {'label': 'no_hardhat', 'location': [331, 115, 358, 154]}], 'inference_time': 0.4390120506286621}
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [330, 156, 371, 219]}, {'label': 'no_hardhat', 'location': [337, 89, 357, 114]}, {'label': 'no_hardhat', 'location': [331, 115, 358, 154]}], 'inference_time': 0.4390120506286621}
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251135_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251135_frame.jpg', 'image_size': 640}
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251135_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:37:08 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251135_frame.jpg
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251135_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251135_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [330.0, 156.0, 371.0, 219.0]}, {'label': 'no_hardhat', 'location': [337.0, 89.0, 357.0, 114.0]}, {'label': 'no_hardhat', 'location': [331.0, 115.0, 358.0, 154.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:06:00+00:00', 'created_date': '2025-11-04T11:07:08.061000', 'updated_date': '2025-11-04T11:07:08', '_id': '6909de5c66237910ebf4fd38'}
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:37:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:06:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:37:08 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:07:00', 'camera_id': 1}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251135_frame.jpg
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251135_frame.jpg
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:38:08 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2787 seconds
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:38:08 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [420, 88, 441, 115], Conf: 0.56
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [420, 88, 441, 115]}], 'inference_time': 0.27872514724731445}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [420, 88, 441, 115]}], 'inference_time': 0.27872514724731445}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251135_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251135_frame.jpg', 'image_size': 640}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251135_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:38:08 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251135_frame.jpg
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251135_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251135_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [420.0, 88.0, 441.0, 115.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:07:00+00:00', 'created_date': '2025-11-04T11:08:08.503000', 'updated_date': '2025-11-04T11:08:08', '_id': '6909de9866237910ebf4fd39'}
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:07:00', 'camera_id': 2}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251136_frame.jpg
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251136_frame.jpg
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:38:08 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:38:08 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:38:08 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.5375 seconds
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:38:09 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 88, 358, 115], Conf: 0.71
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [351, 144, 390, 215], Conf: 0.70
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [367, 114, 391, 143], Conf: 0.60
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [297, 105, 322, 131], Conf: 0.51
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [338, 88, 358, 115]}, {'label': 'no_vest', 'location': [351, 144, 390, 215]}, {'label': 'no_hardhat', 'location': [367, 114, 391, 143]}, {'label': 'no_hardhat', 'location': [297, 105, 322, 131]}], 'inference_time': 0.5375356674194336}
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [338, 88, 358, 115]}, {'label': 'no_vest', 'location': [351, 144, 390, 215]}, {'label': 'no_hardhat', 'location': [367, 114, 391, 143]}, {'label': 'no_hardhat', 'location': [297, 105, 322, 131]}], 'inference_time': 0.5375356674194336}
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251136_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251136_frame.jpg', 'image_size': 640}
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251136_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:38:09 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251136_frame.jpg
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251136_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251136_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [338.0, 88.0, 358.0, 115.0]}, {'label': 'no_vest', 'location': [351.0, 144.0, 390.0, 215.0]}, {'label': 'no_hardhat', 'location': [367.0, 114.0, 391.0, 143.0]}, {'label': 'no_hardhat', 'location': [297.0, 105.0, 322.0, 131.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:07:00+00:00', 'created_date': '2025-11-04T11:08:09.134000', 'updated_date': '2025-11-04T11:08:09', '_id': '6909de9966237910ebf4fd3a'}
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:38:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:38:09 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:08:00', 'camera_id': 1}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251136_frame.jpg
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251136_frame.jpg
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1744 seconds
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [416, 86, 437, 113], Conf: 0.76
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [439, 108, 461, 138], Conf: 0.59
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [407, 118, 442, 167], Conf: 0.51
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [416, 86, 437, 113]}, {'label': 'no_hardhat', 'location': [439, 108, 461, 138]}, {'label': 'no_vest', 'location': [407, 118, 442, 167]}], 'inference_time': 0.1744072437286377}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [416, 86, 437, 113]}, {'label': 'no_hardhat', 'location': [439, 108, 461, 138]}, {'label': 'no_vest', 'location': [407, 118, 442, 167]}], 'inference_time': 0.1744072437286377}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251136_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251136_frame.jpg', 'image_size': 640}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251136_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251136_frame.jpg
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251136_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251136_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [416.0, 86.0, 437.0, 113.0]}, {'label': 'no_hardhat', 'location': [439.0, 108.0, 461.0, 138.0]}, {'label': 'no_vest', 'location': [407.0, 118.0, 442.0, 167.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:08:00+00:00', 'created_date': '2025-11-04T11:09:09.475000', 'updated_date': '2025-11-04T11:09:09', '_id': '6909ded566237910ebf4fd3b'}
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:08:00', 'camera_id': 2}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251137_frame.jpg
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251137_frame.jpg
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2910 seconds
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [360, 51, 386, 84], Conf: 0.80
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [335, 81, 377, 147], Conf: 0.54
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [360, 51, 386, 84]}, {'label': 'no_vest', 'location': [335, 81, 377, 147]}], 'inference_time': 0.2909519672393799}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [360, 51, 386, 84]}, {'label': 'no_vest', 'location': [335, 81, 377, 147]}], 'inference_time': 0.2909519672393799}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251137_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251137_frame.jpg', 'image_size': 640}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251137_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:39:09 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251137_frame.jpg
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251137_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251137_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [360.0, 51.0, 386.0, 84.0]}, {'label': 'no_vest', 'location': [335.0, 81.0, 377.0, 147.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:08:00+00:00', 'created_date': '2025-11-04T11:09:09.864000', 'updated_date': '2025-11-04T11:09:09', '_id': '6909ded566237910ebf4fd3c'}
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:39:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:39:09 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:09:00', 'camera_id': 1}
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251137_frame.jpg
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251137_frame.jpg
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:40:09 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:40:09 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:40:09 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1555 seconds
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:40:10 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [417, 87, 437, 113], Conf: 0.77
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [118, 54, 136, 79], Conf: 0.53
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [459, 126, 481, 149], Conf: 0.51
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [417, 87, 437, 113]}, {'label': 'hardhat', 'location': [118, 54, 136, 79]}, {'label': 'no_hardhat', 'location': [459, 126, 481, 149]}], 'inference_time': 0.15547442436218262}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [417, 87, 437, 113]}, {'label': 'hardhat', 'location': [118, 54, 136, 79]}, {'label': 'no_hardhat', 'location': [459, 126, 481, 149]}], 'inference_time': 0.15547442436218262}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251137_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251137_frame.jpg', 'image_size': 640}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251137_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:40:10 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251137_frame.jpg
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251137_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251137_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [417.0, 87.0, 437.0, 113.0]}, {'label': 'no_hardhat', 'location': [459.0, 126.0, 481.0, 149.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:09:00+00:00', 'created_date': '2025-11-04T11:10:10.164000', 'updated_date': '2025-11-04T11:10:10', '_id': '6909df1266237910ebf4fd3d'}
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:09:00', 'camera_id': 2}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251138_frame.jpg
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251138_frame.jpg
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:40:10 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1648 seconds
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:40:10 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [340, 89, 359, 115], Conf: 0.74
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [346, 278, 402, 365], Conf: 0.69
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 114, 364, 150], Conf: 0.54
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [340, 89, 359, 115]}, {'label': 'no_vest', 'location': [346, 278, 402, 365]}, {'label': 'no_hardhat', 'location': [338, 114, 364, 150]}], 'inference_time': 0.1647629737854004}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [340, 89, 359, 115]}, {'label': 'no_vest', 'location': [346, 278, 402, 365]}, {'label': 'no_hardhat', 'location': [338, 114, 364, 150]}], 'inference_time': 0.1647629737854004}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251138_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251138_frame.jpg', 'image_size': 640}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251138_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:40:10 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251138_frame.jpg
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251138_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251138_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [340.0, 89.0, 359.0, 115.0]}, {'label': 'no_vest', 'location': [346.0, 278.0, 402.0, 365.0]}, {'label': 'no_hardhat', 'location': [338.0, 114.0, 364.0, 150.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:09:00+00:00', 'created_date': '2025-11-04T11:10:10.438000', 'updated_date': '2025-11-04T11:10:10', '_id': '6909df1266237910ebf4fd3e'}
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:40:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:40:10 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:10:00', 'camera_id': 1}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251138_frame.jpg
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251138_frame.jpg
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:41:10 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1581 seconds
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:41:10 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [417, 87, 438, 114], Conf: 0.71
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [445, 212, 479, 261], Conf: 0.57
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [300, 82, 343, 146], Conf: 0.50
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [442, 110, 465, 136], Conf: 0.50
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [417, 87, 438, 114]}, {'label': 'no_hardhat', 'location': [445, 212, 479, 261]}, {'label': 'no_vest', 'location': [300, 82, 343, 146]}, {'label': 'no_hardhat', 'location': [442, 110, 465, 136]}], 'inference_time': 0.15813088417053223}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [417, 87, 438, 114]}, {'label': 'no_hardhat', 'location': [445, 212, 479, 261]}, {'label': 'no_vest', 'location': [300, 82, 343, 146]}, {'label': 'no_hardhat', 'location': [442, 110, 465, 136]}], 'inference_time': 0.15813088417053223}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251138_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251138_frame.jpg', 'image_size': 640}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251138_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:41:10 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251138_frame.jpg
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251138_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251138_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [417.0, 87.0, 438.0, 114.0]}, {'label': 'no_hardhat', 'location': [445.0, 212.0, 479.0, 261.0]}, {'label': 'no_vest', 'location': [300.0, 82.0, 343.0, 146.0]}, {'label': 'no_hardhat', 'location': [442.0, 110.0, 465.0, 136.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:10:00+00:00', 'created_date': '2025-11-04T11:11:10.738000', 'updated_date': '2025-11-04T11:11:10', '_id': '6909df4e66237910ebf4fd3f'}
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:10:00', 'camera_id': 2}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251139_frame.jpg
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251139_frame.jpg
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:41:10 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:41:10 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:41:10 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2534 seconds
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:41:11 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 87, 357, 111], Conf: 0.70
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [287, 153, 328, 230], Conf: 0.61
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [417, 481, 490, 589], Conf: 0.59
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [290, 83, 306, 107], Conf: 0.51
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [338, 87, 357, 111]}, {'label': 'no_vest', 'location': [287, 153, 328, 230]}, {'label': 'no_vest', 'location': [417, 481, 490, 589]}, {'label': 'no_hardhat', 'location': [290, 83, 306, 107]}], 'inference_time': 0.2533690929412842}
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [338, 87, 357, 111]}, {'label': 'no_vest', 'location': [287, 153, 328, 230]}, {'label': 'no_vest', 'location': [417, 481, 490, 589]}, {'label': 'no_hardhat', 'location': [290, 83, 306, 107]}], 'inference_time': 0.2533690929412842}
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251139_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251139_frame.jpg', 'image_size': 640}
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251139_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:41:11 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251139_frame.jpg
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251139_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251139_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [338.0, 87.0, 357.0, 111.0]}, {'label': 'no_vest', 'location': [287.0, 153.0, 328.0, 230.0]}, {'label': 'no_vest', 'location': [417.0, 481.0, 490.0, 589.0]}, {'label': 'no_hardhat', 'location': [290.0, 83.0, 306.0, 107.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:10:00+00:00', 'created_date': '2025-11-04T11:11:11.085000', 'updated_date': '2025-11-04T11:11:11', '_id': '6909df4f66237910ebf4fd40'}
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:41:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:41:11 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:11:00', 'camera_id': 1}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251139_frame.jpg
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251139_frame.jpg
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1220 seconds
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [419, 86, 439, 110], Conf: 0.79
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [442, 205, 470, 247], Conf: 0.64
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [291, 113, 331, 172], Conf: 0.56
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [442, 108, 462, 133], Conf: 0.54
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [419, 86, 439, 110]}, {'label': 'no_hardhat', 'location': [442, 205, 470, 247]}, {'label': 'no_vest', 'location': [291, 113, 331, 172]}, {'label': 'no_hardhat', 'location': [442, 108, 462, 133]}], 'inference_time': 0.12196040153503418}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [419, 86, 439, 110]}, {'label': 'no_hardhat', 'location': [442, 205, 470, 247]}, {'label': 'no_vest', 'location': [291, 113, 331, 172]}, {'label': 'no_hardhat', 'location': [442, 108, 462, 133]}], 'inference_time': 0.12196040153503418}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251139_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251139_frame.jpg', 'image_size': 640}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251139_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251139_frame.jpg
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251139_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251139_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [419.0, 86.0, 439.0, 110.0]}, {'label': 'no_hardhat', 'location': [442.0, 205.0, 470.0, 247.0]}, {'label': 'no_vest', 'location': [291.0, 113.0, 331.0, 172.0]}, {'label': 'no_hardhat', 'location': [442.0, 108.0, 462.0, 133.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:11:00+00:00', 'created_date': '2025-11-04T11:12:11.360000', 'updated_date': '2025-11-04T11:12:11', '_id': '6909df8b66237910ebf4fd41'}
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:11:00', 'camera_id': 2}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251140_frame.jpg
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251140_frame.jpg
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1266 seconds
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [279, 82, 303, 111], Conf: 0.77
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [274, 178, 311, 232], Conf: 0.67
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [279, 143, 303, 178], Conf: 0.67
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 87, 357, 108], Conf: 0.66
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [279, 82, 303, 111]}, {'label': 'no_vest', 'location': [274, 178, 311, 232]}, {'label': 'no_hardhat', 'location': [279, 143, 303, 178]}, {'label': 'no_hardhat', 'location': [339, 87, 357, 108]}], 'inference_time': 0.12661981582641602}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [279, 82, 303, 111]}, {'label': 'no_vest', 'location': [274, 178, 311, 232]}, {'label': 'no_hardhat', 'location': [279, 143, 303, 178]}, {'label': 'no_hardhat', 'location': [339, 87, 357, 108]}], 'inference_time': 0.12661981582641602}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251140_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251140_frame.jpg', 'image_size': 640}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251140_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:42:11 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251140_frame.jpg
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251140_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251140_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [279.0, 82.0, 303.0, 111.0]}, {'label': 'no_vest', 'location': [274.0, 178.0, 311.0, 232.0]}, {'label': 'no_hardhat', 'location': [279.0, 143.0, 303.0, 178.0]}, {'label': 'no_hardhat', 'location': [339.0, 87.0, 357.0, 108.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:11:00+00:00', 'created_date': '2025-11-04T11:12:11.563000', 'updated_date': '2025-11-04T11:12:11', '_id': '6909df8b66237910ebf4fd42'}
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:42:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:42:11 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:12:00', 'camera_id': 1}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251140_frame.jpg
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251140_frame.jpg
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:43:11 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1154 seconds
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:43:11 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [432, 81, 454, 108], Conf: 0.72
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [432, 81, 454, 108]}], 'inference_time': 0.11537694931030273}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [432, 81, 454, 108]}], 'inference_time': 0.11537694931030273}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251140_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251140_frame.jpg', 'image_size': 640}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251140_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:43:11 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251140_frame.jpg
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251140_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251140_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [432.0, 81.0, 454.0, 108.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:12:00+00:00', 'created_date': '2025-11-04T11:13:11.823000', 'updated_date': '2025-11-04T11:13:11', '_id': '6909dfc766237910ebf4fd43'}
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:12:00', 'camera_id': 2}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251141_frame.jpg
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251141_frame.jpg
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:43:11 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:43:11 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:43:11 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2810 seconds
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:43:12 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 91, 360, 118], Conf: 0.73
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [286, 141, 309, 179], Conf: 0.64
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [285, 82, 303, 106], Conf: 0.62
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [281, 179, 318, 235], Conf: 0.61
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 123, 366, 154], Conf: 0.55
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [274, 101, 295, 128], Conf: 0.54
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [357, 224, 389, 263], Conf: 0.51
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [339, 91, 360, 118]}, {'label': 'no_hardhat', 'location': [286, 141, 309, 179]}, {'label': 'no_hardhat', 'location': [285, 82, 303, 106]}, {'label': 'no_vest', 'location': [281, 179, 318, 235]}, {'label': 'no_hardhat', 'location': [339, 123, 366, 154]}, {'label': 'no_hardhat', 'location': [274, 101, 295, 128]}, {'label': 'no_hardhat', 'location': [357, 224, 389, 263]}], 'inference_time': 0.280991792678833}
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [339, 91, 360, 118]}, {'label': 'no_hardhat', 'location': [286, 141, 309, 179]}, {'label': 'no_hardhat', 'location': [285, 82, 303, 106]}, {'label': 'no_vest', 'location': [281, 179, 318, 235]}, {'label': 'no_hardhat', 'location': [339, 123, 366, 154]}, {'label': 'no_hardhat', 'location': [274, 101, 295, 128]}, {'label': 'no_hardhat', 'location': [357, 224, 389, 263]}], 'inference_time': 0.280991792678833}
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=7 after=7
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251141_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251141_frame.jpg', 'image_size': 640}
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251141_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:43:12 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251141_frame.jpg
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251141_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251141_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [339.0, 91.0, 360.0, 118.0]}, {'label': 'no_hardhat', 'location': [286.0, 141.0, 309.0, 179.0]}, {'label': 'no_hardhat', 'location': [285.0, 82.0, 303.0, 106.0]}, {'label': 'no_vest', 'location': [281.0, 179.0, 318.0, 235.0]}, {'label': 'no_hardhat', 'location': [339.0, 123.0, 366.0, 154.0]}, {'label': 'no_hardhat', 'location': [274.0, 101.0, 295.0, 128.0]}, {'label': 'no_hardhat', 'location': [357.0, 224.0, 389.0, 263.0]}]}, 'counts': {'no_hardhat': 6, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:12:00+00:00', 'created_date': '2025-11-04T11:13:12.190000', 'updated_date': '2025-11-04T11:13:12', '_id': '6909dfc866237910ebf4fd44'}
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:43:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:43:12 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:13:00', 'camera_id': 1}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251141_frame.jpg
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251141_frame.jpg
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:44:12 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1985 seconds
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:44:12 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [430, 82, 451, 108], Conf: 0.70
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [447, 121, 469, 150], Conf: 0.56
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [438, 199, 468, 240], Conf: 0.54
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [430, 82, 451, 108]}, {'label': 'no_hardhat', 'location': [447, 121, 469, 150]}, {'label': 'no_hardhat', 'location': [438, 199, 468, 240]}], 'inference_time': 0.19847965240478516}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [430, 82, 451, 108]}, {'label': 'no_hardhat', 'location': [447, 121, 469, 150]}, {'label': 'no_hardhat', 'location': [438, 199, 468, 240]}], 'inference_time': 0.19847965240478516}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251141_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251141_frame.jpg', 'image_size': 640}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251141_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:44:12 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251141_frame.jpg
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251141_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251141_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [430.0, 82.0, 451.0, 108.0]}, {'label': 'no_hardhat', 'location': [447.0, 121.0, 469.0, 150.0]}, {'label': 'no_hardhat', 'location': [438.0, 199.0, 468.0, 240.0]}]}, 'counts': {'no_hardhat': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:13:00+00:00', 'created_date': '2025-11-04T11:14:12.535000', 'updated_date': '2025-11-04T11:14:12', '_id': '6909e00466237910ebf4fd45'}
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:13:00', 'camera_id': 2}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251142_frame.jpg
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251142_frame.jpg
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:44:12 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:44:12 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:44:12 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.3818 seconds
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:44:13 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [261, 179, 305, 247], Conf: 0.78
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [264, 140, 293, 178], Conf: 0.72
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 91, 358, 117], Conf: 0.71
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [351, 268, 408, 356], Conf: 0.62
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [276, 99, 297, 129], Conf: 0.57
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 120, 365, 154], Conf: 0.52
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [261, 179, 305, 247]}, {'label': 'no_hardhat', 'location': [264, 140, 293, 178]}, {'label': 'no_hardhat', 'location': [338, 91, 358, 117]}, {'label': 'no_vest', 'location': [351, 268, 408, 356]}, {'label': 'no_hardhat', 'location': [276, 99, 297, 129]}, {'label': 'no_hardhat', 'location': [338, 120, 365, 154]}], 'inference_time': 0.38176989555358887}
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [261, 179, 305, 247]}, {'label': 'no_hardhat', 'location': [264, 140, 293, 178]}, {'label': 'no_hardhat', 'location': [338, 91, 358, 117]}, {'label': 'no_vest', 'location': [351, 268, 408, 356]}, {'label': 'no_hardhat', 'location': [276, 99, 297, 129]}, {'label': 'no_hardhat', 'location': [338, 120, 365, 154]}], 'inference_time': 0.38176989555358887}
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251142_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251142_frame.jpg', 'image_size': 640}
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251142_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:44:13 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251142_frame.jpg
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251142_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251142_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [261.0, 179.0, 305.0, 247.0]}, {'label': 'no_hardhat', 'location': [264.0, 140.0, 293.0, 178.0]}, {'label': 'no_hardhat', 'location': [338.0, 91.0, 358.0, 117.0]}, {'label': 'no_vest', 'location': [351.0, 268.0, 408.0, 356.0]}, {'label': 'no_hardhat', 'location': [276.0, 99.0, 297.0, 129.0]}, {'label': 'no_hardhat', 'location': [338.0, 120.0, 365.0, 154.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 4}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:13:00+00:00', 'created_date': '2025-11-04T11:14:13.019000', 'updated_date': '2025-11-04T11:14:13', '_id': '6909e00566237910ebf4fd46'}
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:44:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:44:13 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:14:00', 'camera_id': 1}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251142_frame.jpg
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251142_frame.jpg
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2328 seconds
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [429, 83, 448, 107], Conf: 0.55
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [414, 133, 454, 186], Conf: 0.54
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [429, 83, 448, 107]}, {'label': 'no_vest', 'location': [414, 133, 454, 186]}], 'inference_time': 0.23278188705444336}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [429, 83, 448, 107]}, {'label': 'no_vest', 'location': [414, 133, 454, 186]}], 'inference_time': 0.23278188705444336}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251142_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251142_frame.jpg', 'image_size': 640}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251142_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251142_frame.jpg
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251142_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251142_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [429.0, 83.0, 448.0, 107.0]}, {'label': 'no_vest', 'location': [414.0, 133.0, 454.0, 186.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:14:00+00:00', 'created_date': '2025-11-04T11:15:13.407000', 'updated_date': '2025-11-04T11:15:13', '_id': '6909e04166237910ebf4fd47'}
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:14:00', 'camera_id': 2}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251143_frame.jpg
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251143_frame.jpg
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2085 seconds
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [339, 91, 359, 116], Conf: 0.71
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [349, 263, 408, 364], Conf: 0.51
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [339, 91, 359, 116]}, {'label': 'no_vest', 'location': [349, 263, 408, 364]}], 'inference_time': 0.20848703384399414}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [339, 91, 359, 116]}, {'label': 'no_vest', 'location': [349, 263, 408, 364]}], 'inference_time': 0.20848703384399414}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251143_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251143_frame.jpg', 'image_size': 640}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251143_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:45:13 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251143_frame.jpg
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251143_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251143_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [339.0, 91.0, 359.0, 116.0]}, {'label': 'no_vest', 'location': [349.0, 263.0, 408.0, 364.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:14:00+00:00', 'created_date': '2025-11-04T11:15:13.709000', 'updated_date': '2025-11-04T11:15:13', '_id': '6909e04166237910ebf4fd48'}
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:45:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:45:13 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:15:00', 'camera_id': 1}
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251143_frame.jpg
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251143_frame.jpg
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:46:13 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:46:13 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:46:13 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.3224 seconds
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:46:14 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [422, 130, 463, 192], Conf: 0.64
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [307, 78, 343, 123], Conf: 0.54
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [435, 81, 451, 99], Conf: 0.54
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [422, 130, 463, 192]}, {'label': 'no_vest', 'location': [307, 78, 343, 123]}, {'label': 'no_hardhat', 'location': [435, 81, 451, 99]}], 'inference_time': 0.3223865032196045}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [422, 130, 463, 192]}, {'label': 'no_vest', 'location': [307, 78, 343, 123]}, {'label': 'no_hardhat', 'location': [435, 81, 451, 99]}], 'inference_time': 0.3223865032196045}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251143_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251143_frame.jpg', 'image_size': 640}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251143_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:46:14 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251143_frame.jpg
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251143_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251143_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [422.0, 130.0, 463.0, 192.0]}, {'label': 'no_vest', 'location': [307.0, 78.0, 343.0, 123.0]}, {'label': 'no_hardhat', 'location': [435.0, 81.0, 451.0, 99.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:15:00+00:00', 'created_date': '2025-11-04T11:16:14.196000', 'updated_date': '2025-11-04T11:16:14', '_id': '6909e07e66237910ebf4fd49'}
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:15:00', 'camera_id': 2}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251144_frame.jpg
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251144_frame.jpg
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:46:14 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2949 seconds
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:46:14 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 90, 359, 117], Conf: 0.75
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [270, 95, 292, 124], Conf: 0.70
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [268, 120, 305, 183], Conf: 0.63
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [338, 90, 359, 117]}, {'label': 'no_hardhat', 'location': [270, 95, 292, 124]}, {'label': 'no_vest', 'location': [268, 120, 305, 183]}], 'inference_time': 0.2949025630950928}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [338, 90, 359, 117]}, {'label': 'no_hardhat', 'location': [270, 95, 292, 124]}, {'label': 'no_vest', 'location': [268, 120, 305, 183]}], 'inference_time': 0.2949025630950928}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251144_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251144_frame.jpg', 'image_size': 640}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251144_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:46:14 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251144_frame.jpg
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251144_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251144_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [338.0, 90.0, 359.0, 117.0]}, {'label': 'no_hardhat', 'location': [270.0, 95.0, 292.0, 124.0]}, {'label': 'no_vest', 'location': [268.0, 120.0, 305.0, 183.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:15:00+00:00', 'created_date': '2025-11-04T11:16:14.588000', 'updated_date': '2025-11-04T11:16:14', '_id': '6909e07e66237910ebf4fd4a'}
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:46:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:46:14 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:16:00', 'camera_id': 1}
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251144_frame.jpg
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251144_frame.jpg
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:47:14 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:47:14 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:47:14 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2835 seconds
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:47:15 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [431, 80, 450, 107], Conf: 0.67
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [303, 81, 345, 153], Conf: 0.62
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [108, 82, 143, 120], Conf: 0.60
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [424, 118, 466, 180], Conf: 0.55
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [109, 60, 128, 84], Conf: 0.54
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [414, 103, 435, 130], Conf: 0.53
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [431, 80, 450, 107]}, {'label': 'no_vest', 'location': [303, 81, 345, 153]}, {'label': 'no_vest', 'location': [108, 82, 143, 120]}, {'label': 'no_vest', 'location': [424, 118, 466, 180]}, {'label': 'hardhat', 'location': [109, 60, 128, 84]}, {'label': 'no_hardhat', 'location': [414, 103, 435, 130]}], 'inference_time': 0.2835218906402588}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [431, 80, 450, 107]}, {'label': 'no_vest', 'location': [303, 81, 345, 153]}, {'label': 'no_vest', 'location': [108, 82, 143, 120]}, {'label': 'no_vest', 'location': [424, 118, 466, 180]}, {'label': 'hardhat', 'location': [109, 60, 128, 84]}, {'label': 'no_hardhat', 'location': [414, 103, 435, 130]}], 'inference_time': 0.2835218906402588}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=6 after=5
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251144_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251144_frame.jpg', 'image_size': 640}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251144_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:47:15 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251144_frame.jpg
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251144_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251144_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [431.0, 80.0, 450.0, 107.0]}, {'label': 'no_vest', 'location': [303.0, 81.0, 345.0, 153.0]}, {'label': 'no_vest', 'location': [108.0, 82.0, 143.0, 120.0]}, {'label': 'no_vest', 'location': [424.0, 118.0, 466.0, 180.0]}, {'label': 'no_hardhat', 'location': [414.0, 103.0, 435.0, 130.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:16:00+00:00', 'created_date': '2025-11-04T11:17:15.031000', 'updated_date': '2025-11-04T11:17:15', '_id': '6909e0bb66237910ebf4fd4b'}
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:16:00', 'camera_id': 2}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251145_frame.jpg
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251145_frame.jpg
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:47:15 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1667 seconds
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:47:15 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [338, 92, 358, 117], Conf: 0.76
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [393, 209, 424, 257], Conf: 0.75
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [284, 142, 312, 182], Conf: 0.70
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [365, 257, 407, 332], Conf: 0.65
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 187, 324, 259], Conf: 0.63
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [284, 83, 302, 104], Conf: 0.59
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [338, 92, 358, 117]}, {'label': 'no_hardhat', 'location': [393, 209, 424, 257]}, {'label': 'no_hardhat', 'location': [284, 142, 312, 182]}, {'label': 'no_vest', 'location': [365, 257, 407, 332]}, {'label': 'no_vest', 'location': [288, 187, 324, 259]}, {'label': 'no_hardhat', 'location': [284, 83, 302, 104]}], 'inference_time': 0.16672205924987793}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [338, 92, 358, 117]}, {'label': 'no_hardhat', 'location': [393, 209, 424, 257]}, {'label': 'no_hardhat', 'location': [284, 142, 312, 182]}, {'label': 'no_vest', 'location': [365, 257, 407, 332]}, {'label': 'no_vest', 'location': [288, 187, 324, 259]}, {'label': 'no_hardhat', 'location': [284, 83, 302, 104]}], 'inference_time': 0.16672205924987793}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251145_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251145_frame.jpg', 'image_size': 640}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251145_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:47:15 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251145_frame.jpg
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251145_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251145_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [338.0, 92.0, 358.0, 117.0]}, {'label': 'no_hardhat', 'location': [393.0, 209.0, 424.0, 257.0]}, {'label': 'no_hardhat', 'location': [284.0, 142.0, 312.0, 182.0]}, {'label': 'no_vest', 'location': [365.0, 257.0, 407.0, 332.0]}, {'label': 'no_vest', 'location': [288.0, 187.0, 324.0, 259.0]}, {'label': 'no_hardhat', 'location': [284.0, 83.0, 302.0, 104.0]}]}, 'counts': {'no_hardhat': 4, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:16:00+00:00', 'created_date': '2025-11-04T11:17:15.290000', 'updated_date': '2025-11-04T11:17:15', '_id': '6909e0bb66237910ebf4fd4c'}
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:47:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:47:15 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:17:00', 'camera_id': 1}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251145_frame.jpg
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251145_frame.jpg
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:48:15 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2739 seconds
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:48:15 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [441, 204, 473, 248], Conf: 0.72
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [426, 82, 445, 108], Conf: 0.64
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [298, 83, 343, 159], Conf: 0.64
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [441, 204, 473, 248]}, {'label': 'no_hardhat', 'location': [426, 82, 445, 108]}, {'label': 'no_vest', 'location': [298, 83, 343, 159]}], 'inference_time': 0.27394890785217285}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [441, 204, 473, 248]}, {'label': 'no_hardhat', 'location': [426, 82, 445, 108]}, {'label': 'no_vest', 'location': [298, 83, 343, 159]}], 'inference_time': 0.27394890785217285}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251145_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251145_frame.jpg', 'image_size': 640}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251145_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:48:15 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251145_frame.jpg
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251145_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251145_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [441.0, 204.0, 473.0, 248.0]}, {'label': 'no_hardhat', 'location': [426.0, 82.0, 445.0, 108.0]}, {'label': 'no_vest', 'location': [298.0, 83.0, 343.0, 159.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:17:00+00:00', 'created_date': '2025-11-04T11:18:15.713000', 'updated_date': '2025-11-04T11:18:15', '_id': '6909e0f766237910ebf4fd4d'}
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:17:00', 'camera_id': 2}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251146_frame.jpg
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251146_frame.jpg
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:48:15 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:48:15 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:48:15 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.4164 seconds
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:48:16 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [378, 222, 412, 266], Conf: 0.78
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [336, 88, 357, 115], Conf: 0.68
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [301, 149, 328, 190], Conf: 0.64
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [349, 272, 393, 365], Conf: 0.63
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [378, 222, 412, 266]}, {'label': 'no_hardhat', 'location': [336, 88, 357, 115]}, {'label': 'no_hardhat', 'location': [301, 149, 328, 190]}, {'label': 'no_vest', 'location': [349, 272, 393, 365]}], 'inference_time': 0.4164271354675293}
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [378, 222, 412, 266]}, {'label': 'no_hardhat', 'location': [336, 88, 357, 115]}, {'label': 'no_hardhat', 'location': [301, 149, 328, 190]}, {'label': 'no_vest', 'location': [349, 272, 393, 365]}], 'inference_time': 0.4164271354675293}
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251146_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251146_frame.jpg', 'image_size': 640}
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251146_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:48:16 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251146_frame.jpg
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251146_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251146_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [378.0, 222.0, 412.0, 266.0]}, {'label': 'no_hardhat', 'location': [336.0, 88.0, 357.0, 115.0]}, {'label': 'no_hardhat', 'location': [301.0, 149.0, 328.0, 190.0]}, {'label': 'no_vest', 'location': [349.0, 272.0, 393.0, 365.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:17:00+00:00', 'created_date': '2025-11-04T11:18:16.261000', 'updated_date': '2025-11-04T11:18:16', '_id': '6909e0f866237910ebf4fd4e'}
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:48:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:17:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:48:16 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:18:00', 'camera_id': 1}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251146_frame.jpg
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251146_frame.jpg
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:49:16 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1888 seconds
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:49:16 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [117, 73, 145, 115], Conf: 0.56
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [294, 83, 341, 160], Conf: 0.55
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [164, 77, 195, 123], Conf: 0.53
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [428, 84, 446, 110], Conf: 0.50
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [117, 73, 145, 115]}, {'label': 'no_vest', 'location': [294, 83, 341, 160]}, {'label': 'no_vest', 'location': [164, 77, 195, 123]}, {'label': 'no_hardhat', 'location': [428, 84, 446, 110]}], 'inference_time': 0.1887674331665039}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [117, 73, 145, 115]}, {'label': 'no_vest', 'location': [294, 83, 341, 160]}, {'label': 'no_vest', 'location': [164, 77, 195, 123]}, {'label': 'no_hardhat', 'location': [428, 84, 446, 110]}], 'inference_time': 0.1887674331665039}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251146_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251146_frame.jpg', 'image_size': 640}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251146_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:49:16 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251146_frame.jpg
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251146_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251146_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [117.0, 73.0, 145.0, 115.0]}, {'label': 'no_vest', 'location': [294.0, 83.0, 341.0, 160.0]}, {'label': 'no_vest', 'location': [164.0, 77.0, 195.0, 123.0]}, {'label': 'no_hardhat', 'location': [428.0, 84.0, 446.0, 110.0]}]}, 'counts': {'no_vest': 3, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:18:00+00:00', 'created_date': '2025-11-04T11:19:16.622000', 'updated_date': '2025-11-04T11:19:16', '_id': '6909e13466237910ebf4fd4f'}
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:18:00', 'camera_id': 2}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251147_frame.jpg
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251147_frame.jpg
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:49:16 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:49:16 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:49:16 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.3557 seconds
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:49:17 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [273, 120, 313, 185], Conf: 0.50
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [273, 120, 313, 185]}], 'inference_time': 0.35574769973754883}
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [273, 120, 313, 185]}], 'inference_time': 0.35574769973754883}
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251147_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251147_frame.jpg', 'image_size': 640}
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251147_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:49:17 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251147_frame.jpg
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251147_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251147_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [273.0, 120.0, 313.0, 185.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:18:00+00:00', 'created_date': '2025-11-04T11:19:17.089000', 'updated_date': '2025-11-04T11:19:17', '_id': '6909e13566237910ebf4fd50'}
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:49:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:18:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:49:17 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:19:00', 'camera_id': 1}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251147_frame.jpg
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251147_frame.jpg
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:50:17 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.7199 seconds
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:50:17 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [447, 211, 479, 256], Conf: 0.74
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [298, 81, 342, 159], Conf: 0.62
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [408, 90, 430, 121], Conf: 0.60
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [439, 258, 485, 318], Conf: 0.52
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [408, 120, 448, 169], Conf: 0.50
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [447, 211, 479, 256]}, {'label': 'no_vest', 'location': [298, 81, 342, 159]}, {'label': 'no_hardhat', 'location': [408, 90, 430, 121]}, {'label': 'no_vest', 'location': [439, 258, 485, 318]}, {'label': 'no_vest', 'location': [408, 120, 448, 169]}], 'inference_time': 0.7199153900146484}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [447, 211, 479, 256]}, {'label': 'no_vest', 'location': [298, 81, 342, 159]}, {'label': 'no_hardhat', 'location': [408, 90, 430, 121]}, {'label': 'no_vest', 'location': [439, 258, 485, 318]}, {'label': 'no_vest', 'location': [408, 120, 448, 169]}], 'inference_time': 0.7199153900146484}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251147_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251147_frame.jpg', 'image_size': 640}
2025-11-04 16:50:17 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251147_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:50:17 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251147_frame.jpg
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251147_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251147_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [447.0, 211.0, 479.0, 256.0]}, {'label': 'no_vest', 'location': [298.0, 81.0, 342.0, 159.0]}, {'label': 'no_hardhat', 'location': [408.0, 90.0, 430.0, 121.0]}, {'label': 'no_vest', 'location': [439.0, 258.0, 485.0, 318.0]}, {'label': 'no_vest', 'location': [408.0, 120.0, 448.0, 169.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 3}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:19:00+00:00', 'created_date': '2025-11-04T11:20:17.991000', 'updated_date': '2025-11-04T11:20:17', '_id': '6909e17166237910ebf4fd51'}
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:50:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:19:00', 'camera_id': 2}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251148_frame.jpg
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251148_frame.jpg
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:50:18 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1003 seconds
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:50:18 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [334, 275, 393, 359], Conf: 0.79
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [295, 131, 322, 170], Conf: 0.77
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [283, 174, 325, 236], Conf: 0.75
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [307, 101, 330, 131], Conf: 0.65
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [334, 275, 393, 359]}, {'label': 'no_hardhat', 'location': [295, 131, 322, 170]}, {'label': 'no_vest', 'location': [283, 174, 325, 236]}, {'label': 'no_hardhat', 'location': [307, 101, 330, 131]}], 'inference_time': 0.10034298896789551}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [334, 275, 393, 359]}, {'label': 'no_hardhat', 'location': [295, 131, 322, 170]}, {'label': 'no_vest', 'location': [283, 174, 325, 236]}, {'label': 'no_hardhat', 'location': [307, 101, 330, 131]}], 'inference_time': 0.10034298896789551}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251148_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251148_frame.jpg', 'image_size': 640}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251148_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:50:18 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251148_frame.jpg
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251148_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251148_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [334.0, 275.0, 393.0, 359.0]}, {'label': 'no_hardhat', 'location': [295.0, 131.0, 322.0, 170.0]}, {'label': 'no_vest', 'location': [283.0, 174.0, 325.0, 236.0]}, {'label': 'no_hardhat', 'location': [307.0, 101.0, 330.0, 131.0]}]}, 'counts': {'no_vest': 2, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:19:00+00:00', 'created_date': '2025-11-04T11:20:18.176000', 'updated_date': '2025-11-04T11:20:18', '_id': '6909e17266237910ebf4fd52'}
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:50:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:19:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:50:18 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:20:00', 'camera_id': 1}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251148_frame.jpg
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251148_frame.jpg
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1094 seconds
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [416, 87, 437, 114], Conf: 0.76
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [294, 81, 341, 157], Conf: 0.58
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [408, 116, 442, 166], Conf: 0.57
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [316, 52, 343, 80], Conf: 0.57
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [436, 126, 469, 176], Conf: 0.52
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [163, 77, 195, 122], Conf: 0.50
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [416, 87, 437, 114]}, {'label': 'no_vest', 'location': [294, 81, 341, 157]}, {'label': 'no_vest', 'location': [408, 116, 442, 166]}, {'label': 'no_hardhat', 'location': [316, 52, 343, 80]}, {'label': 'no_vest', 'location': [436, 126, 469, 176]}, {'label': 'no_vest', 'location': [163, 77, 195, 122]}], 'inference_time': 0.10935664176940918}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [416, 87, 437, 114]}, {'label': 'no_vest', 'location': [294, 81, 341, 157]}, {'label': 'no_vest', 'location': [408, 116, 442, 166]}, {'label': 'no_hardhat', 'location': [316, 52, 343, 80]}, {'label': 'no_vest', 'location': [436, 126, 469, 176]}, {'label': 'no_vest', 'location': [163, 77, 195, 122]}], 'inference_time': 0.10935664176940918}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251148_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251148_frame.jpg', 'image_size': 640}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251148_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251148_frame.jpg
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251148_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251148_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [416.0, 87.0, 437.0, 114.0]}, {'label': 'no_vest', 'location': [294.0, 81.0, 341.0, 157.0]}, {'label': 'no_vest', 'location': [408.0, 116.0, 442.0, 166.0]}, {'label': 'no_hardhat', 'location': [316.0, 52.0, 343.0, 80.0]}, {'label': 'no_vest', 'location': [436.0, 126.0, 469.0, 176.0]}, {'label': 'no_vest', 'location': [163.0, 77.0, 195.0, 122.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 4}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:20:00+00:00', 'created_date': '2025-11-04T11:21:18.436000', 'updated_date': '2025-11-04T11:21:18', '_id': '6909e1ae66237910ebf4fd53'}
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:20:00', 'camera_id': 2}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251149_frame.jpg
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251149_frame.jpg
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1136 seconds
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [279, 91, 301, 119], Conf: 0.79
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [277, 179, 319, 241], Conf: 0.79
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [290, 142, 315, 175], Conf: 0.73
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [345, 228, 383, 275], Conf: 0.72
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [330, 275, 383, 354], Conf: 0.52
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [333, 122, 359, 157], Conf: 0.51
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [279, 91, 301, 119]}, {'label': 'no_vest', 'location': [277, 179, 319, 241]}, {'label': 'no_hardhat', 'location': [290, 142, 315, 175]}, {'label': 'no_hardhat', 'location': [345, 228, 383, 275]}, {'label': 'no_vest', 'location': [330, 275, 383, 354]}, {'label': 'no_hardhat', 'location': [333, 122, 359, 157]}], 'inference_time': 0.11362195014953613}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [279, 91, 301, 119]}, {'label': 'no_vest', 'location': [277, 179, 319, 241]}, {'label': 'no_hardhat', 'location': [290, 142, 315, 175]}, {'label': 'no_hardhat', 'location': [345, 228, 383, 275]}, {'label': 'no_vest', 'location': [330, 275, 383, 354]}, {'label': 'no_hardhat', 'location': [333, 122, 359, 157]}], 'inference_time': 0.11362195014953613}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251149_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251149_frame.jpg', 'image_size': 640}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251149_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:51:18 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251149_frame.jpg
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251149_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251149_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [279.0, 91.0, 301.0, 119.0]}, {'label': 'no_vest', 'location': [277.0, 179.0, 319.0, 241.0]}, {'label': 'no_hardhat', 'location': [290.0, 142.0, 315.0, 175.0]}, {'label': 'no_hardhat', 'location': [345.0, 228.0, 383.0, 275.0]}, {'label': 'no_vest', 'location': [330.0, 275.0, 383.0, 354.0]}, {'label': 'no_hardhat', 'location': [333.0, 122.0, 359.0, 157.0]}]}, 'counts': {'no_hardhat': 4, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:20:00+00:00', 'created_date': '2025-11-04T11:21:18.635000', 'updated_date': '2025-11-04T11:21:18', '_id': '6909e1ae66237910ebf4fd54'}
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:51:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:20:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:51:18 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:21:00', 'camera_id': 1}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251149_frame.jpg
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251149_frame.jpg
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:52:18 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0995 seconds
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:52:18 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [443, 113, 466, 143], Conf: 0.68
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [418, 85, 438, 113], Conf: 0.65
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [299, 80, 343, 150], Conf: 0.63
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [443, 113, 466, 143]}, {'label': 'no_hardhat', 'location': [418, 85, 438, 113]}, {'label': 'no_vest', 'location': [299, 80, 343, 150]}], 'inference_time': 0.09954667091369629}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [443, 113, 466, 143]}, {'label': 'no_hardhat', 'location': [418, 85, 438, 113]}, {'label': 'no_vest', 'location': [299, 80, 343, 150]}], 'inference_time': 0.09954667091369629}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251149_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251149_frame.jpg', 'image_size': 640}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251149_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:52:18 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251149_frame.jpg
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251149_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251149_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [443.0, 113.0, 466.0, 143.0]}, {'label': 'no_hardhat', 'location': [418.0, 85.0, 438.0, 113.0]}, {'label': 'no_vest', 'location': [299.0, 80.0, 343.0, 150.0]}]}, 'counts': {'no_hardhat': 2, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:21:00+00:00', 'created_date': '2025-11-04T11:22:18.873000', 'updated_date': '2025-11-04T11:22:18', '_id': '6909e1ea66237910ebf4fd55'}
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:21:00', 'camera_id': 2}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251150_frame.jpg
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251150_frame.jpg
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:52:18 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:52:18 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:52:18 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1063 seconds
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:52:19 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [288, 183, 329, 243], Conf: 0.66
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [329, 123, 352, 158], Conf: 0.64
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [298, 144, 334, 184], Conf: 0.55
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [288, 183, 329, 243]}, {'label': 'no_hardhat', 'location': [329, 123, 352, 158]}, {'label': 'no_hardhat', 'location': [298, 144, 334, 184]}], 'inference_time': 0.10634136199951172}
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [288, 183, 329, 243]}, {'label': 'no_hardhat', 'location': [329, 123, 352, 158]}, {'label': 'no_hardhat', 'location': [298, 144, 334, 184]}], 'inference_time': 0.10634136199951172}
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251150_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251150_frame.jpg', 'image_size': 640}
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251150_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:52:19 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251150_frame.jpg
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251150_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251150_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [288.0, 183.0, 329.0, 243.0]}, {'label': 'no_hardhat', 'location': [329.0, 123.0, 352.0, 158.0]}, {'label': 'no_hardhat', 'location': [298.0, 144.0, 334.0, 184.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:21:00+00:00', 'created_date': '2025-11-04T11:22:19.052000', 'updated_date': '2025-11-04T11:22:19', '_id': '6909e1eb66237910ebf4fd56'}
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:52:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:21:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:52:19 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:22:00', 'camera_id': 1}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251150_frame.jpg
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251150_frame.jpg
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:53:19 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1271 seconds
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:53:19 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [426, 86, 445, 112], Conf: 0.74
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [442, 111, 468, 143], Conf: 0.63
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [315, 53, 341, 80], Conf: 0.50
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [426, 86, 445, 112]}, {'label': 'no_hardhat', 'location': [442, 111, 468, 143]}, {'label': 'hardhat', 'location': [315, 53, 341, 80]}], 'inference_time': 0.1270909309387207}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [426, 86, 445, 112]}, {'label': 'no_hardhat', 'location': [442, 111, 468, 143]}, {'label': 'hardhat', 'location': [315, 53, 341, 80]}], 'inference_time': 0.1270909309387207}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=3 after=2
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251150_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251150_frame.jpg', 'image_size': 640}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251150_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:53:19 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251150_frame.jpg
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251150_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251150_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [426.0, 86.0, 445.0, 112.0]}, {'label': 'no_hardhat', 'location': [442.0, 111.0, 468.0, 143.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:22:00+00:00', 'created_date': '2025-11-04T11:23:19.339000', 'updated_date': '2025-11-04T11:23:19', '_id': '6909e22766237910ebf4fd58'}
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:22:00', 'camera_id': 2}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251151_frame.jpg
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251151_frame.jpg
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:53:19 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1166 seconds
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:53:19 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [280, 180, 317, 234], Conf: 0.77
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [288, 147, 310, 177], Conf: 0.67
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [345, 113, 370, 148], Conf: 0.65
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [285, 85, 303, 109], Conf: 0.63
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [280, 180, 317, 234]}, {'label': 'no_hardhat', 'location': [288, 147, 310, 177]}, {'label': 'no_hardhat', 'location': [345, 113, 370, 148]}, {'label': 'no_hardhat', 'location': [285, 85, 303, 109]}], 'inference_time': 0.11655497550964355}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [280, 180, 317, 234]}, {'label': 'no_hardhat', 'location': [288, 147, 310, 177]}, {'label': 'no_hardhat', 'location': [345, 113, 370, 148]}, {'label': 'no_hardhat', 'location': [285, 85, 303, 109]}], 'inference_time': 0.11655497550964355}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251151_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251151_frame.jpg', 'image_size': 640}
2025-11-04 16:53:19 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251151_frame.jpg"}
2025-11-04 16:53:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:22:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:53:19 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:23:00', 'camera_id': 1}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251151_frame.jpg
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251151_frame.jpg
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:54:19 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0897 seconds
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:54:19 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [414, 79, 435, 105], Conf: 0.66
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [316, 53, 342, 80], Conf: 0.52
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [414, 79, 435, 105]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.08967113494873047}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [414, 79, 435, 105]}, {'label': 'hardhat', 'location': [316, 53, 342, 80]}], 'inference_time': 0.08967113494873047}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=1
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251151_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251151_frame.jpg', 'image_size': 640}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251151_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:54:19 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251151_frame.jpg
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251151_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251151_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [414.0, 79.0, 435.0, 105.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:23:00+00:00', 'created_date': '2025-11-04T11:24:19.749000', 'updated_date': '2025-11-04T11:24:19', '_id': '6909e26366237910ebf4fd5a'}
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:23:00', 'camera_id': 2}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251152_frame.jpg
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251152_frame.jpg
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:54:19 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1051 seconds
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:54:19 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 7 detections found.
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [284, 178, 325, 247], Conf: 0.78
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [294, 136, 323, 175], Conf: 0.76
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [146, 577, 197, 638], Conf: 0.72
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [274, 100, 296, 127], Conf: 0.72
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [407, 249, 438, 289], Conf: 0.58
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [285, 85, 303, 105], Conf: 0.56
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [354, 101, 373, 124], Conf: 0.51
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [284, 178, 325, 247]}, {'label': 'no_hardhat', 'location': [294, 136, 323, 175]}, {'label': 'no_hardhat', 'location': [146, 577, 197, 638]}, {'label': 'no_hardhat', 'location': [274, 100, 296, 127]}, {'label': 'no_hardhat', 'location': [407, 249, 438, 289]}, {'label': 'no_hardhat', 'location': [285, 85, 303, 105]}, {'label': 'no_hardhat', 'location': [354, 101, 373, 124]}], 'inference_time': 0.10511231422424316}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [284, 178, 325, 247]}, {'label': 'no_hardhat', 'location': [294, 136, 323, 175]}, {'label': 'no_hardhat', 'location': [146, 577, 197, 638]}, {'label': 'no_hardhat', 'location': [274, 100, 296, 127]}, {'label': 'no_hardhat', 'location': [407, 249, 438, 289]}, {'label': 'no_hardhat', 'location': [285, 85, 303, 105]}, {'label': 'no_hardhat', 'location': [354, 101, 373, 124]}], 'inference_time': 0.10511231422424316}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=7 after=7
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251152_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251152_frame.jpg', 'image_size': 640}
2025-11-04 16:54:19 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251152_frame.jpg"}
2025-11-04 16:54:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:23:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:54:19 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:55:19 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:55:19 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:55:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:55:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:55:19 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:55:19 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:55:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:55:19 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:55:19 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:24:00', 'camera_id': 1}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251152_frame.jpg
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251152_frame.jpg
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:55:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0931 seconds
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:55:20 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [417, 85, 439, 115], Conf: 0.72
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [417, 85, 439, 115]}], 'inference_time': 0.09312772750854492}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [417, 85, 439, 115]}], 'inference_time': 0.09312772750854492}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251152_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251152_frame.jpg', 'image_size': 640}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251152_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:55:20 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251152_frame.jpg
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251152_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251152_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [417.0, 85.0, 439.0, 115.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:24:00+00:00', 'created_date': '2025-11-04T11:25:20.146000', 'updated_date': '2025-11-04T11:25:20', '_id': '6909e2a066237910ebf4fd5c'}
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:24:00', 'camera_id': 2}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251153_frame.jpg
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251153_frame.jpg
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:55:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0894 seconds
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:55:20 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [147, 580, 201, 638], Conf: 0.66
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [371, 260, 417, 368], Conf: 0.53
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [147, 580, 201, 638]}, {'label': 'no_vest', 'location': [371, 260, 417, 368]}], 'inference_time': 0.08939075469970703}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [147, 580, 201, 638]}, {'label': 'no_vest', 'location': [371, 260, 417, 368]}], 'inference_time': 0.08939075469970703}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251153_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251153_frame.jpg', 'image_size': 640}
2025-11-04 16:55:20 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251153_frame.jpg"}
2025-11-04 16:55:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:24:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:55:20 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:25:00', 'camera_id': 1}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251153_frame.jpg
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251153_frame.jpg
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:56:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0941 seconds
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:56:20 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [414, 91, 439, 123], Conf: 0.71
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [446, 116, 466, 139], Conf: 0.55
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [414, 91, 439, 123]}, {'label': 'no_hardhat', 'location': [446, 116, 466, 139]}], 'inference_time': 0.09408998489379883}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [414, 91, 439, 123]}, {'label': 'no_hardhat', 'location': [446, 116, 466, 139]}], 'inference_time': 0.09408998489379883}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251153_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251153_frame.jpg', 'image_size': 640}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251153_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:56:20 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251153_frame.jpg
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251153_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251153_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [414.0, 91.0, 439.0, 123.0]}, {'label': 'no_hardhat', 'location': [446.0, 116.0, 466.0, 139.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:25:00+00:00', 'created_date': '2025-11-04T11:26:20.535000', 'updated_date': '2025-11-04T11:26:20', '_id': '6909e2dc66237910ebf4fd5e'}
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:25:00', 'camera_id': 2}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251154_frame.jpg
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251154_frame.jpg
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:56:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.0840 seconds
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:56:20 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [281, 136, 321, 193], Conf: 0.70
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [147, 580, 202, 638], Conf: 0.67
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [323, 87, 345, 111], Conf: 0.66
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [319, 112, 353, 157], Conf: 0.61
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: hardhat, Box: [288, 91, 312, 125], Conf: 0.57
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [281, 136, 321, 193]}, {'label': 'no_hardhat', 'location': [147, 580, 202, 638]}, {'label': 'no_hardhat', 'location': [323, 87, 345, 111]}, {'label': 'no_vest', 'location': [319, 112, 353, 157]}, {'label': 'hardhat', 'location': [288, 91, 312, 125]}], 'inference_time': 0.08401274681091309}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [281, 136, 321, 193]}, {'label': 'no_hardhat', 'location': [147, 580, 202, 638]}, {'label': 'no_hardhat', 'location': [323, 87, 345, 111]}, {'label': 'no_vest', 'location': [319, 112, 353, 157]}, {'label': 'hardhat', 'location': [288, 91, 312, 125]}], 'inference_time': 0.08401274681091309}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251154_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251154_frame.jpg', 'image_size': 640}
2025-11-04 16:56:20 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251154_frame.jpg"}
2025-11-04 16:56:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:25:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:56:20 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:26:00', 'camera_id': 1}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251154_frame.jpg
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251154_frame.jpg
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:57:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1050 seconds
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: False
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [], 'inference_time': 0.1049964427947998}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [], 'inference_time': 0.1049964427947998}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=0 after=0
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:339 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:26:00', 'camera_id': 2}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251155_frame.jpg
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251155_frame.jpg
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:57:20 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:57:20 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:57:20 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1047 seconds
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:57:21 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [318, 64, 346, 103], Conf: 0.77
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [362, 70, 391, 113], Conf: 0.75
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [357, 116, 396, 201], Conf: 0.64
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [299, 112, 343, 205], Conf: 0.57
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [396, 231, 429, 277], Conf: 0.54
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [374, 275, 431, 369], Conf: 0.52
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [318, 64, 346, 103]}, {'label': 'no_hardhat', 'location': [362, 70, 391, 113]}, {'label': 'no_vest', 'location': [357, 116, 396, 201]}, {'label': 'no_vest', 'location': [299, 112, 343, 205]}, {'label': 'no_hardhat', 'location': [396, 231, 429, 277]}, {'label': 'no_vest', 'location': [374, 275, 431, 369]}], 'inference_time': 0.10469412803649902}
2025-11-04 16:57:21 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [318, 64, 346, 103]}, {'label': 'no_hardhat', 'location': [362, 70, 391, 113]}, {'label': 'no_vest', 'location': [357, 116, 396, 201]}, {'label': 'no_vest', 'location': [299, 112, 343, 205]}, {'label': 'no_hardhat', 'location': [396, 231, 429, 277]}, {'label': 'no_vest', 'location': [374, 275, 431, 369]}], 'inference_time': 0.10469412803649902}
2025-11-04 16:57:21 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 16:57:21 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251155_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251155_frame.jpg', 'image_size': 640}
2025-11-04 16:57:21 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251155_frame.jpg"}
2025-11-04 16:57:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:26:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:57:21 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:57:21 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:27:00', 'camera_id': 1}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251155_frame.jpg
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251155_frame.jpg
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1517 seconds
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [423, 86, 444, 113], Conf: 0.76
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [423, 86, 444, 113]}], 'inference_time': 0.15174484252929688}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [423, 86, 444, 113]}], 'inference_time': 0.15174484252929688}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251155_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251155_frame.jpg', 'image_size': 640}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251155_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251155_frame.jpg
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251155_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251155_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [423.0, 86.0, 444.0, 113.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:27:00+00:00', 'created_date': '2025-11-04T11:28:21.382000', 'updated_date': '2025-11-04T11:28:21', '_id': '6909e35566237910ebf4fd61'}
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:27:00', 'camera_id': 2}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251156_frame.jpg
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251156_frame.jpg
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1112 seconds
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [272, 165, 318, 236], Conf: 0.64
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [137, 599, 208, 640], Conf: 0.61
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [272, 165, 318, 236]}, {'label': 'no_hardhat', 'location': [137, 599, 208, 640]}], 'inference_time': 0.11122846603393555}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [272, 165, 318, 236]}, {'label': 'no_hardhat', 'location': [137, 599, 208, 640]}], 'inference_time': 0.11122846603393555}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251156_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251156_frame.jpg', 'image_size': 640}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251156_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 16:58:21 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251156_frame.jpg
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251156_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251156_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [272.0, 165.0, 318.0, 236.0]}, {'label': 'no_hardhat', 'location': [137.0, 599.0, 208.0, 640.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:27:00+00:00', 'created_date': '2025-11-04T11:28:21.573000', 'updated_date': '2025-11-04T11:28:21', '_id': '6909e35566237910ebf4fd62'}
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 16:58:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:27:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 16:58:21 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:28:00', 'camera_id': 1}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251156_frame.jpg
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251156_frame.jpg
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 16:59:21 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251156_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251156_frame.jpg
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251156_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251156_frame.jpg
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:28:00', 'camera_id': 2}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251157_frame.jpg
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251157_frame.jpg
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 16:59:21 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251157_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251157_frame.jpg
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 16:59:21 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251157_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251157_frame.jpg
2025-11-04 16:59:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:28:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 16:59:21 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:29:00', 'camera_id': 1}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251157_frame.jpg
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251157_frame.jpg
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 17:00:21 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/1/1762251157_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/1/1762251157_frame.jpg
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/1/1762251157_frame.jpg path=/home/dev1079/frames/dell/raw_frames/1/1762251157_frame.jpg
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:29:00', 'camera_id': 2}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251158_frame.jpg
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251158_frame.jpg
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - my_utils.py:159 - load_image_from_url() - Error in load_image_from_url :: HTTP Error 404: Not Found
2025-11-04 17:00:21 - [ WARNING] - ppe_detection - app.py:163 - <module>() - Image fetch failed over HTTP for URL: http://192.168.11.97/frames/dell/raw_frames/2/1762251158_frame.jpg. Attempting local disk path: /home/dev1079/frames/dell/raw_frames/2/1762251158_frame.jpg
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - my_utils.py:172 - load_image_from_disk() - ERROR: image not found in local
2025-11-04 17:00:21 - [   ERROR] - ppe_detection - app.py:172 - <module>() - Image fetch failed from both HTTP and disk. Skipping this frame. url=http://192.168.11.97/frames/dell/raw_frames/2/1762251158_frame.jpg path=/home/dev1079/frames/dell/raw_frames/2/1762251158_frame.jpg
2025-11-04 17:00:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:29:00', 'camera_status': {'ppe_detection': 'FAILED'}}
2025-11-04 17:00:21 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:30:00', 'camera_id': 1}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251158_frame.jpg
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251158_frame.jpg
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1497 seconds
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [433, 88, 452, 115], Conf: 0.56
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [433, 88, 452, 115]}], 'inference_time': 0.14972376823425293}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [433, 88, 452, 115]}], 'inference_time': 0.14972376823425293}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251158_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251158_frame.jpg', 'image_size': 640}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251158_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251158_frame.jpg
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251158_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251158_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [433.0, 88.0, 452.0, 115.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:30:00+00:00', 'created_date': '2025-11-04T11:31:22.233000', 'updated_date': '2025-11-04T11:31:22', '_id': '6909e40a66237910ebf4fd63'}
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:30:00', 'camera_id': 2}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251159_frame.jpg
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251159_frame.jpg
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1696 seconds
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 5 detections found.
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [290, 145, 318, 186], Conf: 0.78
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [340, 110, 363, 140], Conf: 0.68
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [271, 191, 312, 256], Conf: 0.60
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [286, 82, 308, 109], Conf: 0.57
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [369, 275, 421, 366], Conf: 0.51
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [290, 145, 318, 186]}, {'label': 'no_hardhat', 'location': [340, 110, 363, 140]}, {'label': 'no_vest', 'location': [271, 191, 312, 256]}, {'label': 'no_hardhat', 'location': [286, 82, 308, 109]}, {'label': 'no_vest', 'location': [369, 275, 421, 366]}], 'inference_time': 0.16955351829528809}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [290, 145, 318, 186]}, {'label': 'no_hardhat', 'location': [340, 110, 363, 140]}, {'label': 'no_vest', 'location': [271, 191, 312, 256]}, {'label': 'no_hardhat', 'location': [286, 82, 308, 109]}, {'label': 'no_vest', 'location': [369, 275, 421, 366]}], 'inference_time': 0.16955351829528809}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=5 after=5
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251159_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251159_frame.jpg', 'image_size': 640}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762251159_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:01:22 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=2 file=1762251159_frame.jpg
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762251159_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762251159_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [290.0, 145.0, 318.0, 186.0]}, {'label': 'no_hardhat', 'location': [340.0, 110.0, 363.0, 140.0]}, {'label': 'no_vest', 'location': [271.0, 191.0, 312.0, 256.0]}, {'label': 'no_hardhat', 'location': [286.0, 82.0, 308.0, 109.0]}, {'label': 'no_vest', 'location': [369.0, 275.0, 421.0, 366.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:30:00+00:00', 'created_date': '2025-11-04T11:31:22.476000', 'updated_date': '2025-11-04T11:31:22', '_id': '6909e40a66237910ebf4fd64'}
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:01:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:30:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:01:22 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:31:00', 'camera_id': 1}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251159_frame.jpg
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251159_frame.jpg
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:02:22 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1419 seconds
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:02:22 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [421, 108, 442, 133], Conf: 0.68
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [421, 108, 442, 133]}], 'inference_time': 0.1419234275817871}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [421, 108, 442, 133]}], 'inference_time': 0.1419234275817871}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251159_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251159_frame.jpg', 'image_size': 640}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251159_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:02:22 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251159_frame.jpg
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251159_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251159_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [421.0, 108.0, 442.0, 133.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:31:00+00:00', 'created_date': '2025-11-04T11:32:22.778000', 'updated_date': '2025-11-04T11:32:22', '_id': '6909e44666237910ebf4fd66'}
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:31:00', 'camera_id': 2}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251160_frame.jpg
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251160_frame.jpg
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:02:22 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1068 seconds
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:02:22 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 6 detections found.
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [331, 109, 355, 141], Conf: 0.76
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [292, 145, 317, 179], Conf: 0.69
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [332, 145, 366, 203], Conf: 0.68
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [275, 186, 315, 245], Conf: 0.61
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [297, 104, 316, 127], Conf: 0.59
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [370, 275, 421, 364], Conf: 0.58
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [331, 109, 355, 141]}, {'label': 'no_hardhat', 'location': [292, 145, 317, 179]}, {'label': 'no_vest', 'location': [332, 145, 366, 203]}, {'label': 'no_vest', 'location': [275, 186, 315, 245]}, {'label': 'no_hardhat', 'location': [297, 104, 316, 127]}, {'label': 'no_vest', 'location': [370, 275, 421, 364]}], 'inference_time': 0.10682487487792969}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [331, 109, 355, 141]}, {'label': 'no_hardhat', 'location': [292, 145, 317, 179]}, {'label': 'no_vest', 'location': [332, 145, 366, 203]}, {'label': 'no_vest', 'location': [275, 186, 315, 245]}, {'label': 'no_hardhat', 'location': [297, 104, 316, 127]}, {'label': 'no_vest', 'location': [370, 275, 421, 364]}], 'inference_time': 0.10682487487792969}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=6 after=6
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251160_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251160_frame.jpg', 'image_size': 640}
2025-11-04 17:02:22 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251160_frame.jpg"}
2025-11-04 17:02:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:31:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:02:22 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:32:00', 'camera_id': 1}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762251160_frame.jpg
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762251160_frame.jpg
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:03:23 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1007 seconds
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:03:23 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [433, 80, 452, 104], Conf: 0.69
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [422, 106, 448, 143], Conf: 0.57
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [433, 80, 452, 104]}, {'label': 'no_hardhat', 'location': [422, 106, 448, 143]}], 'inference_time': 0.10069561004638672}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [433, 80, 452, 104]}, {'label': 'no_hardhat', 'location': [422, 106, 448, 143]}], 'inference_time': 0.10069561004638672}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762251160_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762251160_frame.jpg', 'image_size': 640}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762251160_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:03:23 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762251160_frame.jpg
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762251160_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762251160_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [433.0, 80.0, 452.0, 104.0]}, {'label': 'no_hardhat', 'location': [422.0, 106.0, 448.0, 143.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:32:00+00:00', 'created_date': '2025-11-04T11:33:23.190000', 'updated_date': '2025-11-04T11:33:23', '_id': '6909e48366237910ebf4fd68'}
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:32:00', 'camera_id': 2}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762251161_frame.jpg
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762251161_frame.jpg
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:03:23 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1311 seconds
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:03:23 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [327, 112, 353, 147], Conf: 0.72
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [277, 143, 307, 183], Conf: 0.70
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [297, 101, 316, 125], Conf: 0.50
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [327, 112, 353, 147]}, {'label': 'no_hardhat', 'location': [277, 143, 307, 183]}, {'label': 'no_hardhat', 'location': [297, 101, 316, 125]}], 'inference_time': 0.13105392456054688}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [327, 112, 353, 147]}, {'label': 'no_hardhat', 'location': [277, 143, 307, 183]}, {'label': 'no_hardhat', 'location': [297, 101, 316, 125]}], 'inference_time': 0.13105392456054688}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762251161_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762251161_frame.jpg', 'image_size': 640}
2025-11-04 17:03:23 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762251161_frame.jpg"}
2025-11-04 17:03:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:32:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:03:23 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:33:00', 'camera_id': 1}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762255959_frame.jpg
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762255959_frame.jpg
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:04:23 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1047 seconds
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:04:23 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [430, 87, 446, 108], Conf: 0.56
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [428, 108, 451, 137], Conf: 0.52
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [430, 87, 446, 108]}, {'label': 'no_hardhat', 'location': [428, 108, 451, 137]}], 'inference_time': 0.10473322868347168}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [430, 87, 446, 108]}, {'label': 'no_hardhat', 'location': [428, 108, 451, 137]}], 'inference_time': 0.10473322868347168}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=2 after=2
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762255959_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762255959_frame.jpg', 'image_size': 640}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762255959_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:04:23 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762255959_frame.jpg
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762255959_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762255959_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [430.0, 87.0, 446.0, 108.0]}, {'label': 'no_hardhat', 'location': [428.0, 108.0, 451.0, 137.0]}]}, 'counts': {'no_hardhat': 2}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:33:00+00:00', 'created_date': '2025-11-04T11:34:23.648000', 'updated_date': '2025-11-04T11:34:23', '_id': '6909e4bf66237910ebf4fd6a'}
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:33:00', 'camera_id': 2}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762255960_frame.jpg
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762255960_frame.jpg
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:04:23 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1303 seconds
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:04:23 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 3 detections found.
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [329, 112, 353, 147], Conf: 0.76
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [289, 154, 312, 187], Conf: 0.63
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [282, 84, 304, 116], Conf: 0.51
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [329, 112, 353, 147]}, {'label': 'no_hardhat', 'location': [289, 154, 312, 187]}, {'label': 'no_hardhat', 'location': [282, 84, 304, 116]}], 'inference_time': 0.1303260326385498}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [329, 112, 353, 147]}, {'label': 'no_hardhat', 'location': [289, 154, 312, 187]}, {'label': 'no_hardhat', 'location': [282, 84, 304, 116]}], 'inference_time': 0.1303260326385498}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=3 after=3
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762255960_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762255960_frame.jpg', 'image_size': 640}
2025-11-04 17:04:23 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762255960_frame.jpg"}
2025-11-04 17:04:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:33:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:04:23 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:34:00', 'camera_id': 1}
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762256007_frame.jpg
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762256007_frame.jpg
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:05:23 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:05:23 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:05:23 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1138 seconds
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:05:24 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 1 detections found.
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [433, 83, 452, 107], Conf: 0.51
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [433, 83, 452, 107]}], 'inference_time': 0.11382913589477539}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [433, 83, 452, 107]}], 'inference_time': 0.11382913589477539}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=1 after=1
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762256007_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762256007_frame.jpg', 'image_size': 640}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762256007_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:05:24 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762256007_frame.jpg
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762256007_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762256007_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [433.0, 83.0, 452.0, 107.0]}]}, 'counts': {'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:34:00+00:00', 'created_date': '2025-11-04T11:35:24.113000', 'updated_date': '2025-11-04T11:35:24', '_id': '6909e4fc66237910ebf4fd6c'}
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:34:00', 'camera_id': 2}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762255961_frame.jpg
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762255961_frame.jpg
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:05:24 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1392 seconds
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:05:24 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 2 detections found.
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [291, 144, 315, 182], Conf: 0.66
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [301, 96, 322, 124], Conf: 0.58
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [291, 144, 315, 182]}, {'label': 'no_hardhat', 'location': [301, 96, 322, 124]}], 'inference_time': 0.13921260833740234}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [291, 144, 315, 182]}, {'label': 'no_hardhat', 'location': [301, 96, 322, 124]}], 'inference_time': 0.13921260833740234}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=2 after=2
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762255961_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762255961_frame.jpg', 'image_size': 640}
2025-11-04 17:05:24 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762255961_frame.jpg"}
2025-11-04 17:05:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:34:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:05:24 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:35:00', 'camera_id': 1}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762256013_frame.jpg
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762256013_frame.jpg
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:06:24 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 1
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.2048 seconds
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:06:24 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [419, 85, 438, 111], Conf: 0.70
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [439, 106, 459, 132], Conf: 0.58
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_vest, Box: [308, 81, 348, 143], Conf: 0.55
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [440, 204, 469, 247], Conf: 0.53
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [419, 85, 438, 111]}, {'label': 'no_hardhat', 'location': [439, 106, 459, 132]}, {'label': 'no_vest', 'location': [308, 81, 348, 143]}, {'label': 'no_hardhat', 'location': [440, 204, 469, 247]}], 'inference_time': 0.20483946800231934}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [419, 85, 438, 111]}, {'label': 'no_hardhat', 'location': [439, 106, 459, 132]}, {'label': 'no_vest', 'location': [308, 81, 348, 143]}, {'label': 'no_hardhat', 'location': [440, 204, 469, 247]}], 'inference_time': 0.20483946800231934}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'intrusion'] before=4 after=4
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762256013_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762256013_frame.jpg', 'image_size': 640}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:313 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:91 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762256013_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 17:06:24 - [    INFO] - ppe_detection - my_utils.py:110 - store_result() - Result added successfully | camera_id=1 file=1762256013_frame.jpg
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:115 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762256013_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762256013_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [419.0, 85.0, 438.0, 111.0]}, {'label': 'no_hardhat', 'location': [439.0, 106.0, 459.0, 132.0]}, {'label': 'no_vest', 'location': [308.0, 81.0, 348.0, 143.0]}, {'label': 'no_hardhat', 'location': [440.0, 204.0, 469.0, 247.0]}]}, 'counts': {'no_hardhat': 3, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T11:35:00+00:00', 'created_date': '2025-11-04T11:36:24.676000', 'updated_date': '2025-11-04T11:36:24', '_id': '6909e53866237910ebf4fd6e'}
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:329 - <module>() - Result Added into database successfully ....
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:35:00', 'camera_id': 2}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:110 - <module>() - Frame API Response :: 200
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762255962_frame.jpg
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:128 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:129 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:133 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762255962_frame.jpg
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:138 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:146 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:190 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:191 - <module>() - ppe_detection usecase detected
2025-11-04 17:06:24 - [    INFO] - ppe_detection - my_utils.py:180 - predict() - In Prediction
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:181 - predict() - Device: cpu
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:182 - predict() - Confidence Threshold: 0.5
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:183 - predict() - IOU Threshold: 0.45
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Usecase: ppe_detection
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Camera ID: 2
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:191 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:209 - predict() - NMS completed in 0.1022 seconds
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:215 - predict() - Processing image 0 - Detection found: True
2025-11-04 17:06:24 - [    INFO] - ppe_detection - my_utils.py:220 - predict() - 4 detections found.
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [304, 94, 326, 120], Conf: 0.72
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [291, 145, 317, 183], Conf: 0.69
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [281, 82, 302, 112], Conf: 0.63
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:234 - predict() - Detection added - Label: no_hardhat, Box: [342, 116, 365, 149], Conf: 0.60
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - my_utils.py:242 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [304, 94, 326, 120]}, {'label': 'no_hardhat', 'location': [291, 145, 317, 183]}, {'label': 'no_hardhat', 'location': [281, 82, 302, 112]}, {'label': 'no_hardhat', 'location': [342, 116, 365, 149]}], 'inference_time': 0.10224533081054688}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:216 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [304, 94, 326, 120]}, {'label': 'no_hardhat', 'location': [291, 145, 317, 183]}, {'label': 'no_hardhat', 'location': [281, 82, 302, 112]}, {'label': 'no_hardhat', 'location': [342, 116, 365, 149]}], 'inference_time': 0.10224533081054688}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:237 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion'] before=4 after=4
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:300 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762255962_frame.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762255962_frame.jpg', 'image_size': 640}
2025-11-04 17:06:24 - [   ERROR] - ppe_detection - app.py:333 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762255962_frame.jpg"}
2025-11-04 17:06:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:35:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:06:24 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:36:00', 'camera_id': 1}
2025-11-04 17:07:24 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:36:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:36:00', 'camera_id': 2}
2025-11-04 17:07:24 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:07:24 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:36:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:07:24 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:37:00', 'camera_id': 1}
2025-11-04 17:08:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:37:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:37:00', 'camera_id': 2}
2025-11-04 17:08:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:08:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:37:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:08:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:38:00', 'camera_id': 1}
2025-11-04 17:09:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:38:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:38:00', 'camera_id': 2}
2025-11-04 17:09:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:09:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:38:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:09:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:39:00', 'camera_id': 1}
2025-11-04 17:10:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:39:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:39:00', 'camera_id': 2}
2025-11-04 17:10:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:10:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:39:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:10:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:40:00', 'camera_id': 1}
2025-11-04 17:11:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:40:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:40:00', 'camera_id': 2}
2025-11-04 17:11:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:11:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:40:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:11:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:41:00', 'camera_id': 1}
2025-11-04 17:12:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:41:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:41:00', 'camera_id': 2}
2025-11-04 17:12:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:12:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:41:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:12:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:42:00', 'camera_id': 1}
2025-11-04 17:13:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:42:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:42:00', 'camera_id': 2}
2025-11-04 17:13:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:13:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:42:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:13:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:43:00', 'camera_id': 1}
2025-11-04 17:14:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:43:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:43:00', 'camera_id': 2}
2025-11-04 17:14:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:14:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:43:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:14:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:44:00', 'camera_id': 1}
2025-11-04 17:15:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:44:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:44:00', 'camera_id': 2}
2025-11-04 17:15:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:15:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:44:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:15:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:45:00', 'camera_id': 1}
2025-11-04 17:16:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:45:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:45:00', 'camera_id': 2}
2025-11-04 17:16:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:16:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:45:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:16:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:46:00', 'camera_id': 1}
2025-11-04 17:17:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:46:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:46:00', 'camera_id': 2}
2025-11-04 17:17:25 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:17:25 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:46:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:17:25 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:47:00', 'camera_id': 1}
2025-11-04 17:18:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:47:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:47:00', 'camera_id': 2}
2025-11-04 17:18:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:18:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:47:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:18:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:48:00', 'camera_id': 1}
2025-11-04 17:19:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:48:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:48:00', 'camera_id': 2}
2025-11-04 17:19:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:19:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:48:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:19:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:49:00', 'camera_id': 1}
2025-11-04 17:20:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:49:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:49:00', 'camera_id': 2}
2025-11-04 17:20:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:20:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:49:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:20:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:50:00', 'camera_id': 1}
2025-11-04 17:21:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:50:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:50:00', 'camera_id': 2}
2025-11-04 17:21:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:21:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:50:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:21:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:51:00', 'camera_id': 1}
2025-11-04 17:22:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:51:00', 'camera_id': 2}
2025-11-04 17:22:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:22:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:22:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:52:00', 'camera_id': 1}
2025-11-04 17:23:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:52:00', 'camera_id': 2}
2025-11-04 17:23:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:23:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:23:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:53:00', 'camera_id': 1}
2025-11-04 17:24:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:53:00', 'camera_id': 2}
2025-11-04 17:24:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:24:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:24:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:54:00', 'camera_id': 1}
2025-11-04 17:25:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:54:00', 'camera_id': 2}
2025-11-04 17:25:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:25:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:25:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:55:00', 'camera_id': 1}
2025-11-04 17:26:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:55:00', 'camera_id': 2}
2025-11-04 17:26:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:26:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:26:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:56:00', 'camera_id': 1}
2025-11-04 17:27:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:56:00', 'camera_id': 2}
2025-11-04 17:27:26 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:27:26 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:27:26 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:57:00', 'camera_id': 1}
2025-11-04 17:28:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:57:00', 'camera_id': 2}
2025-11-04 17:28:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:28:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:28:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:58:00', 'camera_id': 1}
2025-11-04 17:29:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:58:00', 'camera_id': 2}
2025-11-04 17:29:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:29:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:29:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:59:00', 'camera_id': 1}
2025-11-04 17:30:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 11:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 11:59:00', 'camera_id': 2}
2025-11-04 17:30:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:30:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 11:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:30:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:00:00', 'camera_id': 1}
2025-11-04 17:31:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:00:00', 'camera_id': 2}
2025-11-04 17:31:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:31:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:31:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:01:00', 'camera_id': 1}
2025-11-04 17:32:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:01:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:01:00', 'camera_id': 2}
2025-11-04 17:32:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:32:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:01:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:32:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:02:00', 'camera_id': 1}
2025-11-04 17:33:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:02:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:02:00', 'camera_id': 2}
2025-11-04 17:33:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:33:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:02:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:33:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:03:00', 'camera_id': 1}
2025-11-04 17:34:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:03:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:03:00', 'camera_id': 2}
2025-11-04 17:34:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:34:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:03:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:34:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:04:00', 'camera_id': 1}
2025-11-04 17:35:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:04:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:04:00', 'camera_id': 2}
2025-11-04 17:35:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:35:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:04:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:35:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:05:00', 'camera_id': 1}
2025-11-04 17:36:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:05:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:05:00', 'camera_id': 2}
2025-11-04 17:36:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:36:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:05:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:36:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:06:00', 'camera_id': 1}
2025-11-04 17:37:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:06:00', 'camera_id': 2}
2025-11-04 17:37:27 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:37:27 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:37:27 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:07:00', 'camera_id': 1}
2025-11-04 17:38:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:07:00', 'camera_id': 2}
2025-11-04 17:38:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:38:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:38:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:08:00', 'camera_id': 1}
2025-11-04 17:39:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:08:00', 'camera_id': 2}
2025-11-04 17:39:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:39:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:39:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:09:00', 'camera_id': 1}
2025-11-04 17:40:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:09:00', 'camera_id': 2}
2025-11-04 17:40:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:40:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:40:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:10:00', 'camera_id': 1}
2025-11-04 17:41:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:10:00', 'camera_id': 2}
2025-11-04 17:41:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:41:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:41:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:11:00', 'camera_id': 1}
2025-11-04 17:42:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:11:00', 'camera_id': 2}
2025-11-04 17:42:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:42:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:42:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:12:00', 'camera_id': 1}
2025-11-04 17:43:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:12:00', 'camera_id': 2}
2025-11-04 17:43:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:43:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:43:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:13:00', 'camera_id': 1}
2025-11-04 17:44:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:13:00', 'camera_id': 2}
2025-11-04 17:44:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:44:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:44:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:14:00', 'camera_id': 1}
2025-11-04 17:45:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:14:00', 'camera_id': 2}
2025-11-04 17:45:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:45:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:45:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:15:00', 'camera_id': 1}
2025-11-04 17:46:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:15:00', 'camera_id': 2}
2025-11-04 17:46:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:46:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:46:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:16:00', 'camera_id': 1}
2025-11-04 17:47:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:16:00', 'camera_id': 2}
2025-11-04 17:47:28 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:47:28 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:47:28 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:17:00', 'camera_id': 1}
2025-11-04 17:48:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:17:00', 'camera_id': 2}
2025-11-04 17:48:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:48:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:17:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:48:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:18:00', 'camera_id': 1}
2025-11-04 17:49:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:18:00', 'camera_id': 2}
2025-11-04 17:49:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:49:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:18:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:49:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:19:00', 'camera_id': 1}
2025-11-04 17:50:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:19:00', 'camera_id': 2}
2025-11-04 17:50:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:50:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:19:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:50:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:20:00', 'camera_id': 1}
2025-11-04 17:51:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:20:00', 'camera_id': 2}
2025-11-04 17:51:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:51:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:20:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:51:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:21:00', 'camera_id': 1}
2025-11-04 17:52:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:21:00', 'camera_id': 2}
2025-11-04 17:52:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:52:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:21:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:52:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:22:00', 'camera_id': 1}
2025-11-04 17:53:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:22:00', 'camera_id': 2}
2025-11-04 17:53:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:53:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:22:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:53:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:23:00', 'camera_id': 1}
2025-11-04 17:54:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:23:00', 'camera_id': 2}
2025-11-04 17:54:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:54:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:23:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:54:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:24:00', 'camera_id': 1}
2025-11-04 17:55:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:24:00', 'camera_id': 2}
2025-11-04 17:55:29 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:55:29 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:24:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:55:29 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:25:00', 'camera_id': 1}
2025-11-04 17:56:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:25:00', 'camera_id': 2}
2025-11-04 17:56:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:56:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:25:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:56:30 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:26:00', 'camera_id': 1}
2025-11-04 17:57:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:26:00', 'camera_id': 2}
2025-11-04 17:57:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:57:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:26:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:57:30 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - my_utils.py:422 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 60, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 10, 11, 20), 'status': 1, 'inference_url': None}]
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat', 'intrusion']
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'intrusion']}
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:27:00', 'camera_id': 1}
2025-11-04 17:58:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - my_utils.py:306 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - my_utils.py:402 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': None, 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat", "intrusion"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat', 'intrusion']}
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:85 - <module>() - Parsed ROI list (len=0)
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:96 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:27:00', 'camera_id': 2}
2025-11-04 17:58:30 - [   ERROR] - ppe_detection - app.py:113 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 17:58:30 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:27:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:125 - <module>() - Image get from api :: None
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:375 - <module>() - AI Processing Ended - **************************************************
2025-11-04 17:58:30 - [    INFO] - ppe_detection - app.py:383 - <module>() - Sleeping for 60 Seconds
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 18:22:38 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 18:22:38 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.35, MODEL_IOU=0.45
2025-11-04 18:22:38 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 18:22:38 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 18:22:39 - [    INFO] - ppe_detection - my_utils.py:29 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x787aadbb7eb0>
2025-11-04 18:22:39 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 18:22:39 - [    INFO] - ppe_detection - my_utils.py:139 - load_model() - Load Model
2025-11-04 18:22:40 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:51:00', 'camera_id': 1}
2025-11-04 18:22:40 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:51:00', 'camera_id': 2}
2025-11-04 18:22:40 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:22:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:51:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:22:40 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:52:00', 'camera_id': 1}
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260746_frame.jpg
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260746_frame.jpg
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:23:10 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:23:10 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:23:10 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1202 seconds
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:23:11 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 1 detections found.
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [300, 82, 342, 143], Conf: 0.61
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [300, 82, 342, 143]}], 'inference_time': 0.12022638320922852}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [300, 82, 342, 143]}], 'inference_time': 0.12022638320922852}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=1 after=1
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260746_frame_roi.jpg
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:52:00', 'camera_id': 2}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260748_frame.jpg
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame.jpg
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:23:11 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.0814 seconds
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:23:11 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [359, 269, 418, 366], Conf: 0.70
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [314, 71, 340, 102], Conf: 0.59
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [126, 596, 200, 640], Conf: 0.45
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [327, 109, 364, 173], Conf: 0.36
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [359, 269, 418, 366]}, {'label': 'hardhat', 'location': [314, 71, 340, 102]}, {'label': 'no_hardhat', 'location': [126, 596, 200, 640]}, {'label': 'no_vest', 'location': [327, 109, 364, 173]}], 'inference_time': 0.08136153221130371}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [359, 269, 418, 366]}, {'label': 'hardhat', 'location': [314, 71, 340, 102]}, {'label': 'no_hardhat', 'location': [126, 596, 200, 640]}, {'label': 'no_vest', 'location': [327, 109, 364, 173]}], 'inference_time': 0.08136153221130371}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=1 rois=1
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame_roi.jpg
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260748_frame.jpg', 'image_size': 640}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762260748_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:23:11 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762260748_frame.jpg
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762260748_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762260748_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [359.0, 269.0, 418.0, 366.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T12:52:00+00:00', 'created_date': '2025-11-04T12:53:11.175000', 'updated_date': '2025-11-04T12:53:11', '_id': '6909f73766237910ebf4fd7b'}
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:23:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:23:11 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:52:00', 'camera_id': 1}
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260746_frame.jpg
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260746_frame.jpg
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:23:41 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:23:41 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:23:41 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1225 seconds
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:23:42 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 1 detections found.
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [300, 82, 342, 143], Conf: 0.61
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [300, 82, 342, 143]}], 'inference_time': 0.1224968433380127}
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [300, 82, 342, 143]}], 'inference_time': 0.1224968433380127}
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=1 after=1
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260746_frame_roi.jpg
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:52:00', 'camera_id': 2}
2025-11-04 18:23:42 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:23:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:23:43 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260748_frame.jpg
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame.jpg
2025-11-04 18:23:43 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:23:43 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:23:43 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:23:43 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:23:43 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:23:43 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1069 seconds
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:23:44 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [359, 269, 418, 366], Conf: 0.70
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [314, 71, 340, 102], Conf: 0.59
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [126, 596, 200, 640], Conf: 0.45
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [327, 109, 364, 173], Conf: 0.36
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [359, 269, 418, 366]}, {'label': 'hardhat', 'location': [314, 71, 340, 102]}, {'label': 'no_hardhat', 'location': [126, 596, 200, 640]}, {'label': 'no_vest', 'location': [327, 109, 364, 173]}], 'inference_time': 0.10693836212158203}
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [359, 269, 418, 366]}, {'label': 'hardhat', 'location': [314, 71, 340, 102]}, {'label': 'no_hardhat', 'location': [126, 596, 200, 640]}, {'label': 'no_vest', 'location': [327, 109, 364, 173]}], 'inference_time': 0.10693836212158203}
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=1 rois=1
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame_roi.jpg
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260748_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260748_frame.jpg', 'image_size': 640}
2025-11-04 18:23:44 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260748_frame.jpg"}
2025-11-04 18:23:44 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:52:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:23:44 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:53:00', 'camera_id': 1}
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260749_frame.jpg
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260749_frame.jpg
2025-11-04 18:24:14 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:24:14 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:24:15 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1026 seconds
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:24:15 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 1 detections found.
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 79, 343, 129], Conf: 0.47
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [306, 79, 343, 129]}], 'inference_time': 0.10255050659179688}
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [306, 79, 343, 129]}], 'inference_time': 0.10255050659179688}
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=1 after=1
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260749_frame_roi.jpg
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:53:00', 'camera_id': 2}
2025-11-04 18:24:15 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:24:15 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260751_frame.jpg
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260751_frame.jpg
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:24:16 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1325 seconds
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:24:16 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [299, 95, 322, 124], Conf: 0.58
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [124, 596, 200, 640], Conf: 0.57
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 70, 339, 96], Conf: 0.40
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [299, 95, 322, 124]}, {'label': 'no_hardhat', 'location': [124, 596, 200, 640]}, {'label': 'hardhat', 'location': [316, 70, 339, 96]}], 'inference_time': 0.13248085975646973}
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [299, 95, 322, 124]}, {'label': 'no_hardhat', 'location': [124, 596, 200, 640]}, {'label': 'hardhat', 'location': [316, 70, 339, 96]}], 'inference_time': 0.13248085975646973}
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=3 after=3
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=1
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260751_frame_roi.jpg
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:24:16 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:24:16 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:53:00', 'camera_id': 1}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260749_frame.jpg
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260749_frame.jpg
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:24:46 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1085 seconds
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:24:46 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 1 detections found.
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 79, 343, 129], Conf: 0.47
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [306, 79, 343, 129]}], 'inference_time': 0.10849213600158691}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [306, 79, 343, 129]}], 'inference_time': 0.10849213600158691}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=1 after=1
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260749_frame_roi.jpg
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:53:00', 'camera_id': 2}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260751_frame.jpg
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260751_frame.jpg
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:24:46 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1177 seconds
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:24:46 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [299, 95, 322, 124], Conf: 0.58
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [124, 596, 200, 640], Conf: 0.57
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 70, 339, 96], Conf: 0.40
2025-11-04 18:24:46 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [299, 95, 322, 124]}, {'label': 'no_hardhat', 'location': [124, 596, 200, 640]}, {'label': 'hardhat', 'location': [316, 70, 339, 96]}], 'inference_time': 0.11773324012756348}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [299, 95, 322, 124]}, {'label': 'no_hardhat', 'location': [124, 596, 200, 640]}, {'label': 'hardhat', 'location': [316, 70, 339, 96]}], 'inference_time': 0.11773324012756348}
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=3 after=3
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=1
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260751_frame_roi.jpg
2025-11-04 18:24:46 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:24:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:53:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:24:47 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:24:47 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:54:00', 'camera_id': 1}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260800_frame.jpg
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame.jpg
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:25:17 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1174 seconds
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:25:17 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 283, 363, 376], Conf: 0.49
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 53, 343, 80], Conf: 0.47
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [309, 81, 344, 134], Conf: 0.47
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [464, 372, 548, 512], Conf: 0.40
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [306, 283, 363, 376]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'no_vest', 'location': [309, 81, 344, 134]}, {'label': 'no_vest', 'location': [464, 372, 548, 512]}], 'inference_time': 0.11744928359985352}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [306, 283, 363, 376]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'no_vest', 'location': [309, 81, 344, 134]}, {'label': 'no_vest', 'location': [464, 372, 548, 512]}], 'inference_time': 0.11744928359985352}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame_roi.jpg
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260800_frame.jpg', 'image_size': 640}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762260800_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:25:17 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=1 file=1762260800_frame.jpg
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762260800_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762260800_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [306.0, 283.0, 363.0, 376.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T12:54:00+00:00', 'created_date': '2025-11-04T12:55:17.229000', 'updated_date': '2025-11-04T12:55:17', '_id': '6909f7b566237910ebf4fd7d'}
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:54:00', 'camera_id': 2}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260802_frame.jpg
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260802_frame.jpg
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:25:17 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1124 seconds
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:25:17 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [333, 117, 364, 173], Conf: 0.44
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 70, 338, 96], Conf: 0.41
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [286, 94, 308, 126], Conf: 0.40
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [353, 92, 374, 120], Conf: 0.38
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [333, 117, 364, 173]}, {'label': 'hardhat', 'location': [316, 70, 338, 96]}, {'label': 'no_hardhat', 'location': [286, 94, 308, 126]}, {'label': 'no_hardhat', 'location': [353, 92, 374, 120]}], 'inference_time': 0.11243343353271484}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [333, 117, 364, 173]}, {'label': 'hardhat', 'location': [316, 70, 338, 96]}, {'label': 'no_hardhat', 'location': [286, 94, 308, 126]}, {'label': 'no_hardhat', 'location': [353, 92, 374, 120]}], 'inference_time': 0.11243343353271484}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=0 rois=1
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260802_frame_roi.jpg
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:25:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:25:17 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:54:00', 'camera_id': 1}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260800_frame.jpg
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame.jpg
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:25:47 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1048 seconds
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:25:47 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 283, 363, 376], Conf: 0.49
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 53, 343, 80], Conf: 0.47
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [309, 81, 344, 134], Conf: 0.47
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [464, 372, 548, 512], Conf: 0.40
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [306, 283, 363, 376]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'no_vest', 'location': [309, 81, 344, 134]}, {'label': 'no_vest', 'location': [464, 372, 548, 512]}], 'inference_time': 0.10476064682006836}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [306, 283, 363, 376]}, {'label': 'hardhat', 'location': [316, 53, 343, 80]}, {'label': 'no_vest', 'location': [309, 81, 344, 134]}, {'label': 'no_vest', 'location': [464, 372, 548, 512]}], 'inference_time': 0.10476064682006836}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame_roi.jpg
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260800_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260800_frame.jpg', 'image_size': 640}
2025-11-04 18:25:47 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260800_frame.jpg"}
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:54:00', 'camera_id': 2}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260802_frame.jpg
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260802_frame.jpg
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:25:47 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1053 seconds
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:25:47 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [333, 117, 364, 173], Conf: 0.44
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [316, 70, 338, 96], Conf: 0.41
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [286, 94, 308, 126], Conf: 0.40
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [353, 92, 374, 120], Conf: 0.38
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [333, 117, 364, 173]}, {'label': 'hardhat', 'location': [316, 70, 338, 96]}, {'label': 'no_hardhat', 'location': [286, 94, 308, 126]}, {'label': 'no_hardhat', 'location': [353, 92, 374, 120]}], 'inference_time': 0.1052553653717041}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [333, 117, 364, 173]}, {'label': 'hardhat', 'location': [316, 70, 338, 96]}, {'label': 'no_hardhat', 'location': [286, 94, 308, 126]}, {'label': 'no_hardhat', 'location': [353, 92, 374, 120]}], 'inference_time': 0.1052553653717041}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=0 rois=1
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260802_frame_roi.jpg
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:25:47 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:54:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:25:47 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:55:00', 'camera_id': 1}
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260806_frame.jpg
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame.jpg
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:26:17 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:26:17 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:26:17 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1341 seconds
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:26:18 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [324, 53, 346, 84], Conf: 0.74
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [313, 372, 381, 488], Conf: 0.68
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 89, 351, 139], Conf: 0.61
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [324, 53, 346, 84]}, {'label': 'no_vest', 'location': [313, 372, 381, 488]}, {'label': 'no_vest', 'location': [307, 89, 351, 139]}], 'inference_time': 0.13409829139709473}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [324, 53, 346, 84]}, {'label': 'no_vest', 'location': [313, 372, 381, 488]}, {'label': 'no_vest', 'location': [307, 89, 351, 139]}], 'inference_time': 0.13409829139709473}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=3
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame_roi.jpg
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260806_frame.jpg', 'image_size': 640}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762260806_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:26:18 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=1 file=1762260806_frame.jpg
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762260806_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762260806_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [313.0, 372.0, 381.0, 488.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T12:55:00+00:00', 'created_date': '2025-11-04T12:56:18.020000', 'updated_date': '2025-11-04T12:56:18', '_id': '6909f7f266237910ebf4fd7f'}
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:55:00', 'camera_id': 2}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260808_frame.jpg
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame.jpg
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:26:18 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1115 seconds
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:26:18 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 209, 403, 249], Conf: 0.77
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [352, 252, 401, 338], Conf: 0.64
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [287, 102, 309, 127], Conf: 0.57
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [284, 129, 317, 181], Conf: 0.55
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [332, 120, 363, 173], Conf: 0.46
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [354, 99, 374, 125], Conf: 0.41
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [315, 70, 338, 97], Conf: 0.37
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [373, 209, 403, 249]}, {'label': 'no_vest', 'location': [352, 252, 401, 338]}, {'label': 'no_hardhat', 'location': [287, 102, 309, 127]}, {'label': 'no_vest', 'location': [284, 129, 317, 181]}, {'label': 'no_vest', 'location': [332, 120, 363, 173]}, {'label': 'no_hardhat', 'location': [354, 99, 374, 125]}, {'label': 'hardhat', 'location': [315, 70, 338, 97]}], 'inference_time': 0.11153960227966309}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [373, 209, 403, 249]}, {'label': 'no_vest', 'location': [352, 252, 401, 338]}, {'label': 'no_hardhat', 'location': [287, 102, 309, 127]}, {'label': 'no_vest', 'location': [284, 129, 317, 181]}, {'label': 'no_vest', 'location': [332, 120, 363, 173]}, {'label': 'no_hardhat', 'location': [354, 99, 374, 125]}, {'label': 'hardhat', 'location': [315, 70, 338, 97]}], 'inference_time': 0.11153960227966309}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=1 rois=1
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame_roi.jpg
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260808_frame.jpg', 'image_size': 640}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762260808_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:26:18 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762260808_frame.jpg
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762260808_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762260808_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [352.0, 252.0, 401.0, 338.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T12:55:00+00:00', 'created_date': '2025-11-04T12:56:18.203000', 'updated_date': '2025-11-04T12:56:18', '_id': '6909f7f266237910ebf4fd80'}
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:26:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:26:18 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:55:00', 'camera_id': 1}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260806_frame.jpg
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame.jpg
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:26:48 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1418 seconds
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:26:48 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [324, 53, 346, 84], Conf: 0.74
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [313, 372, 381, 488], Conf: 0.68
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 89, 351, 139], Conf: 0.61
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [324, 53, 346, 84]}, {'label': 'no_vest', 'location': [313, 372, 381, 488]}, {'label': 'no_vest', 'location': [307, 89, 351, 139]}], 'inference_time': 0.1418297290802002}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [324, 53, 346, 84]}, {'label': 'no_vest', 'location': [313, 372, 381, 488]}, {'label': 'no_vest', 'location': [307, 89, 351, 139]}], 'inference_time': 0.1418297290802002}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=3
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame_roi.jpg
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260806_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260806_frame.jpg', 'image_size': 640}
2025-11-04 18:26:48 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260806_frame.jpg"}
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:55:00', 'camera_id': 2}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260808_frame.jpg
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame.jpg
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:26:48 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1326 seconds
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:26:48 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 209, 403, 249], Conf: 0.77
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [352, 252, 401, 338], Conf: 0.64
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [287, 102, 309, 127], Conf: 0.57
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [284, 129, 317, 181], Conf: 0.55
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [332, 120, 363, 173], Conf: 0.46
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [354, 99, 374, 125], Conf: 0.41
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [315, 70, 338, 97], Conf: 0.37
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [373, 209, 403, 249]}, {'label': 'no_vest', 'location': [352, 252, 401, 338]}, {'label': 'no_hardhat', 'location': [287, 102, 309, 127]}, {'label': 'no_vest', 'location': [284, 129, 317, 181]}, {'label': 'no_vest', 'location': [332, 120, 363, 173]}, {'label': 'no_hardhat', 'location': [354, 99, 374, 125]}, {'label': 'hardhat', 'location': [315, 70, 338, 97]}], 'inference_time': 0.1326301097869873}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [373, 209, 403, 249]}, {'label': 'no_vest', 'location': [352, 252, 401, 338]}, {'label': 'no_hardhat', 'location': [287, 102, 309, 127]}, {'label': 'no_vest', 'location': [284, 129, 317, 181]}, {'label': 'no_vest', 'location': [332, 120, 363, 173]}, {'label': 'no_hardhat', 'location': [354, 99, 374, 125]}, {'label': 'hardhat', 'location': [315, 70, 338, 97]}], 'inference_time': 0.1326301097869873}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=1 rois=1
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame_roi.jpg
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260808_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260808_frame.jpg', 'image_size': 640}
2025-11-04 18:26:48 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260808_frame.jpg"}
2025-11-04 18:26:48 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:55:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:26:48 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:56:00', 'camera_id': 1}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260812_frame.jpg
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame.jpg
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:27:18 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1504 seconds
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:27:18 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [329, 59, 353, 91], Conf: 0.66
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [287, 113, 334, 171], Conf: 0.52
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [458, 110, 483, 138], Conf: 0.50
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [323, 311, 358, 354], Conf: 0.47
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [304, 345, 363, 411], Conf: 0.41
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [329, 59, 353, 91]}, {'label': 'no_vest', 'location': [287, 113, 334, 171]}, {'label': 'no_hardhat', 'location': [458, 110, 483, 138]}, {'label': 'no_hardhat', 'location': [323, 311, 358, 354]}, {'label': 'no_vest', 'location': [304, 345, 363, 411]}], 'inference_time': 0.15038132667541504}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [329, 59, 353, 91]}, {'label': 'no_vest', 'location': [287, 113, 334, 171]}, {'label': 'no_hardhat', 'location': [458, 110, 483, 138]}, {'label': 'no_hardhat', 'location': [323, 311, 358, 354]}, {'label': 'no_vest', 'location': [304, 345, 363, 411]}], 'inference_time': 0.15038132667541504}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=5 after=5
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=2
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame_roi.jpg
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260812_frame.jpg', 'image_size': 640}
2025-11-04 18:27:18 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260812_frame.jpg"}
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:56:00', 'camera_id': 2}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260814_frame.jpg
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame.jpg
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:27:18 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:27:18 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:27:18 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1530 seconds
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:27:19 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [376, 212, 410, 263], Conf: 0.83
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 259, 399, 346], Conf: 0.75
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 126, 318, 186], Conf: 0.71
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 89, 374, 116], Conf: 0.70
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [290, 89, 313, 124], Conf: 0.65
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [314, 70, 339, 99], Conf: 0.47
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 115, 366, 173], Conf: 0.42
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [376, 212, 410, 263]}, {'label': 'no_vest', 'location': [351, 259, 399, 346]}, {'label': 'no_vest', 'location': [280, 126, 318, 186]}, {'label': 'no_hardhat', 'location': [351, 89, 374, 116]}, {'label': 'no_hardhat', 'location': [290, 89, 313, 124]}, {'label': 'hardhat', 'location': [314, 70, 339, 99]}, {'label': 'no_vest', 'location': [331, 115, 366, 173]}], 'inference_time': 0.15304303169250488}
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [376, 212, 410, 263]}, {'label': 'no_vest', 'location': [351, 259, 399, 346]}, {'label': 'no_vest', 'location': [280, 126, 318, 186]}, {'label': 'no_hardhat', 'location': [351, 89, 374, 116]}, {'label': 'no_hardhat', 'location': [290, 89, 313, 124]}, {'label': 'hardhat', 'location': [314, 70, 339, 99]}, {'label': 'no_vest', 'location': [331, 115, 366, 173]}], 'inference_time': 0.15304303169250488}
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame_roi.jpg
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260814_frame.jpg', 'image_size': 640}
2025-11-04 18:27:19 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260814_frame.jpg"}
2025-11-04 18:27:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:27:19 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:56:00', 'camera_id': 1}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260812_frame.jpg
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame.jpg
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:27:49 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1579 seconds
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:27:49 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [329, 59, 353, 91], Conf: 0.66
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [287, 113, 334, 171], Conf: 0.52
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [458, 110, 483, 138], Conf: 0.50
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [323, 311, 358, 354], Conf: 0.47
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [304, 345, 363, 411], Conf: 0.41
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [329, 59, 353, 91]}, {'label': 'no_vest', 'location': [287, 113, 334, 171]}, {'label': 'no_hardhat', 'location': [458, 110, 483, 138]}, {'label': 'no_hardhat', 'location': [323, 311, 358, 354]}, {'label': 'no_vest', 'location': [304, 345, 363, 411]}], 'inference_time': 0.15789341926574707}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [329, 59, 353, 91]}, {'label': 'no_vest', 'location': [287, 113, 334, 171]}, {'label': 'no_hardhat', 'location': [458, 110, 483, 138]}, {'label': 'no_hardhat', 'location': [323, 311, 358, 354]}, {'label': 'no_vest', 'location': [304, 345, 363, 411]}], 'inference_time': 0.15789341926574707}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=5 after=5
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=2
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame_roi.jpg
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260812_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260812_frame.jpg', 'image_size': 640}
2025-11-04 18:27:49 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260812_frame.jpg"}
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:56:00', 'camera_id': 2}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260814_frame.jpg
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame.jpg
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:27:49 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1184 seconds
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:27:49 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [376, 212, 410, 263], Conf: 0.83
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 259, 399, 346], Conf: 0.75
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 126, 318, 186], Conf: 0.71
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 89, 374, 116], Conf: 0.70
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [290, 89, 313, 124], Conf: 0.65
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [314, 70, 339, 99], Conf: 0.47
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 115, 366, 173], Conf: 0.42
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [376, 212, 410, 263]}, {'label': 'no_vest', 'location': [351, 259, 399, 346]}, {'label': 'no_vest', 'location': [280, 126, 318, 186]}, {'label': 'no_hardhat', 'location': [351, 89, 374, 116]}, {'label': 'no_hardhat', 'location': [290, 89, 313, 124]}, {'label': 'hardhat', 'location': [314, 70, 339, 99]}, {'label': 'no_vest', 'location': [331, 115, 366, 173]}], 'inference_time': 0.11838507652282715}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [376, 212, 410, 263]}, {'label': 'no_vest', 'location': [351, 259, 399, 346]}, {'label': 'no_vest', 'location': [280, 126, 318, 186]}, {'label': 'no_hardhat', 'location': [351, 89, 374, 116]}, {'label': 'no_hardhat', 'location': [290, 89, 313, 124]}, {'label': 'hardhat', 'location': [314, 70, 339, 99]}, {'label': 'no_vest', 'location': [331, 115, 366, 173]}], 'inference_time': 0.11838507652282715}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame_roi.jpg
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260814_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260814_frame.jpg', 'image_size': 640}
2025-11-04 18:27:49 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260814_frame.jpg"}
2025-11-04 18:27:49 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:56:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:27:49 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:57:00', 'camera_id': 1}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260818_frame.jpg
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260818_frame.jpg
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:28:19 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1043 seconds
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:28:19 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 84], Conf: 0.65
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [315, 83, 352, 134], Conf: 0.56
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [432, 126, 459, 167], Conf: 0.44
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [457, 109, 484, 140], Conf: 0.39
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [315, 83, 352, 134]}, {'label': 'no_hardhat', 'location': [432, 126, 459, 167]}, {'label': 'no_hardhat', 'location': [457, 109, 484, 140]}], 'inference_time': 0.10429883003234863}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [315, 83, 352, 134]}, {'label': 'no_hardhat', 'location': [432, 126, 459, 167]}, {'label': 'no_hardhat', 'location': [457, 109, 484, 140]}], 'inference_time': 0.10429883003234863}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=2
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260818_frame_roi.jpg
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:57:00', 'camera_id': 2}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260820_frame.jpg
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame.jpg
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:28:19 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1306 seconds
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:28:19 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 210, 408, 264], Conf: 0.80
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [349, 89, 374, 117], Conf: 0.73
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [279, 127, 318, 185], Conf: 0.67
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [289, 91, 313, 124], Conf: 0.67
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [333, 115, 366, 172], Conf: 0.37
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [313, 71, 337, 97], Conf: 0.37
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [373, 210, 408, 264]}, {'label': 'no_hardhat', 'location': [349, 89, 374, 117]}, {'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [289, 91, 313, 124]}, {'label': 'no_vest', 'location': [333, 115, 366, 172]}, {'label': 'hardhat', 'location': [313, 71, 337, 97]}], 'inference_time': 0.130601167678833}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [373, 210, 408, 264]}, {'label': 'no_hardhat', 'location': [349, 89, 374, 117]}, {'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [289, 91, 313, 124]}, {'label': 'no_vest', 'location': [333, 115, 366, 172]}, {'label': 'hardhat', 'location': [313, 71, 337, 97]}], 'inference_time': 0.130601167678833}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=1 rois=1
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame_roi.jpg
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260820_frame.jpg', 'image_size': 640}
2025-11-04 18:28:19 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260820_frame.jpg"}
2025-11-04 18:28:19 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:28:19 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:57:00', 'camera_id': 1}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260818_frame.jpg
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260818_frame.jpg
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:28:50 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1074 seconds
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:28:50 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 84], Conf: 0.65
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [315, 83, 352, 134], Conf: 0.56
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [432, 126, 459, 167], Conf: 0.44
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [457, 109, 484, 140], Conf: 0.39
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [315, 83, 352, 134]}, {'label': 'no_hardhat', 'location': [432, 126, 459, 167]}, {'label': 'no_hardhat', 'location': [457, 109, 484, 140]}], 'inference_time': 0.10735321044921875}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [315, 83, 352, 134]}, {'label': 'no_hardhat', 'location': [432, 126, 459, 167]}, {'label': 'no_hardhat', 'location': [457, 109, 484, 140]}], 'inference_time': 0.10735321044921875}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=2
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260818_frame_roi.jpg
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:57:00', 'camera_id': 2}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260820_frame.jpg
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame.jpg
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:28:50 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1308 seconds
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:28:50 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 210, 408, 264], Conf: 0.80
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [349, 89, 374, 117], Conf: 0.73
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [279, 127, 318, 185], Conf: 0.67
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [289, 91, 313, 124], Conf: 0.67
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [333, 115, 366, 172], Conf: 0.37
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [313, 71, 337, 97], Conf: 0.37
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [373, 210, 408, 264]}, {'label': 'no_hardhat', 'location': [349, 89, 374, 117]}, {'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [289, 91, 313, 124]}, {'label': 'no_vest', 'location': [333, 115, 366, 172]}, {'label': 'hardhat', 'location': [313, 71, 337, 97]}], 'inference_time': 0.13083744049072266}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [373, 210, 408, 264]}, {'label': 'no_hardhat', 'location': [349, 89, 374, 117]}, {'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [289, 91, 313, 124]}, {'label': 'no_vest', 'location': [333, 115, 366, 172]}, {'label': 'hardhat', 'location': [313, 71, 337, 97]}], 'inference_time': 0.13083744049072266}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=1 rois=1
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame_roi.jpg
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260820_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260820_frame.jpg', 'image_size': 640}
2025-11-04 18:28:50 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260820_frame.jpg"}
2025-11-04 18:28:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:57:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:28:50 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:58:00', 'camera_id': 1}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260824_frame.jpg
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260824_frame.jpg
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:29:20 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1174 seconds
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:29:20 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 83], Conf: 0.67
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [305, 83, 350, 153], Conf: 0.45
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [552, 383, 635, 483], Conf: 0.36
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_vest', 'location': [305, 83, 350, 153]}, {'label': 'no_vest', 'location': [552, 383, 635, 483]}], 'inference_time': 0.11736917495727539}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_vest', 'location': [305, 83, 350, 153]}, {'label': 'no_vest', 'location': [552, 383, 635, 483]}], 'inference_time': 0.11736917495727539}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=2
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=2
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260824_frame_roi.jpg
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:58:00', 'camera_id': 2}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260826_frame.jpg
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame.jpg
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:29:20 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1186 seconds
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:29:20 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [350, 88, 374, 118], Conf: 0.69
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [286, 88, 312, 125], Conf: 0.66
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 125, 317, 187], Conf: 0.65
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 117, 365, 174], Conf: 0.58
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 211, 401, 257], Conf: 0.51
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 262, 396, 335], Conf: 0.43
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [290, 274, 351, 369], Conf: 0.36
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [350, 88, 374, 118]}, {'label': 'no_hardhat', 'location': [286, 88, 312, 125]}, {'label': 'no_vest', 'location': [280, 125, 317, 187]}, {'label': 'no_vest', 'location': [331, 117, 365, 174]}, {'label': 'no_hardhat', 'location': [373, 211, 401, 257]}, {'label': 'no_vest', 'location': [351, 262, 396, 335]}, {'label': 'no_vest', 'location': [290, 274, 351, 369]}], 'inference_time': 0.1185758113861084}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [350, 88, 374, 118]}, {'label': 'no_hardhat', 'location': [286, 88, 312, 125]}, {'label': 'no_vest', 'location': [280, 125, 317, 187]}, {'label': 'no_vest', 'location': [331, 117, 365, 174]}, {'label': 'no_hardhat', 'location': [373, 211, 401, 257]}, {'label': 'no_vest', 'location': [351, 262, 396, 335]}, {'label': 'no_vest', 'location': [290, 274, 351, 369]}], 'inference_time': 0.1185758113861084}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame_roi.jpg
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260826_frame.jpg', 'image_size': 640}
2025-11-04 18:29:20 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260826_frame.jpg"}
2025-11-04 18:29:20 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:29:20 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:58:00', 'camera_id': 1}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260824_frame.jpg
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260824_frame.jpg
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:29:50 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.0968 seconds
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:29:50 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 83], Conf: 0.67
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [305, 83, 350, 153], Conf: 0.45
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [552, 383, 635, 483], Conf: 0.36
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_vest', 'location': [305, 83, 350, 153]}, {'label': 'no_vest', 'location': [552, 383, 635, 483]}], 'inference_time': 0.096771240234375}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_vest', 'location': [305, 83, 350, 153]}, {'label': 'no_vest', 'location': [552, 383, 635, 483]}], 'inference_time': 0.096771240234375}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=2
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=2
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260824_frame_roi.jpg
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:29:50 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:29:50 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:58:00', 'camera_id': 2}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260826_frame.jpg
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame.jpg
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:29:51 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1685 seconds
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:29:51 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [350, 88, 374, 118], Conf: 0.69
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [286, 88, 312, 125], Conf: 0.66
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 125, 317, 187], Conf: 0.65
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 117, 365, 174], Conf: 0.58
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [373, 211, 401, 257], Conf: 0.51
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 262, 396, 335], Conf: 0.43
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [290, 274, 351, 369], Conf: 0.36
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [350, 88, 374, 118]}, {'label': 'no_hardhat', 'location': [286, 88, 312, 125]}, {'label': 'no_vest', 'location': [280, 125, 317, 187]}, {'label': 'no_vest', 'location': [331, 117, 365, 174]}, {'label': 'no_hardhat', 'location': [373, 211, 401, 257]}, {'label': 'no_vest', 'location': [351, 262, 396, 335]}, {'label': 'no_vest', 'location': [290, 274, 351, 369]}], 'inference_time': 0.16848444938659668}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [350, 88, 374, 118]}, {'label': 'no_hardhat', 'location': [286, 88, 312, 125]}, {'label': 'no_vest', 'location': [280, 125, 317, 187]}, {'label': 'no_vest', 'location': [331, 117, 365, 174]}, {'label': 'no_hardhat', 'location': [373, 211, 401, 257]}, {'label': 'no_vest', 'location': [351, 262, 396, 335]}, {'label': 'no_vest', 'location': [290, 274, 351, 369]}], 'inference_time': 0.16848444938659668}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame_roi.jpg
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260826_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260826_frame.jpg', 'image_size': 640}
2025-11-04 18:29:51 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260826_frame.jpg"}
2025-11-04 18:29:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:58:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:29:51 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:59:00', 'camera_id': 1}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260830_frame.jpg
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260830_frame.jpg
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:30:21 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1963 seconds
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:30:21 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 83], Conf: 0.57
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [310, 83, 350, 132], Conf: 0.50
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [310, 83, 350, 132]}], 'inference_time': 0.19628691673278809}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [310, 83, 350, 132]}], 'inference_time': 0.19628691673278809}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260830_frame_roi.jpg
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:59:00', 'camera_id': 2}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260832_frame.jpg
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame.jpg
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:30:21 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1856 seconds
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:30:21 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 10 detections found.
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [376, 215, 408, 268], Conf: 0.74
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [305, 210, 353, 271], Conf: 0.71
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [355, 263, 405, 344], Conf: 0.69
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 90, 373, 117], Conf: 0.67
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [293, 279, 350, 375], Conf: 0.65
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 115, 366, 172], Conf: 0.63
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 124, 315, 186], Conf: 0.62
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [283, 94, 308, 125], Conf: 0.57
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [313, 70, 337, 99], Conf: 0.35
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [305, 207, 353, 272], Conf: 0.35
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [376, 215, 408, 268]}, {'label': 'no_hardhat', 'location': [305, 210, 353, 271]}, {'label': 'no_vest', 'location': [355, 263, 405, 344]}, {'label': 'no_hardhat', 'location': [351, 90, 373, 117]}, {'label': 'no_vest', 'location': [293, 279, 350, 375]}, {'label': 'no_vest', 'location': [331, 115, 366, 172]}, {'label': 'no_vest', 'location': [280, 124, 315, 186]}, {'label': 'no_hardhat', 'location': [283, 94, 308, 125]}, {'label': 'hardhat', 'location': [313, 70, 337, 99]}, {'label': 'no_vest', 'location': [305, 207, 353, 272]}], 'inference_time': 0.18564701080322266}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [376, 215, 408, 268]}, {'label': 'no_hardhat', 'location': [305, 210, 353, 271]}, {'label': 'no_vest', 'location': [355, 263, 405, 344]}, {'label': 'no_hardhat', 'location': [351, 90, 373, 117]}, {'label': 'no_vest', 'location': [293, 279, 350, 375]}, {'label': 'no_vest', 'location': [331, 115, 366, 172]}, {'label': 'no_vest', 'location': [280, 124, 315, 186]}, {'label': 'no_hardhat', 'location': [283, 94, 308, 125]}, {'label': 'hardhat', 'location': [313, 70, 337, 99]}, {'label': 'no_vest', 'location': [305, 207, 353, 272]}], 'inference_time': 0.18564701080322266}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=10 after=10
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=10 after=4 rois=1
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame_roi.jpg
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260832_frame.jpg', 'image_size': 640}
2025-11-04 18:30:21 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260832_frame.jpg"}
2025-11-04 18:30:21 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:30:21 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:59:00', 'camera_id': 1}
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260830_frame.jpg
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260830_frame.jpg
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:30:51 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:30:51 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:30:51 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1305 seconds
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:30:52 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 83], Conf: 0.57
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [310, 83, 350, 132], Conf: 0.50
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [310, 83, 350, 132]}], 'inference_time': 0.13045239448547363}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [310, 83, 350, 132]}], 'inference_time': 0.13045239448547363}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260830_frame_roi.jpg
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 12:59:00', 'camera_id': 2}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260832_frame.jpg
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame.jpg
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:30:52 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2145 seconds
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:30:52 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 10 detections found.
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [376, 215, 408, 268], Conf: 0.74
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [305, 210, 353, 271], Conf: 0.71
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [355, 263, 405, 344], Conf: 0.69
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 90, 373, 117], Conf: 0.67
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [293, 279, 350, 375], Conf: 0.65
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 115, 366, 172], Conf: 0.63
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 124, 315, 186], Conf: 0.62
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [283, 94, 308, 125], Conf: 0.57
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [313, 70, 337, 99], Conf: 0.35
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [305, 207, 353, 272], Conf: 0.35
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [376, 215, 408, 268]}, {'label': 'no_hardhat', 'location': [305, 210, 353, 271]}, {'label': 'no_vest', 'location': [355, 263, 405, 344]}, {'label': 'no_hardhat', 'location': [351, 90, 373, 117]}, {'label': 'no_vest', 'location': [293, 279, 350, 375]}, {'label': 'no_vest', 'location': [331, 115, 366, 172]}, {'label': 'no_vest', 'location': [280, 124, 315, 186]}, {'label': 'no_hardhat', 'location': [283, 94, 308, 125]}, {'label': 'hardhat', 'location': [313, 70, 337, 99]}, {'label': 'no_vest', 'location': [305, 207, 353, 272]}], 'inference_time': 0.21448850631713867}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [376, 215, 408, 268]}, {'label': 'no_hardhat', 'location': [305, 210, 353, 271]}, {'label': 'no_vest', 'location': [355, 263, 405, 344]}, {'label': 'no_hardhat', 'location': [351, 90, 373, 117]}, {'label': 'no_vest', 'location': [293, 279, 350, 375]}, {'label': 'no_vest', 'location': [331, 115, 366, 172]}, {'label': 'no_vest', 'location': [280, 124, 315, 186]}, {'label': 'no_hardhat', 'location': [283, 94, 308, 125]}, {'label': 'hardhat', 'location': [313, 70, 337, 99]}, {'label': 'no_vest', 'location': [305, 207, 353, 272]}], 'inference_time': 0.21448850631713867}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=10 after=10
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=10 after=4 rois=1
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame_roi.jpg
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260832_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260832_frame.jpg', 'image_size': 640}
2025-11-04 18:30:52 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260832_frame.jpg"}
2025-11-04 18:30:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 12:59:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:30:52 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:00:00', 'camera_id': 1}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260836_frame.jpg
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260836_frame.jpg
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:31:22 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1006 seconds
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:31:22 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 84], Conf: 0.65
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [311, 84, 350, 136], Conf: 0.44
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [311, 84, 350, 136]}], 'inference_time': 0.10058712959289551}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [311, 84, 350, 136]}], 'inference_time': 0.10058712959289551}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260836_frame_roi.jpg
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:00:00', 'camera_id': 2}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260838_frame.jpg
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame.jpg
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:31:22 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1555 seconds
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:31:22 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [279, 127, 318, 185], Conf: 0.74
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 90, 374, 118], Conf: 0.73
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [101, 572, 183, 640], Conf: 0.67
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [350, 260, 392, 338], Conf: 0.66
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [372, 215, 402, 256], Conf: 0.59
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [290, 92, 314, 123], Conf: 0.58
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 118, 365, 172], Conf: 0.57
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [351, 90, 374, 118]}, {'label': 'no_hardhat', 'location': [101, 572, 183, 640]}, {'label': 'no_vest', 'location': [350, 260, 392, 338]}, {'label': 'no_hardhat', 'location': [372, 215, 402, 256]}, {'label': 'no_hardhat', 'location': [290, 92, 314, 123]}, {'label': 'no_vest', 'location': [331, 118, 365, 172]}], 'inference_time': 0.1555488109588623}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [351, 90, 374, 118]}, {'label': 'no_hardhat', 'location': [101, 572, 183, 640]}, {'label': 'no_vest', 'location': [350, 260, 392, 338]}, {'label': 'no_hardhat', 'location': [372, 215, 402, 256]}, {'label': 'no_hardhat', 'location': [290, 92, 314, 123]}, {'label': 'no_vest', 'location': [331, 118, 365, 172]}], 'inference_time': 0.1555488109588623}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame_roi.jpg
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260838_frame.jpg', 'image_size': 640}
2025-11-04 18:31:22 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260838_frame.jpg"}
2025-11-04 18:31:22 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:31:22 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 52, 28), 'status': 1, 'inference_url': None}]
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:00:00', 'camera_id': 1}
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260836_frame.jpg
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260836_frame.jpg
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:31:52 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1442 seconds
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:31:52 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 84], Conf: 0.65
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [311, 84, 350, 136], Conf: 0.44
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [311, 84, 350, 136]}], 'inference_time': 0.14416241645812988}
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 347, 84]}, {'label': 'no_vest', 'location': [311, 84, 350, 136]}], 'inference_time': 0.14416241645812988}
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260836_frame_roi.jpg
2025-11-04 18:31:52 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:31:52 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:00:00', 'camera_id': 2}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260838_frame.jpg
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame.jpg
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:31:53 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1323 seconds
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:31:53 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 7 detections found.
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [279, 127, 318, 185], Conf: 0.74
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 90, 374, 118], Conf: 0.73
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [101, 572, 183, 640], Conf: 0.67
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [350, 260, 392, 338], Conf: 0.66
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [372, 215, 402, 256], Conf: 0.59
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [290, 92, 314, 123], Conf: 0.58
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [331, 118, 365, 172], Conf: 0.57
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [351, 90, 374, 118]}, {'label': 'no_hardhat', 'location': [101, 572, 183, 640]}, {'label': 'no_vest', 'location': [350, 260, 392, 338]}, {'label': 'no_hardhat', 'location': [372, 215, 402, 256]}, {'label': 'no_hardhat', 'location': [290, 92, 314, 123]}, {'label': 'no_vest', 'location': [331, 118, 365, 172]}], 'inference_time': 0.13228940963745117}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [279, 127, 318, 185]}, {'label': 'no_hardhat', 'location': [351, 90, 374, 118]}, {'label': 'no_hardhat', 'location': [101, 572, 183, 640]}, {'label': 'no_vest', 'location': [350, 260, 392, 338]}, {'label': 'no_hardhat', 'location': [372, 215, 402, 256]}, {'label': 'no_hardhat', 'location': [290, 92, 314, 123]}, {'label': 'no_vest', 'location': [331, 118, 365, 172]}], 'inference_time': 0.13228940963745117}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=7 after=7
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=7 after=2 rois=1
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame_roi.jpg
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260838_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260838_frame.jpg', 'image_size': 640}
2025-11-04 18:31:53 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260838_frame.jpg"}
2025-11-04 18:31:53 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:00:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:31:53 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:150 - setup_logger() - ================================================================================
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:151 - setup_logger() - Logger 'ppe_detection' initialized successfully
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:152 - setup_logger() - Log directory: ./logs/logs
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:153 - setup_logger() - File log level: DEBUG, Console log level: DEBUG
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:154 - setup_logger() - Log rotation: Daily + every 2000 lines, Retention: 30 days
2025-11-04 18:37:02 - [    INFO] - ppe_detection - logger_config.py:155 - setup_logger() - ================================================================================
2025-11-04 18:37:02 - [   DEBUG] - ppe_detection - config.py:57 - <module>() - Config loaded. IMAGE_SIZE=640, RESULT_TYPE_ID=1, MODEL_CONF=0.35, MODEL_IOU=0.45
2025-11-04 18:37:02 - [   DEBUG] - ppe_detection - config.py:64 - <module>() - DB table config: CAMERA_TABLE_NAME=camera_manager
2025-11-04 18:37:02 - [   DEBUG] - ppe_detection - config.py:65 - <module>() - DB table config: RESULT_MAPPING_TABLE_NAME=camera_usecase_mapping
2025-11-04 18:37:03 - [    INFO] - ppe_detection - my_utils.py:29 - <module>() - Connected to :: <mysql.connector.connection_cext.CMySQLConnection object at 0x795616d12eb0>
2025-11-04 18:37:03 - [    INFO] - ppe_detection - model_init.py:8 - load_model_from_path() - Loading model from pt_model/ppe-kit-detection-2.pt
2025-11-04 18:37:03 - [    INFO] - ppe_detection - my_utils.py:139 - load_model() - Load Model
2025-11-04 18:37:03 - [    INFO] - ppe_detection - model_init.py:10 - load_model_from_path() - Model loading completed
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:48 - <module>() - PPE Detection service starting up
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:49 - <module>() - Model weights: pt_model/ppe-kit-detection-2.pt | Device: cpu
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:06:00', 'camera_id': 1}
2025-11-04 18:37:03 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:06:00', 'camera_id': 2}
2025-11-04 18:37:03 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:37:03 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:37:03 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:06:00', 'camera_id': 1}
2025-11-04 18:37:34 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:06:00', 'camera_id': 2}
2025-11-04 18:37:34 - [   ERROR] - ppe_detection - app.py:101 - <module>() - Error: 404, {"detail":"Frame data not found for the given frame_time"}
2025-11-04 18:37:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:06:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: None
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:37:34 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:07:00', 'camera_id': 1}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260883_frame.jpg
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260883_frame.jpg
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:38:04 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1370 seconds
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:38:04 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.74
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [308, 83, 348, 132], Conf: 0.68
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [308, 83, 348, 132]}], 'inference_time': 0.13698959350585938}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [308, 83, 348, 132]}], 'inference_time': 0.13698959350585938}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260883_frame_roi.jpg
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:07:00', 'camera_id': 2}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260885_frame.jpg
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame.jpg
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:38:04 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1454 seconds
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:38:04 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [346, 274, 394, 363], Conf: 0.71
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [298, 78, 322, 114], Conf: 0.56
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [367, 214, 404, 269], Conf: 0.50
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [315, 71, 341, 103], Conf: 0.38
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [346, 274, 394, 363]}, {'label': 'no_hardhat', 'location': [298, 78, 322, 114]}, {'label': 'no_hardhat', 'location': [367, 214, 404, 269]}, {'label': 'hardhat', 'location': [315, 71, 341, 103]}], 'inference_time': 0.14536690711975098}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [346, 274, 394, 363]}, {'label': 'no_hardhat', 'location': [298, 78, 322, 114]}, {'label': 'no_hardhat', 'location': [367, 214, 404, 269]}, {'label': 'hardhat', 'location': [315, 71, 341, 103]}], 'inference_time': 0.14536690711975098}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=2 rois=1
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame_roi.jpg
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260885_frame.jpg', 'image_size': 640}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762260885_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:38:04 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762260885_frame.jpg
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762260885_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762260885_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [346.0, 274.0, 394.0, 363.0]}, {'label': 'no_hardhat', 'location': [367.0, 214.0, 404.0, 269.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:07:00+00:00', 'created_date': '2025-11-04T13:08:04.489000', 'updated_date': '2025-11-04T13:08:04', '_id': '6909fab466237910ebf4fd8d'}
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:38:04 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:38:04 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:07:00', 'camera_id': 1}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260883_frame.jpg
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260883_frame.jpg
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:38:34 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.0910 seconds
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:38:34 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.74
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [308, 83, 348, 132], Conf: 0.68
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [308, 83, 348, 132]}], 'inference_time': 0.09102654457092285}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [308, 83, 348, 132]}], 'inference_time': 0.09102654457092285}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260883_frame_roi.jpg
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:07:00', 'camera_id': 2}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762260885_frame.jpg
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame.jpg
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:38:34 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2093 seconds
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:38:34 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [346, 274, 394, 363], Conf: 0.71
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [298, 78, 322, 114], Conf: 0.56
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [367, 214, 404, 269], Conf: 0.50
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [315, 71, 341, 103], Conf: 0.38
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [346, 274, 394, 363]}, {'label': 'no_hardhat', 'location': [298, 78, 322, 114]}, {'label': 'no_hardhat', 'location': [367, 214, 404, 269]}, {'label': 'hardhat', 'location': [315, 71, 341, 103]}], 'inference_time': 0.20926904678344727}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [346, 274, 394, 363]}, {'label': 'no_hardhat', 'location': [298, 78, 322, 114]}, {'label': 'no_hardhat', 'location': [367, 214, 404, 269]}, {'label': 'hardhat', 'location': [315, 71, 341, 103]}], 'inference_time': 0.20926904678344727}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=2 rois=1
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame_roi.jpg
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762260885_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762260885_frame.jpg', 'image_size': 640}
2025-11-04 18:38:34 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762260885_frame.jpg"}
2025-11-04 18:38:34 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:07:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:38:34 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:08:00', 'camera_id': 1}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260884_frame.jpg
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260884_frame.jpg
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:39:05 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2008 seconds
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:39:05 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.76
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 83, 348, 135], Conf: 0.63
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [307, 83, 348, 135]}], 'inference_time': 0.2007732391357422}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [307, 83, 348, 135]}], 'inference_time': 0.2007732391357422}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260884_frame_roi.jpg
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:08:00', 'camera_id': 2}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261668_frame.jpg
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame.jpg
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:39:05 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1551 seconds
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:39:05 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [347, 276, 394, 362], Conf: 0.67
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [366, 211, 400, 260], Conf: 0.60
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [298, 76, 327, 116], Conf: 0.56
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [330, 77, 358, 114], Conf: 0.50
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [276, 114, 315, 185], Conf: 0.40
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [347, 276, 394, 362]}, {'label': 'no_hardhat', 'location': [366, 211, 400, 260]}, {'label': 'no_hardhat', 'location': [298, 76, 327, 116]}, {'label': 'no_hardhat', 'location': [330, 77, 358, 114]}, {'label': 'no_vest', 'location': [276, 114, 315, 185]}], 'inference_time': 0.15505743026733398}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [347, 276, 394, 362]}, {'label': 'no_hardhat', 'location': [366, 211, 400, 260]}, {'label': 'no_hardhat', 'location': [298, 76, 327, 116]}, {'label': 'no_hardhat', 'location': [330, 77, 358, 114]}, {'label': 'no_vest', 'location': [276, 114, 315, 185]}], 'inference_time': 0.15505743026733398}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=1
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame_roi.jpg
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261668_frame.jpg', 'image_size': 640}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261668_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:39:05 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261668_frame.jpg
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261668_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261668_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [347.0, 276.0, 394.0, 362.0]}, {'label': 'no_hardhat', 'location': [366.0, 211.0, 400.0, 260.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:08:00+00:00', 'created_date': '2025-11-04T13:09:05.504000', 'updated_date': '2025-11-04T13:09:05', '_id': '6909faf166237910ebf4fd8e'}
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:39:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:39:05 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:08:00', 'camera_id': 1}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260884_frame.jpg
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260884_frame.jpg
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:39:35 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1215 seconds
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:39:35 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.76
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 83, 348, 135], Conf: 0.63
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [307, 83, 348, 135]}], 'inference_time': 0.12148118019104004}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [307, 83, 348, 135]}], 'inference_time': 0.12148118019104004}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260884_frame_roi.jpg
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:08:00', 'camera_id': 2}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261668_frame.jpg
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame.jpg
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:39:35 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1430 seconds
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:39:35 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [347, 276, 394, 362], Conf: 0.67
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [366, 211, 400, 260], Conf: 0.60
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [298, 76, 327, 116], Conf: 0.56
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [330, 77, 358, 114], Conf: 0.50
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [276, 114, 315, 185], Conf: 0.40
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [347, 276, 394, 362]}, {'label': 'no_hardhat', 'location': [366, 211, 400, 260]}, {'label': 'no_hardhat', 'location': [298, 76, 327, 116]}, {'label': 'no_hardhat', 'location': [330, 77, 358, 114]}, {'label': 'no_vest', 'location': [276, 114, 315, 185]}], 'inference_time': 0.14301538467407227}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [347, 276, 394, 362]}, {'label': 'no_hardhat', 'location': [366, 211, 400, 260]}, {'label': 'no_hardhat', 'location': [298, 76, 327, 116]}, {'label': 'no_hardhat', 'location': [330, 77, 358, 114]}, {'label': 'no_vest', 'location': [276, 114, 315, 185]}], 'inference_time': 0.14301538467407227}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=1
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame_roi.jpg
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261668_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261668_frame.jpg', 'image_size': 640}
2025-11-04 18:39:35 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261668_frame.jpg"}
2025-11-04 18:39:35 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:08:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:39:35 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:40:05 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:40:05 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:40:05 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:40:05 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:09:00', 'camera_id': 1}
2025-11-04 18:40:05 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:40:05 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260890_frame.jpg
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame.jpg
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1102 seconds
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 84], Conf: 0.76
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 84, 349, 138], Conf: 0.68
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [443, 278, 484, 331], Conf: 0.43
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}, {'label': 'no_vest', 'location': [443, 278, 484, 331]}], 'inference_time': 0.11023068428039551}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}, {'label': 'no_vest', 'location': [443, 278, 484, 331]}], 'inference_time': 0.11023068428039551}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=2
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=1 rois=2
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame_roi.jpg
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260890_frame.jpg', 'image_size': 640}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762260890_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=1 file=1762260890_frame.jpg
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762260890_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762260890_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [443.0, 278.0, 484.0, 331.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:09:00+00:00', 'created_date': '2025-11-04T13:10:06.147000', 'updated_date': '2025-11-04T13:10:06', '_id': '6909fb2e66237910ebf4fd8f'}
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:09:00', 'camera_id': 2}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261670_frame.jpg
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame.jpg
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1110 seconds
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [375, 236, 410, 286], Conf: 0.80
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [346, 280, 391, 364], Conf: 0.69
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [300, 75, 326, 110], Conf: 0.63
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [335, 77, 360, 109], Conf: 0.54
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [317, 117, 364, 188], Conf: 0.48
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [281, 118, 317, 179], Conf: 0.42
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [375, 236, 410, 286]}, {'label': 'no_vest', 'location': [346, 280, 391, 364]}, {'label': 'no_hardhat', 'location': [300, 75, 326, 110]}, {'label': 'no_hardhat', 'location': [335, 77, 360, 109]}, {'label': 'no_vest', 'location': [317, 117, 364, 188]}, {'label': 'no_vest', 'location': [281, 118, 317, 179]}], 'inference_time': 0.11097955703735352}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [375, 236, 410, 286]}, {'label': 'no_vest', 'location': [346, 280, 391, 364]}, {'label': 'no_hardhat', 'location': [300, 75, 326, 110]}, {'label': 'no_hardhat', 'location': [335, 77, 360, 109]}, {'label': 'no_vest', 'location': [317, 117, 364, 188]}, {'label': 'no_vest', 'location': [281, 118, 317, 179]}], 'inference_time': 0.11097955703735352}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=2 rois=1
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame_roi.jpg
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261670_frame.jpg', 'image_size': 640}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261670_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:40:06 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261670_frame.jpg
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261670_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261670_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [375.0, 236.0, 410.0, 286.0]}, {'label': 'no_vest', 'location': [346.0, 280.0, 391.0, 364.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:09:00+00:00', 'created_date': '2025-11-04T13:10:06.339000', 'updated_date': '2025-11-04T13:10:06', '_id': '6909fb2e66237910ebf4fd90'}
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:40:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:40:06 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:09:00', 'camera_id': 1}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260890_frame.jpg
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame.jpg
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:40:36 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1124 seconds
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:40:36 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 84], Conf: 0.76
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 84, 349, 138], Conf: 0.68
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [443, 278, 484, 331], Conf: 0.43
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}, {'label': 'no_vest', 'location': [443, 278, 484, 331]}], 'inference_time': 0.11237907409667969}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}, {'label': 'no_vest', 'location': [443, 278, 484, 331]}], 'inference_time': 0.11237907409667969}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=3 after=2
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=1 rois=2
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame_roi.jpg
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260890_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260890_frame.jpg', 'image_size': 640}
2025-11-04 18:40:36 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260890_frame.jpg"}
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:09:00', 'camera_id': 2}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261670_frame.jpg
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame.jpg
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:40:36 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1029 seconds
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:40:36 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [375, 236, 410, 286], Conf: 0.80
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [346, 280, 391, 364], Conf: 0.69
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [300, 75, 326, 110], Conf: 0.63
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [335, 77, 360, 109], Conf: 0.54
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [317, 117, 364, 188], Conf: 0.48
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [281, 118, 317, 179], Conf: 0.42
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [375, 236, 410, 286]}, {'label': 'no_vest', 'location': [346, 280, 391, 364]}, {'label': 'no_hardhat', 'location': [300, 75, 326, 110]}, {'label': 'no_hardhat', 'location': [335, 77, 360, 109]}, {'label': 'no_vest', 'location': [317, 117, 364, 188]}, {'label': 'no_vest', 'location': [281, 118, 317, 179]}], 'inference_time': 0.10287141799926758}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [375, 236, 410, 286]}, {'label': 'no_vest', 'location': [346, 280, 391, 364]}, {'label': 'no_hardhat', 'location': [300, 75, 326, 110]}, {'label': 'no_hardhat', 'location': [335, 77, 360, 109]}, {'label': 'no_vest', 'location': [317, 117, 364, 188]}, {'label': 'no_vest', 'location': [281, 118, 317, 179]}], 'inference_time': 0.10287141799926758}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=2 rois=1
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame_roi.jpg
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261670_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261670_frame.jpg', 'image_size': 640}
2025-11-04 18:40:36 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261670_frame.jpg"}
2025-11-04 18:40:36 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:09:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:40:36 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:10:00', 'camera_id': 1}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260896_frame.jpg
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260896_frame.jpg
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:41:06 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1506 seconds
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:41:06 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 346, 83], Conf: 0.75
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 84, 349, 139], Conf: 0.67
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 346, 83]}, {'label': 'no_vest', 'location': [306, 84, 349, 139]}], 'inference_time': 0.1506345272064209}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 346, 83]}, {'label': 'no_vest', 'location': [306, 84, 349, 139]}], 'inference_time': 0.1506345272064209}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260896_frame_roi.jpg
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:10:00', 'camera_id': 2}
2025-11-04 18:41:06 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:41:06 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261672_frame.jpg
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame.jpg
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:41:07 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1186 seconds
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:41:07 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [369, 228, 403, 283], Conf: 0.71
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [284, 85, 305, 111], Conf: 0.68
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [343, 279, 394, 365], Conf: 0.65
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [334, 79, 355, 108], Conf: 0.53
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [369, 228, 403, 283]}, {'label': 'no_hardhat', 'location': [284, 85, 305, 111]}, {'label': 'no_vest', 'location': [343, 279, 394, 365]}, {'label': 'no_hardhat', 'location': [334, 79, 355, 108]}], 'inference_time': 0.11856341361999512}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [369, 228, 403, 283]}, {'label': 'no_hardhat', 'location': [284, 85, 305, 111]}, {'label': 'no_vest', 'location': [343, 279, 394, 365]}, {'label': 'no_hardhat', 'location': [334, 79, 355, 108]}], 'inference_time': 0.11856341361999512}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=2 rois=1
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame_roi.jpg
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261672_frame.jpg', 'image_size': 640}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261672_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:41:07 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261672_frame.jpg
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261672_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261672_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [369.0, 228.0, 403.0, 283.0]}, {'label': 'no_vest', 'location': [343.0, 279.0, 394.0, 365.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:10:00+00:00', 'created_date': '2025-11-04T13:11:07.154000', 'updated_date': '2025-11-04T13:11:07', '_id': '6909fb6b66237910ebf4fd91'}
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:41:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:41:07 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:10:00', 'camera_id': 1}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260896_frame.jpg
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260896_frame.jpg
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:41:37 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.0929 seconds
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:41:37 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 346, 83], Conf: 0.75
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 84, 349, 139], Conf: 0.67
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 58, 346, 83]}, {'label': 'no_vest', 'location': [306, 84, 349, 139]}], 'inference_time': 0.09287095069885254}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 58, 346, 83]}, {'label': 'no_vest', 'location': [306, 84, 349, 139]}], 'inference_time': 0.09287095069885254}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260896_frame_roi.jpg
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:10:00', 'camera_id': 2}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261672_frame.jpg
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame.jpg
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:41:37 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1730 seconds
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:41:37 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [369, 228, 403, 283], Conf: 0.71
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [284, 85, 305, 111], Conf: 0.68
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [343, 279, 394, 365], Conf: 0.65
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [334, 79, 355, 108], Conf: 0.53
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [369, 228, 403, 283]}, {'label': 'no_hardhat', 'location': [284, 85, 305, 111]}, {'label': 'no_vest', 'location': [343, 279, 394, 365]}, {'label': 'no_hardhat', 'location': [334, 79, 355, 108]}], 'inference_time': 0.17302823066711426}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [369, 228, 403, 283]}, {'label': 'no_hardhat', 'location': [284, 85, 305, 111]}, {'label': 'no_vest', 'location': [343, 279, 394, 365]}, {'label': 'no_hardhat', 'location': [334, 79, 355, 108]}], 'inference_time': 0.17302823066711426}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=4 after=4
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=4 after=2 rois=1
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame_roi.jpg
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261672_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261672_frame.jpg', 'image_size': 640}
2025-11-04 18:41:37 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261672_frame.jpg"}
2025-11-04 18:41:37 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:10:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:41:37 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:11:00', 'camera_id': 1}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260902_frame.jpg
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260902_frame.jpg
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:42:07 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1100 seconds
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:42:07 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 84], Conf: 0.77
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 84, 349, 138], Conf: 0.69
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}], 'inference_time': 0.10995912551879883}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}], 'inference_time': 0.10995912551879883}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260902_frame_roi.jpg
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:11:00', 'camera_id': 2}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261674_frame.jpg
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261674_frame.jpg
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:42:07 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1149 seconds
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:42:07 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [288, 84, 311, 116], Conf: 0.61
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [282, 116, 318, 178], Conf: 0.61
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [288, 84, 311, 116]}, {'label': 'no_vest', 'location': [282, 116, 318, 178]}], 'inference_time': 0.1148977279663086}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [288, 84, 311, 116]}, {'label': 'no_vest', 'location': [282, 116, 318, 178]}], 'inference_time': 0.1148977279663086}
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=2 after=2
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=1
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261674_frame_roi.jpg
2025-11-04 18:42:07 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:42:07 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:42:08 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:42:08 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:11:00', 'camera_id': 1}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260902_frame.jpg
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260902_frame.jpg
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:42:38 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2645 seconds
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:42:38 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 84], Conf: 0.77
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 84, 349, 138], Conf: 0.69
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}], 'inference_time': 0.2644832134246826}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 84]}, {'label': 'no_vest', 'location': [307, 84, 349, 138]}], 'inference_time': 0.2644832134246826}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260902_frame_roi.jpg
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:11:00', 'camera_id': 2}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261674_frame.jpg
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261674_frame.jpg
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:42:38 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1491 seconds
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:42:38 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [288, 84, 311, 116], Conf: 0.61
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [282, 116, 318, 178], Conf: 0.61
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [288, 84, 311, 116]}, {'label': 'no_vest', 'location': [282, 116, 318, 178]}], 'inference_time': 0.14912104606628418}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [288, 84, 311, 116]}, {'label': 'no_vest', 'location': [282, 116, 318, 178]}], 'inference_time': 0.14912104606628418}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=2 after=2
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=1
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261674_frame_roi.jpg
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:42:38 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:11:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:42:38 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:12:00', 'camera_id': 1}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260908_frame.jpg
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260908_frame.jpg
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:43:08 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1096 seconds
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:43:08 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 83], Conf: 0.76
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 85, 349, 140], Conf: 0.66
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [307, 85, 349, 140]}], 'inference_time': 0.10964155197143555}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [307, 85, 349, 140]}], 'inference_time': 0.10964155197143555}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260908_frame_roi.jpg
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:12:00', 'camera_id': 2}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261676_frame.jpg
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261676_frame.jpg
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:43:08 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:43:08 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:43:08 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2126 seconds
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:43:09 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 121, 313, 186], Conf: 0.48
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 98, 373, 124], Conf: 0.38
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [280, 121, 313, 186]}, {'label': 'no_hardhat', 'location': [351, 98, 373, 124]}], 'inference_time': 0.21258211135864258}
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [280, 121, 313, 186]}, {'label': 'no_hardhat', 'location': [351, 98, 373, 124]}], 'inference_time': 0.21258211135864258}
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=2 after=2
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=1
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261676_frame_roi.jpg
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:43:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:43:09 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:12:00', 'camera_id': 1}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260908_frame.jpg
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260908_frame.jpg
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:43:39 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1147 seconds
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:43:39 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 83], Conf: 0.76
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [307, 85, 349, 140], Conf: 0.66
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [307, 85, 349, 140]}], 'inference_time': 0.11470174789428711}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 83]}, {'label': 'no_vest', 'location': [307, 85, 349, 140]}], 'inference_time': 0.11470174789428711}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260908_frame_roi.jpg
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:12:00', 'camera_id': 2}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261676_frame.jpg
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261676_frame.jpg
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:43:39 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1021 seconds
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:43:39 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [280, 121, 313, 186], Conf: 0.48
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [351, 98, 373, 124], Conf: 0.38
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [280, 121, 313, 186]}, {'label': 'no_hardhat', 'location': [351, 98, 373, 124]}], 'inference_time': 0.1020510196685791}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [280, 121, 313, 186]}, {'label': 'no_hardhat', 'location': [351, 98, 373, 124]}], 'inference_time': 0.1020510196685791}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=2 after=2
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=2 after=0 rois=1
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261676_frame_roi.jpg
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=2
2025-11-04 18:43:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:12:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:43:39 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:13:00', 'camera_id': 1}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260914_frame.jpg
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260914_frame.jpg
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:44:09 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1132 seconds
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:44:09 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 84], Conf: 0.76
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 85, 349, 139], Conf: 0.62
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 84]}, {'label': 'no_vest', 'location': [306, 85, 349, 139]}], 'inference_time': 0.11318516731262207}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 84]}, {'label': 'no_vest', 'location': [306, 85, 349, 139]}], 'inference_time': 0.11318516731262207}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260914_frame_roi.jpg
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:13:00', 'camera_id': 2}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261678_frame.jpg
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame.jpg
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:44:09 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1440 seconds
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:44:09 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [336, 78, 357, 106], Conf: 0.59
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [292, 94, 315, 125], Conf: 0.56
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [377, 235, 406, 271], Conf: 0.52
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [364, 272, 413, 333], Conf: 0.41
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [329, 116, 360, 182], Conf: 0.37
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [336, 78, 357, 106]}, {'label': 'no_hardhat', 'location': [292, 94, 315, 125]}, {'label': 'no_hardhat', 'location': [377, 235, 406, 271]}, {'label': 'no_vest', 'location': [364, 272, 413, 333]}, {'label': 'no_vest', 'location': [329, 116, 360, 182]}], 'inference_time': 0.14403629302978516}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [336, 78, 357, 106]}, {'label': 'no_hardhat', 'location': [292, 94, 315, 125]}, {'label': 'no_hardhat', 'location': [377, 235, 406, 271]}, {'label': 'no_vest', 'location': [364, 272, 413, 333]}, {'label': 'no_vest', 'location': [329, 116, 360, 182]}], 'inference_time': 0.14403629302978516}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=1
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame_roi.jpg
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261678_frame.jpg', 'image_size': 640}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261678_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:44:09 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261678_frame.jpg
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261678_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261678_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_hardhat', 'location': [377.0, 235.0, 406.0, 271.0]}, {'label': 'no_vest', 'location': [364.0, 272.0, 413.0, 333.0]}]}, 'counts': {'no_hardhat': 1, 'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:13:00+00:00', 'created_date': '2025-11-04T13:14:09.879000', 'updated_date': '2025-11-04T13:14:09', '_id': '6909fc2166237910ebf4fd94'}
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:44:09 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:44:09 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:13:00', 'camera_id': 1}
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260914_frame.jpg
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260914_frame.jpg
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:44:39 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:44:39 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:44:39 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1413 seconds
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:44:40 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 2 detections found.
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 346, 84], Conf: 0.76
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [306, 85, 349, 139], Conf: 0.62
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 84]}, {'label': 'no_vest', 'location': [306, 85, 349, 139]}], 'inference_time': 0.14125657081604004}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 346, 84]}, {'label': 'no_vest', 'location': [306, 85, 349, 139]}], 'inference_time': 0.14125657081604004}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=2 after=1
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=1 after=0 rois=2
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260914_frame_roi.jpg
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:13:00', 'camera_id': 2}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261678_frame.jpg
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame.jpg
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:44:40 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1044 seconds
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:44:40 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [336, 78, 357, 106], Conf: 0.59
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [292, 94, 315, 125], Conf: 0.56
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [377, 235, 406, 271], Conf: 0.52
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [364, 272, 413, 333], Conf: 0.41
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [329, 116, 360, 182], Conf: 0.37
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_hardhat', 'location': [336, 78, 357, 106]}, {'label': 'no_hardhat', 'location': [292, 94, 315, 125]}, {'label': 'no_hardhat', 'location': [377, 235, 406, 271]}, {'label': 'no_vest', 'location': [364, 272, 413, 333]}, {'label': 'no_vest', 'location': [329, 116, 360, 182]}], 'inference_time': 0.10437536239624023}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_hardhat', 'location': [336, 78, 357, 106]}, {'label': 'no_hardhat', 'location': [292, 94, 315, 125]}, {'label': 'no_hardhat', 'location': [377, 235, 406, 271]}, {'label': 'no_vest', 'location': [364, 272, 413, 333]}, {'label': 'no_vest', 'location': [329, 116, 360, 182]}], 'inference_time': 0.10437536239624023}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=1
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame_roi.jpg
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261678_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261678_frame.jpg', 'image_size': 640}
2025-11-04 18:44:40 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261678_frame.jpg"}
2025-11-04 18:44:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:13:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:44:40 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:14:00', 'camera_id': 1}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260920_frame.jpg
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame.jpg
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1265 seconds
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [308, 466, 427, 630], Conf: 0.75
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [444, 247, 495, 319], Conf: 0.70
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [460, 203, 490, 244], Conf: 0.69
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 83], Conf: 0.63
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [310, 81, 337, 117], Conf: 0.56
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [295, 116, 346, 175], Conf: 0.40
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [308, 466, 427, 630]}, {'label': 'no_vest', 'location': [444, 247, 495, 319]}, {'label': 'no_hardhat', 'location': [460, 203, 490, 244]}, {'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_hardhat', 'location': [310, 81, 337, 117]}, {'label': 'no_vest', 'location': [295, 116, 346, 175]}], 'inference_time': 0.12653589248657227}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [308, 466, 427, 630]}, {'label': 'no_vest', 'location': [444, 247, 495, 319]}, {'label': 'no_hardhat', 'location': [460, 203, 490, 244]}, {'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_hardhat', 'location': [310, 81, 337, 117]}, {'label': 'no_vest', 'location': [295, 116, 346, 175]}], 'inference_time': 0.12653589248657227}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=6 after=5
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=2
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame_roi.jpg
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260920_frame.jpg', 'image_size': 640}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762260920_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=1 file=1762260920_frame.jpg
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762260920_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762260920_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [444.0, 247.0, 495.0, 319.0]}, {'label': 'no_hardhat', 'location': [460.0, 203.0, 490.0, 244.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:14:00+00:00', 'created_date': '2025-11-04T13:15:10.533000', 'updated_date': '2025-11-04T13:15:10', '_id': '6909fc5e66237910ebf4fd95'}
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:14:00', 'camera_id': 2}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261680_frame.jpg
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame.jpg
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1037 seconds
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [88, 558, 173, 635], Conf: 0.61
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [359, 274, 415, 361], Conf: 0.61
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [334, 78, 356, 105], Conf: 0.57
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [278, 115, 314, 182], Conf: 0.53
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [301, 81, 323, 109], Conf: 0.52
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [369, 215, 400, 266], Conf: 0.39
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [88, 558, 173, 635]}, {'label': 'no_vest', 'location': [359, 274, 415, 361]}, {'label': 'no_hardhat', 'location': [334, 78, 356, 105]}, {'label': 'no_vest', 'location': [278, 115, 314, 182]}, {'label': 'no_hardhat', 'location': [301, 81, 323, 109]}, {'label': 'no_hardhat', 'location': [369, 215, 400, 266]}], 'inference_time': 0.10370278358459473}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [88, 558, 173, 635]}, {'label': 'no_vest', 'location': [359, 274, 415, 361]}, {'label': 'no_hardhat', 'location': [334, 78, 356, 105]}, {'label': 'no_vest', 'location': [278, 115, 314, 182]}, {'label': 'no_hardhat', 'location': [301, 81, 323, 109]}, {'label': 'no_hardhat', 'location': [369, 215, 400, 266]}], 'inference_time': 0.10370278358459473}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=2 rois=1
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame_roi.jpg
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261680_frame.jpg', 'image_size': 640}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261680_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:45:10 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261680_frame.jpg
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261680_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261680_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [359.0, 274.0, 415.0, 361.0]}, {'label': 'no_hardhat', 'location': [369.0, 215.0, 400.0, 266.0]}]}, 'counts': {'no_vest': 1, 'no_hardhat': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:14:00+00:00', 'created_date': '2025-11-04T13:15:10.706000', 'updated_date': '2025-11-04T13:15:10', '_id': '6909fc5e66237910ebf4fd96'}
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:45:10 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:45:10 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:14:00', 'camera_id': 1}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260920_frame.jpg
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame.jpg
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:45:40 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1646 seconds
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:45:40 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [308, 466, 427, 630], Conf: 0.75
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [444, 247, 495, 319], Conf: 0.70
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [460, 203, 490, 244], Conf: 0.69
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 58, 347, 83], Conf: 0.63
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [310, 81, 337, 117], Conf: 0.56
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [295, 116, 346, 175], Conf: 0.40
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [308, 466, 427, 630]}, {'label': 'no_vest', 'location': [444, 247, 495, 319]}, {'label': 'no_hardhat', 'location': [460, 203, 490, 244]}, {'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_hardhat', 'location': [310, 81, 337, 117]}, {'label': 'no_vest', 'location': [295, 116, 346, 175]}], 'inference_time': 0.16462421417236328}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [308, 466, 427, 630]}, {'label': 'no_vest', 'location': [444, 247, 495, 319]}, {'label': 'no_hardhat', 'location': [460, 203, 490, 244]}, {'label': 'hardhat', 'location': [321, 58, 347, 83]}, {'label': 'no_hardhat', 'location': [310, 81, 337, 117]}, {'label': 'no_vest', 'location': [295, 116, 346, 175]}], 'inference_time': 0.16462421417236328}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=6 after=5
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=2 rois=2
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame_roi.jpg
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260920_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260920_frame.jpg', 'image_size': 640}
2025-11-04 18:45:40 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260920_frame.jpg"}
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:45:40 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:45:40 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:14:00', 'camera_id': 2}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261680_frame.jpg
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame.jpg
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:45:41 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1863 seconds
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:45:41 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 6 detections found.
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [88, 558, 173, 635], Conf: 0.61
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [359, 274, 415, 361], Conf: 0.61
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [334, 78, 356, 105], Conf: 0.57
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [278, 115, 314, 182], Conf: 0.53
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [301, 81, 323, 109], Conf: 0.52
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [369, 215, 400, 266], Conf: 0.39
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [88, 558, 173, 635]}, {'label': 'no_vest', 'location': [359, 274, 415, 361]}, {'label': 'no_hardhat', 'location': [334, 78, 356, 105]}, {'label': 'no_vest', 'location': [278, 115, 314, 182]}, {'label': 'no_hardhat', 'location': [301, 81, 323, 109]}, {'label': 'no_hardhat', 'location': [369, 215, 400, 266]}], 'inference_time': 0.18631386756896973}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [88, 558, 173, 635]}, {'label': 'no_vest', 'location': [359, 274, 415, 361]}, {'label': 'no_hardhat', 'location': [334, 78, 356, 105]}, {'label': 'no_vest', 'location': [278, 115, 314, 182]}, {'label': 'no_hardhat', 'location': [301, 81, 323, 109]}, {'label': 'no_hardhat', 'location': [369, 215, 400, 266]}], 'inference_time': 0.18631386756896973}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=6 after=6
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=6 after=2 rois=1
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame_roi.jpg
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261680_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261680_frame.jpg', 'image_size': 640}
2025-11-04 18:45:41 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261680_frame.jpg"}
2025-11-04 18:45:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:14:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:45:41 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:15:00', 'camera_id': 1}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260926_frame.jpg
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260926_frame.jpg
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:46:11 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1973 seconds
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:46:11 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.74
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [310, 83, 349, 127], Conf: 0.54
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [293, 117, 341, 178], Conf: 0.46
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [119, 83, 154, 126], Conf: 0.41
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [130, 58, 152, 84], Conf: 0.40
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [310, 83, 349, 127]}, {'label': 'no_vest', 'location': [293, 117, 341, 178]}, {'label': 'no_vest', 'location': [119, 83, 154, 126]}, {'label': 'hardhat', 'location': [130, 58, 152, 84]}], 'inference_time': 0.1973104476928711}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [310, 83, 349, 127]}, {'label': 'no_vest', 'location': [293, 117, 341, 178]}, {'label': 'no_vest', 'location': [119, 83, 154, 126]}, {'label': 'hardhat', 'location': [130, 58, 152, 84]}], 'inference_time': 0.1973104476928711}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=5 after=3
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=2
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260926_frame_roi.jpg
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:15:00', 'camera_id': 2}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261682_frame.jpg
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame.jpg
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:46:11 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1823 seconds
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:46:11 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [255, 457, 351, 613], Conf: 0.79
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [276, 369, 334, 458], Conf: 0.75
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [301, 76, 323, 106], Conf: 0.75
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [285, 109, 327, 179], Conf: 0.69
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [349, 268, 406, 364], Conf: 0.65
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [255, 457, 351, 613]}, {'label': 'no_hardhat', 'location': [276, 369, 334, 458]}, {'label': 'no_hardhat', 'location': [301, 76, 323, 106]}, {'label': 'no_vest', 'location': [285, 109, 327, 179]}, {'label': 'no_vest', 'location': [349, 268, 406, 364]}], 'inference_time': 0.1822521686553955}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [255, 457, 351, 613]}, {'label': 'no_hardhat', 'location': [276, 369, 334, 458]}, {'label': 'no_hardhat', 'location': [301, 76, 323, 106]}, {'label': 'no_vest', 'location': [285, 109, 327, 179]}, {'label': 'no_vest', 'location': [349, 268, 406, 364]}], 'inference_time': 0.1822521686553955}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=1 rois=1
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame_roi.jpg
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261682_frame.jpg', 'image_size': 640}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=2 file=1762261682_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:46:11 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=2 file=1762261682_frame.jpg
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '2', 'image_name': '/frames/dell/events/2/1762261682_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/2/1762261682_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [349.0, 268.0, 406.0, 364.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:15:00+00:00', 'created_date': '2025-11-04T13:16:11.802000', 'updated_date': '2025-11-04T13:16:11', '_id': '6909fc9b66237910ebf4fd97'}
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:46:11 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:46:11 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:15:00', 'camera_id': 1}
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260926_frame.jpg
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260926_frame.jpg
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:46:41 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:46:41 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:46:41 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1160 seconds
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:46:42 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.74
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [310, 83, 349, 127], Conf: 0.54
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [293, 117, 341, 178], Conf: 0.46
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [119, 83, 154, 126], Conf: 0.41
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [130, 58, 152, 84], Conf: 0.40
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [310, 83, 349, 127]}, {'label': 'no_vest', 'location': [293, 117, 341, 178]}, {'label': 'no_vest', 'location': [119, 83, 154, 126]}, {'label': 'hardhat', 'location': [130, 58, 152, 84]}], 'inference_time': 0.11599969863891602}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [310, 83, 349, 127]}, {'label': 'no_vest', 'location': [293, 117, 341, 178]}, {'label': 'no_vest', 'location': [119, 83, 154, 126]}, {'label': 'hardhat', 'location': [130, 58, 152, 84]}], 'inference_time': 0.11599969863891602}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=5 after=3
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=0 rois=2
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260926_frame_roi.jpg
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:365 - <module>() - No detections after label filtering; skipping copy/store for camera_id=1
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:15:00', 'camera_id': 2}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261682_frame.jpg
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame.jpg
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:46:42 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1134 seconds
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:46:42 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 5 detections found.
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [255, 457, 351, 613], Conf: 0.79
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [276, 369, 334, 458], Conf: 0.75
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [301, 76, 323, 106], Conf: 0.75
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [285, 109, 327, 179], Conf: 0.69
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [349, 268, 406, 364], Conf: 0.65
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [255, 457, 351, 613]}, {'label': 'no_hardhat', 'location': [276, 369, 334, 458]}, {'label': 'no_hardhat', 'location': [301, 76, 323, 106]}, {'label': 'no_vest', 'location': [285, 109, 327, 179]}, {'label': 'no_vest', 'location': [349, 268, 406, 364]}], 'inference_time': 0.11342096328735352}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [255, 457, 351, 613]}, {'label': 'no_hardhat', 'location': [276, 369, 334, 458]}, {'label': 'no_hardhat', 'location': [301, 76, 323, 106]}, {'label': 'no_vest', 'location': [285, 109, 327, 179]}, {'label': 'no_vest', 'location': [349, 268, 406, 364]}], 'inference_time': 0.11342096328735352}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=5 after=5
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=5 after=1 rois=1
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame_roi.jpg
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261682_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261682_frame.jpg', 'image_size': 640}
2025-11-04 18:46:42 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261682_frame.jpg"}
2025-11-04 18:46:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:15:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:46:42 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:16:00', 'camera_id': 1}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260932_frame.jpg
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame.jpg
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:47:12 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1208 seconds
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:47:12 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.70
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [312, 83, 350, 129], Conf: 0.45
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [291, 118, 339, 178], Conf: 0.42
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [445, 259, 483, 321], Conf: 0.39
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [312, 83, 350, 129]}, {'label': 'no_vest', 'location': [291, 118, 339, 178]}, {'label': 'no_vest', 'location': [445, 259, 483, 321]}], 'inference_time': 0.12082409858703613}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [312, 83, 350, 129]}, {'label': 'no_vest', 'location': [291, 118, 339, 178]}, {'label': 'no_vest', 'location': [445, 259, 483, 321]}], 'inference_time': 0.12082409858703613}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame_roi.jpg
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260932_frame.jpg', 'image_size': 640}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:339 - <module>() - Copy API succeeded, persisting results to backend DB
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:94 - store_result() - Posting add_result | url=http://192.168.11.97:8005/api/v1/add_result camera_id=1 file=1762260932_frame.jpg payload_keys=['user_id', 'camera_id', 'image_name', 'image_url', 'result', 'is_hide', 'created_date', 'updated_date', 'status', 'counts', 'video_url', 'frame_date']
2025-11-04 18:47:12 - [    INFO] - ppe_detection - my_utils.py:113 - store_result() - Result added successfully | camera_id=1 file=1762260932_frame.jpg
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:118 - store_result() - add_result response: {'user_id': '2', 'camera_id': '1', 'image_name': '/frames/dell/events/1/1762260932_frame.jpg', 'image_url': 'http://192.168.11.97/frames/dell/events/1/1762260932_frame.jpg', 'video_url': '', 'result': {'detection': [{'label': 'no_vest', 'location': [445.0, 259.0, 483.0, 321.0]}]}, 'counts': {'no_vest': 1}, 'is_hide': False, 'status': True, 'frame_time': None, 'frame_date': '2025-11-04T13:16:00+00:00', 'created_date': '2025-11-04T13:17:12.427000', 'updated_date': '2025-11-04T13:17:12', '_id': '6909fcd866237910ebf4fd99'}
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:355 - <module>() - Result Added into database successfully ....
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:16:00', 'camera_id': 2}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261684_frame.jpg
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame.jpg
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:47:12 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1019 seconds
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:47:12 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [291, 81, 338, 166], Conf: 0.56
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 268, 400, 342], Conf: 0.48
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [288, 51, 312, 91], Conf: 0.41
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [291, 81, 338, 166]}, {'label': 'no_vest', 'location': [351, 268, 400, 342]}, {'label': 'no_hardhat', 'location': [288, 51, 312, 91]}], 'inference_time': 0.1018524169921875}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [291, 81, 338, 166]}, {'label': 'no_vest', 'location': [351, 268, 400, 342]}, {'label': 'no_hardhat', 'location': [288, 51, 312, 91]}], 'inference_time': 0.1018524169921875}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=3 after=3
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=1
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame_roi.jpg
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261684_frame.jpg', 'image_size': 640}
2025-11-04 18:47:12 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261684_frame.jpg"}
2025-11-04 18:47:12 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:47:12 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:425 - get_all_camera() - Fetching cameras from table: camera_manager
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:54 - <module>() - camera_list :: [{'id': 1, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.55:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 1', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 15, 34, 43), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}, {'id': 2, 'rtsp_url': 'rtsp://admin:Ravi@123@192.168.11.53:554/', 'process_fps': 10, 'is_tcp': 1, 'camera_name': 'Camera 2', 'camera_resolution': '640:640', 'location_id': 1, 'is_active': 1, 'is_processing': 1, 'created_date': datetime.datetime(2025, 11, 3, 16, 55, 33), 'updated_date': datetime.datetime(2025, 11, 4, 12, 53, 18), 'status': 1, 'inference_url': None}]
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 1
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=1
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=1 usecase_id=1 labels=['no_vest', 'no_hardhat']
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 1 are 
 {'id': 1, 'camera_id': 1, 'usecase_id': 1, 'roi': '{"location": [[368, 202, 499, 463], [222, 252, 373, 518]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=55800), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat']}
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=2
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:16:00', 'camera_id': 1}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/1/1762260932_frame.jpg
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame.jpg
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 1 
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:47:42 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 1
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.1654 seconds
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:47:42 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 4 detections found.
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: hardhat, Box: [321, 57, 347, 83], Conf: 0.70
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [312, 83, 350, 129], Conf: 0.45
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [291, 118, 339, 178], Conf: 0.42
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [445, 259, 483, 321], Conf: 0.39
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [312, 83, 350, 129]}, {'label': 'no_vest', 'location': [291, 118, 339, 178]}, {'label': 'no_vest', 'location': [445, 259, 483, 321]}], 'inference_time': 0.1654040813446045}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'hardhat', 'location': [321, 57, 347, 83]}, {'label': 'no_vest', 'location': [312, 83, 350, 129]}, {'label': 'no_vest', 'location': [291, 118, 339, 178]}, {'label': 'no_vest', 'location': [445, 259, 483, 321]}], 'inference_time': 0.1654040813446045}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat'] before=4 after=3
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=2
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame_roi.jpg
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/1/1762260932_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/1/1762260932_frame.jpg', 'image_size': 640}
2025-11-04 18:47:42 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/1/1762260932_frame.jpg"}
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 1, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:58 - <module>() - Running AI on camera_id :: 2
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:61 - <module>() - Configured Result type id :: 1
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:309 - get_roi_by_result_type_id_and_camera_rtsp_id() - Fetching ROI mapping | table=camera_usecase_mapping usecase_id=1 camera_id=2
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:405 - get_roi_by_result_type_id_and_camera_rtsp_id() - Active ROI mapping accepted | camera_id=2 usecase_id=1 labels=['no_vest', 'no_hardhat', 'vest', 'hardhat']
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:65 - <module>() - ROI DETAILS for RESULT_TYPE_ID :: 1 and camera_id :: 2 are 
 {'id': 2, 'camera_id': 2, 'usecase_id': 1, 'roi': '{"location": [[325, 232, 586, 630]]}', 'roi_type': None, 'usecase_timeout': 1, 'second_before_event': 1, 'second_after_event': 1, 'start_time_utc': datetime.timedelta(seconds=14400), 'end_time_utc': datetime.timedelta(seconds=48600), 'start_time_local': None, 'end_time_local': None, 'labels': '["no_vest", "no_hardhat", "vest", "hardhat"]', 'roi_image_path': None, 'status': 1, 'allowed_labels': ['no_vest', 'no_hardhat', 'vest', 'hardhat']}
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:76 - <module>() - Parsed ROI boxes count=1
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:84 - <module>() - Fetching frame | url=http://192.168.11.97:8000/get_frame_by_time params={'frame_time': '2025-11-04 13:16:00', 'camera_id': 2}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:98 - <module>() - Frame API Response :: 200
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'STARTED'}}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:113 - <module>() - Image get from api :: /home/dev1079/frames/dell/raw_frames/2/1762261684_frame.jpg
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:116 - <module>() - cfg.ROOT_PATH :: /home/dev1079
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:117 - <module>() - cfg.ROOT_URL :: http://192.168.11.97/
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:121 - <module>() - Converted image_path_url (normalized): http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame.jpg
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:126 - <module>() - Proceeding with Camera ID :: 2 
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'PROCESSING'}}
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:134 - <module>() - Proceeding with Image Size :: 640 
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:178 - <module>() - Usecase Selected :: ppe_detection
2025-11-04 18:47:42 - [    INFO] - ppe_detection - app.py:179 - <module>() - ppe_detection usecase detected
2025-11-04 18:47:42 - [    INFO] - ppe_detection - my_utils.py:183 - predict() - In Prediction
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:184 - predict() - Device: cpu
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:185 - predict() - Confidence Threshold: 0.35
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:186 - predict() - IOU Threshold: 0.45
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:187 - predict() - Usecase: ppe_detection
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:188 - predict() - Camera ID: 2
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:189 - predict() - Original image shape (im0s): (640, 640, 3)
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:190 - predict() - Input image shape (img): (3, 640, 640)
2025-11-04 18:47:42 - [   DEBUG] - ppe_detection - my_utils.py:194 - predict() - Class names: ['no_hardhat', 'hardhat', 'no_vest', 'vest']
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:212 - predict() - NMS completed in 0.2251 seconds
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:218 - predict() - Processing image 0 - Detection found: True
2025-11-04 18:47:43 - [    INFO] - ppe_detection - my_utils.py:223 - predict() - 3 detections found.
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [291, 81, 338, 166], Conf: 0.56
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_vest, Box: [351, 268, 400, 342], Conf: 0.48
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:237 - predict() - Detection added - Label: no_hardhat, Box: [288, 51, 312, 91], Conf: 0.41
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - my_utils.py:245 - predict() - Final Result Dictionary: {'detection': [{'label': 'no_vest', 'location': [291, 81, 338, 166]}, {'label': 'no_vest', 'location': [351, 268, 400, 342]}, {'label': 'no_hardhat', 'location': [288, 51, 312, 91]}], 'inference_time': 0.2251114845275879}
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:204 - <module>() - Result of PPE Model::{'detection': [{'label': 'no_vest', 'location': [291, 81, 338, 166]}, {'label': 'no_vest', 'location': [351, 268, 400, 342]}, {'label': 'no_hardhat', 'location': [288, 51, 312, 91]}], 'inference_time': 0.2251114845275879}
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:225 - <module>() - Filtered detections by allowed labels | allowed=['no_vest', 'no_hardhat', 'vest', 'hardhat'] before=3 after=3
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:239 - <module>() - Filtered detections by ROI | before=3 after=1 rois=1
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:310 - <module>() - Prepared ROI overlay source: http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame_roi.jpg
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:326 - <module>() - copy output image :: {'image_source_url': 'http://192.168.11.97/frames/dell/raw_frames/2/1762261684_frame_roi.jpg', 'image_des_url': 'http://192.168.11.97/frames/dell/events/2/1762261684_frame.jpg', 'image_size': 640}
2025-11-04 18:47:43 - [   ERROR] - ppe_detection - app.py:359 - <module>() - Copy API failed | status=409 body={"error":"Destination file already exists; not overwriting","destination":"/home/dev1079/frames/dell/events/2/1762261684_frame.jpg"}
2025-11-04 18:47:43 - [   DEBUG] - ppe_detection - app.py:41 - set_response_schema() - Posting frame status | url=http://192.168.11.97:8000/update_camera_status payload={'camera_id': 2, 'frame_time': '2025-11-04 13:16:00', 'camera_status': {'ppe_detection': 'COMPLETED'}}
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:401 - <module>() - AI Processing Ended - **************************************************
2025-11-04 18:47:43 - [    INFO] - ppe_detection - app.py:409 - <module>() - Sleeping for 30 Seconds
